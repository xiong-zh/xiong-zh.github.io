<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://xiong-zh.github.io</id>
    <title>å¼ é›„</title>
    <updated>2020-01-19T10:29:49.394Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://xiong-zh.github.io"/>
    <link rel="self" href="https://xiong-zh.github.io/atom.xml"/>
    <subtitle>å‡¡å¿ƒæ‰€å‘,ç´ å±¥æ‰€å¾€ã€‚ç”Ÿå¦‚é€†æ—…ï¼Œä¸€è‹‡ä»¥èˆªã€‚</subtitle>
    <logo>https://xiong-zh.github.io/images/avatar.png</logo>
    <icon>https://xiong-zh.github.io/favicon.ico</icon>
    <rights>All rights reserved 2020, å¼ é›„</rights>
    <entry>
        <title type="html"><![CDATA[ä¸ªäººä¹¦ç±]]></title>
        <id>https://xiong-zh.github.io/post/ge-ren-shu-ji</id>
        <link href="https://xiong-zh.github.io/post/ge-ren-shu-ji">
        </link>
        <updated>2020-01-19T07:10:35.000Z</updated>
        <summary type="html"><![CDATA[<p>æ³¨ï¼š åœ¨å­¦ä¹ å’Œå·¥ä½œçš„è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°ä¸€äº›bugï¼Œå¤§ä½¬éš¾å¯»æˆ–ä¸€æ—¶éš¾å·²è§£å†³ï¼Œæˆ–éœ€æ±‚ä¸ç°çŠ¶å¯¹ä¸ä¸Šç­‰ä¸€ç³»åˆ—é—®é¢˜ï¼Œäºæ˜¯èŒç”Ÿäº†å†™ä¸€äº›è¾ƒå®Œæ•´æˆä½“ç³»çš„æ–‡ç« è®°å½•é‡åˆ°çš„é—®é¢˜å’Œè§£å†³ä¹‹é“çš„æ–‡ç« ã€‚æ‰€ä»¥ä¸€ä¸‹çš„ä¹¦ç±å°±è¿™æ ·å‡ºç°äº†ã€‚<br>
å…¶ä¸­è¿˜æœ‰éå¸¸å¤šçš„æƒ³æ³•è¿˜æ²¡æœ‰å®ç°ï¼Œæˆ–è€…è¿˜æ²¡æœ‰å‘ˆç°å‡ºæ¥ï¼Œæœ‰è®¸å¤šä¸å®Œç¾çš„åœ°æ–¹ï¼Œåœ¨åç»­ä¼šä¸æ–­å®ç°å¹¶åŠ ä»¥å®Œå–„ã€‚åœ¨è¿™é‡Œè¯šæ³çš„å¸Œæœ›è¯»è€…èƒ½æå‡ºå®è´µçš„æ„è§å’Œä½ çš„æœŸå¾…ï¼Œä½ å¯ä»¥é€šè¿‡æœ¬åšå®¢ä¸­ç•™çš„æ–¹å¼è”ç³»åˆ°æˆ‘ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>æ³¨ï¼š åœ¨å­¦ä¹ å’Œå·¥ä½œçš„è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°ä¸€äº›bugï¼Œå¤§ä½¬éš¾å¯»æˆ–ä¸€æ—¶éš¾å·²è§£å†³ï¼Œæˆ–éœ€æ±‚ä¸ç°çŠ¶å¯¹ä¸ä¸Šç­‰ä¸€ç³»åˆ—é—®é¢˜ï¼Œäºæ˜¯èŒç”Ÿäº†å†™ä¸€äº›è¾ƒå®Œæ•´æˆä½“ç³»çš„æ–‡ç« è®°å½•é‡åˆ°çš„é—®é¢˜å’Œè§£å†³ä¹‹é“çš„æ–‡ç« ã€‚æ‰€ä»¥ä¸€ä¸‹çš„ä¹¦ç±å°±è¿™æ ·å‡ºç°äº†ã€‚<br>
å…¶ä¸­è¿˜æœ‰éå¸¸å¤šçš„æƒ³æ³•è¿˜æ²¡æœ‰å®ç°ï¼Œæˆ–è€…è¿˜æ²¡æœ‰å‘ˆç°å‡ºæ¥ï¼Œæœ‰è®¸å¤šä¸å®Œç¾çš„åœ°æ–¹ï¼Œåœ¨åç»­ä¼šä¸æ–­å®ç°å¹¶åŠ ä»¥å®Œå–„ã€‚åœ¨è¿™é‡Œè¯šæ³çš„å¸Œæœ›è¯»è€…èƒ½æå‡ºå®è´µçš„æ„è§å’Œä½ çš„æœŸå¾…ï¼Œä½ å¯ä»¥é€šè¿‡æœ¬åšå®¢ä¸­ç•™çš„æ–¹å¼è”ç³»åˆ°æˆ‘ã€‚</p>
<!-- more -->
<p>æ³¨ï¼š åœ¨å­¦ä¹ å’Œå·¥ä½œçš„è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°ä¸€äº›bugï¼Œå¤§ä½¬éš¾å¯»æˆ–ä¸€æ—¶éš¾å·²è§£å†³ï¼Œæˆ–éœ€æ±‚ä¸ç°çŠ¶å¯¹ä¸ä¸Šç­‰ä¸€ç³»åˆ—é—®é¢˜ï¼Œäºæ˜¯èŒç”Ÿäº†å†™ä¸€äº›è¾ƒå®Œæ•´æˆä½“ç³»çš„æ–‡ç« è®°å½•é‡åˆ°çš„é—®é¢˜å’Œè§£å†³ä¹‹é“çš„æ–‡ç« ã€‚æ‰€ä»¥ä¸€ä¸‹çš„ä¹¦ç±å°±è¿™æ ·å‡ºç°äº†ã€‚<br>
å…¶ä¸­è¿˜æœ‰éå¸¸å¤šçš„æƒ³æ³•è¿˜æ²¡æœ‰å®ç°ï¼Œæˆ–è€…è¿˜æ²¡æœ‰å‘ˆç°å‡ºæ¥ï¼Œæœ‰è®¸å¤šä¸å®Œç¾çš„åœ°æ–¹ï¼Œåœ¨åç»­ä¼šä¸æ–­å®ç°å¹¶åŠ ä»¥å®Œå–„ã€‚åœ¨è¿™é‡Œè¯šæ³çš„å¸Œæœ›è¯»è€…èƒ½æå‡ºå®è´µçš„æ„è§å’Œä½ çš„æœŸå¾…ï¼Œä½ å¯ä»¥é€šè¿‡æœ¬åšå®¢ä¸­ç•™çš„æ–¹å¼è”ç³»åˆ°æˆ‘ï¼Œè·ªè°¢ğŸ™ã€‚</p>
<h2 id="æ•™ç¨‹">æ•™ç¨‹</h2>
<p><a href="https://python.zhangxiong.net">Python</a></p>
<ul>
<li>Pythonæ˜¯é‚£äº›å¯ä»¥å£°ç§°æ—¢ç®€å•åˆå¼ºå¤§çš„ç½•è§è¯­è¨€ä¹‹ä¸€ã€‚æ‚¨ä¼šæƒŠå–œåœ°å‘ç°ï¼Œä¸“æ³¨äºé—®é¢˜çš„è§£å†³æ–¹æ¡ˆè€Œä¸æ˜¯æ‚¨ç¼–ç¨‹è¯­è¨€çš„è¯­æ³•å’Œç»“æ„æ˜¯å¤šä¹ˆå®¹æ˜“ã€‚</li>
<li>Pythonæ˜¯ä¸€ç§ç®€å•è€Œç®€çº¦çš„è¯­è¨€ã€‚é˜…è¯»ä¸€ä¸ªå¥½çš„Pythonç¨‹åºæ„Ÿè§‰å°±åƒé˜…è¯»è‹±è¯­ï¼Œè™½ç„¶è‹±è¯­éå¸¸ä¸¥æ ¼ï¼Pythonçš„è¿™ç§ä¼ªä»£ç ç‰¹æ€§æ˜¯å®ƒæœ€å¤§çš„ä¼˜åŠ¿ä¹‹ä¸€ã€‚å®ƒå…è®¸æ‚¨ä¸“æ³¨äºé—®é¢˜çš„è§£å†³æ–¹æ¡ˆè€Œä¸æ˜¯è¯­è¨€æœ¬èº«ã€‚</li>
</ul>
<p><a href="https://django.zhangxiong.net">Django</a></p>
<ul>
<li>åœ¨æˆ‘ä»¬ç¼–å†™çš„æ‰€æœ‰ç¨‹åºä¸­ï¼Œæˆ‘ä»¬å·²ç»å›´ç»•å‡½æ•°è®¾è®¡äº†æˆ‘ä»¬çš„ç¨‹åºï¼Œå³æ“ä½œæ•°æ®çš„è¯­å¥å—ã€‚è¿™ç§°ä¸ºé¢å‘è¿‡ç¨‹çš„ç¼–ç¨‹æ–¹å¼ã€‚è¿˜æœ‰å¦ä¸€ç§ç»„ç»‡ç¨‹åºçš„æ–¹æ³•ï¼Œå³ç»„åˆæ•°æ®å’ŒåŠŸèƒ½å¹¶å°†å…¶åŒ…è£…åœ¨ç§°ä¸ºå¯¹è±¡çš„å†…å®¹ä¸­ã€‚è¿™ç§°ä¸ºé¢å‘å¯¹è±¡ç¼–ç¨‹èŒƒä¾‹ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨è¿‡ç¨‹ç¼–ç¨‹ï¼Œä½†åœ¨ç¼–å†™å¤§å‹ç¨‹åºæˆ–é‡åˆ°æ›´é€‚åˆæ­¤æ–¹æ³•çš„é—®é¢˜æ—¶ï¼Œå¯ä»¥ä½¿ç”¨é¢å‘å¯¹è±¡çš„ç¼–ç¨‹æŠ€æœ¯ã€‚</li>
</ul>
<h2 id="æƒ³æ³•">æƒ³æ³•</h2>
<p><a href="https://yscg.zhangxiong.net">ä¸€åˆ‡éƒ½åˆšåˆšå¥½</a></p>
<ul>
<li>å…¶å®ä¹Ÿè¿‡å†™ç‚¹ä¸œè¥¿çš„å†²åŠ¨ï¼Œä½†æœ‰æ—¶å€™èº«è¾¹å†™ä½œæ¡ä»¶è¾¾ä¸åˆ°ï¼Œåˆæˆ–è€…æ€å¦‚æ³‰æ¶Œï¼Œæç¬”å¿˜å­—ï¼Œå†™å‡ºæ¥ä¹Ÿä¸å¤ªå°½å¦‚äººæ„ï¼Œå†…å¿ƒæƒ³æ³•è¡¨è¾¾ä¸å‡ºæ¥ã€‚åŒæ—¶æ„Ÿè§‰å†™äº†åªæ˜¯è‡ªå·±çœ‹ï¼Œ åˆæˆ–è€…ä¸è‡ªä¿¡ä¸æ„¿æ„åˆ†äº«ï¼Œå¸¸å¸¸ææµ…ã€‚å…¶å®è®¸å¤šäº‹éƒ½æ²¡æˆ‘ä»¬æƒ³çš„é‚£ä¹ˆéš¾ï¼Œéš¾å°±éš¾åœ¨å¯¹æœªçŸ¥çš„ææƒ§ï¼Œå®‰äºç°çŠ¶ï¼Œä¸æ•¢èµ°å‡ºèˆ’é€‚åœˆï¼Œåªè¦è·¨è¿‡äº†ï¼Œå°±ä¼šæˆä¸ºè‡ªç„¶è€Œç„¶å¯¹äº‹ã€‚</li>
</ul>
<p><a href="https://gqlx.zhangxiong.net">å½’å»æ¥å…®</a> æš‚æœªå®Œæˆ</p>
<h3 id="æ›´å¤šä½œå“æ•¬è¯·æœŸå¾…">æ›´å¤šä½œå“æ•¬è¯·æœŸå¾…Â·Â·Â·</h3>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Django urlsä¸è§†å›¾è¯¦è§£]]></title>
        <id>https://xiong-zh.github.io/post/Django-urlsä¸è§†å›¾è¯¦è§£</id>
        <link href="https://xiong-zh.github.io/post/Django-urlsä¸è§†å›¾è¯¦è§£">
        </link>
        <updated>2020-01-18T13:12:17.000Z</updated>
        <summary type="html"><![CDATA[<p>Django urlsä¸è§†å›¾è¯¦è§£</p>
]]></summary>
        <content type="html"><![CDATA[<p>Django urlsä¸è§†å›¾è¯¦è§£</p>
<!-- more -->
<h1 id="urlsä¸è§†å›¾è¯¦è§£"><code>urls</code>ä¸è§†å›¾è¯¦è§£</h1>
<blockquote>
<p>ç¯å¢ƒ <code>Windows10</code></p>
</blockquote>
<h2 id="ä¸€-å‡†å¤‡å·¥ä½œ">ä¸€ã€å‡†å¤‡å·¥ä½œ</h2>
<ul>
<li>
<p>ä½¿ç”¨ <code>virtualenvwrapper</code> åˆ›å»ºå¹¶è¿›å…¥è™šæ‹Ÿç¯å¢ƒ</p>
<pre><code>mkvirtualenv myenv
</code></pre>
</li>
<li>
<p>å®‰è£… <code>Django2.0</code></p>
<pre><code>pip install django==2.0
</code></pre>
</li>
<li>
<p>æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ</p>
<pre><code>pip list
</code></pre>
</li>
<li>
<p>åˆ›å»ºä¸€ä¸ªåä¸º <code>mysite</code> çš„ <code>django</code> é¡¹ç›®</p>
<pre><code>django-admin startproject mysite
</code></pre>
</li>
<li>
<p>è¿›å…¥è™šæ‹Ÿç¯å¢ƒæ‰€åœ¨ç›®å½•</p>
<pre><code>cdvirtualenv
</code></pre>
</li>
<li>
<p>æ‰“å¼€å½“å‰ç›®å½•</p>
<pre><code>start %cd%
</code></pre>
</li>
<li>
<p>å°† <code>mysite</code> ç›®å½•æ‹–åˆ° <code>pycharm</code> æ‰“å¼€</p>
</li>
<li>
<p>è®¾ç½® <code>pycharm</code> çš„ <code>python</code> ç¯å¢ƒ</p>
</li>
</ul>
<h2 id="äºŒ-é¡¹ç›®ç»“æ„åˆ†æ">äºŒã€é¡¹ç›®ç»“æ„åˆ†æ</h2>
<ul>
<li>
<p><code>manange.py</code> é¡¹ç›®çš„ç®¡ç†ä¸äº¤äº’éƒ½åŸºäºè¿™ä¸ªæ–‡ä»¶ï¼Œ å¦‚å¯åŠ¨é¡¹ç›®ï¼š</p>
<pre><code>python manange.py runserver
</code></pre>
</li>
<li>
<p><code>__init__.py</code> è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ª <code>python</code> æ¨¡å—</p>
</li>
<li>
<p><code>setting.py</code> ä¿å­˜é¡¹ç›®çš„æ‰€æœ‰é…ç½®ä¿¡æ¯</p>
</li>
<li>
<p><code>urls.py</code> ç¼–å†™è·¯ç”±ä¸è§†å›¾çš„æ˜ å°„è§„åˆ™</p>
</li>
<li>
<p><code>wsig.py</code> é¡¹ç›®éƒ¨ç½²æ–‡ä»¶</p>
</li>
</ul>
<h2 id="ä¸‰-debug-æ¨¡å¼-ä¸-allowed_hosts">ä¸‰ã€<code>DEBUG</code> æ¨¡å¼  ä¸ <code>ALLOWED_HOSTS</code></h2>
<ul>
<li>åœ¨ <code>mysite/settings.py</code> ä¸­ é»˜è®¤æ˜¯å¼€å¯äº† <code>DEBUG</code> æ¨¡å¼çš„</li>
</ul>
<pre><code>DEBUG = True
</code></pre>
<ul>
<li>
<p><code>DEBUG</code> æ¨¡å¼çš„ä½œç”¨</p>
<ul>
<li>ä¿®æ”¹åè‡ªåŠ¨é‡å¯é¡¹ç›®</li>
<li>è¯¦ç»†çš„æŠ¥é”™è¯¦ç»†</li>
</ul>
</li>
<li>
<p>å…³é—­äº† <code>DEBUG</code> æ¨¡å¼ï¼Œå¿…é¡»è®¾ç½® <code>ALLOWED_HOSTS</code>, å¦åˆ™é¡¹ç›®èµ·ä¸æ¥</p>
</li>
</ul>
<pre><code>ALLOWED_HOSTS = ['127.0.0.1', 'localhost', '192.168.0.108']
</code></pre>
<ul>
<li>
<p><code>DEBUG</code> æ¨¡å¼, é»˜è®¤æ˜¯ä»¥ <code>IP</code> <code>0.0.0.0</code> å¯åŠ¨æœåŠ¡çš„ï¼Œ ä½†åªè¦è®¾ç½®äº† <code>ALLOWED_HOSTS</code>ï¼Œ å°±åªèƒ½é€šè¿‡<code>ALLOWED_HOSTS</code> ä¸­çš„ <code>IP</code> æˆ– åŸŸåè¿›è¡Œè®¿é—®</p>
</li>
<li>
<p>å¼€å‘é˜¶æ®µï¼Œå¼€å¯ <code>DEBUG</code>, çº¿ä¸Šç¯å¢ƒå¿…é¡»å…³é—­ <code>DEBUG</code> æ¨¡å¼</p>
</li>
</ul>
<h2 id="å››-root_urlconf-è®¾ç½®-urls-åŒ¹é…çš„å…¥å£æ–‡ä»¶">å››ã€<code>ROOT_URLCONF</code> è®¾ç½® <code>urls</code> åŒ¹é…çš„å…¥å£æ–‡ä»¶</h2>
<pre><code>ROOT_URLCONF = 'mysite.urls'
</code></pre>
<h2 id="äº”-åˆè¯†è§†å›¾å‡½æ•°">äº”ã€åˆè¯†è§†å›¾å‡½æ•°</h2>
<ul>
<li>è§†å›¾å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ°¸è¿œæ˜¯ <code>HttpRequest</code> å¯¹è±¡</li>
<li>è§†å›¾å‡½æ•°åªèƒ½è¿”å› <code>HttpResponseBase</code>çš„å­ç±»å¯¹è±¡</li>
</ul>
<pre><code>from django.http import HttpResponse
def index(request):
    return HttpResponse('cmsé¦–é¡µ')
</code></pre>
<h2 id="å…­-urls-åˆ†å±‚æ¨¡å—åŒ–">å…­ã€<code>urls</code> åˆ†å±‚æ¨¡å—åŒ–</h2>
<ul>
<li>
<p>æ¯ä¸ªç‹¬ç«‹çš„æ¨¡å—å¯¹åº” <code>Django</code> çš„ä¸€ä¸ª <code>app</code></p>
</li>
<li>
<p>åˆ›å»ºä¸¤ä¸ª <code>app</code> : <code>front</code> å’Œ <code>cms</code></p>
</li>
</ul>
<pre><code>  # åˆ›å»ºå‰å°æ¨¡å—
  python manange.py startapp front

  # åˆ›å»ºåå°cmsæ¨¡å—
  python manange.py startapp cms
</code></pre>
<ul>
<li>ç¼–å†™ <code>front/views.py</code></li>
</ul>
<pre><code class="language-python"># from django.shortcuts import render
from django.http import HttpResponse
# Create your views here.
def index(request):
   return HttpResponse('å‰å°é¦–é¡µ')
</code></pre>
<ul>
<li>ç¼–å†™ <code>cms/views.py</code></li>
</ul>
<pre><code class="language-python">  # from django.shortcuts import render
from django.http import HttpResponse
def index(request):
    return HttpResponse('cmsé¦–é¡µ')
</code></pre>
<ul>
<li>åˆ›å»º <code>front/urls.py</code></li>
</ul>
<pre><code class="language-python">from django.urls import path
from . import views
app_name = 'front'
urlpatterns = [
      path('', views.index, name='index')
  ]
</code></pre>
<ul>
<li>åˆ›å»º <code>cms/urls.py</code></li>
</ul>
<pre><code class="language-python">from django.urls import path
from . import views
app_name = 'cms'
urlpatterns = [
      path('', views.index, name='index')
  ]
</code></pre>
<ul>
<li>ç¼–å†™ <code>mysite/urls.py</code></li>
</ul>
<pre><code class="language-python">from django.contrib import admin
from django.urls import path, include
urlpatterns = [
      path('admin/', admin.site.urls),
      path('', include('front.urls')),
      path('cms/', include('cms.urls')),
  ]
</code></pre>
<ul>
<li>å¯åŠ¨é¡¹ç›®</li>
</ul>
<pre><code class="language-shell"> python manange.py runserver
</code></pre>
<ul>
<li>
<p>è®¿é—® <code>front</code> åº”ç”¨ï¼š <code>http://127.0.0.1:8000</code></p>
</li>
<li>
<p>è®¿é—® <code>cms</code> åº”ç”¨ï¼š <code>http://127.0.0.1:8000/cms/</code></p>
</li>
</ul>
<h2 id="ä¸ƒ-urlä¸­çš„å‚æ•°ä¼ é€’">ä¸ƒã€<code>url</code>ä¸­çš„å‚æ•°ä¼ é€’</h2>
<ul>
<li>é€šè¿‡ <code>path</code> ä¼ é€’</li>
<li>ç¼–å†™è§†å›¾å‡½æ•° <code>front/views.py</code></li>
</ul>
<pre><code class="language-python">def detail(request, article_id):
    return HttpResponse('å½“å‰æ–‡ç« id: %s' % article_id)
</code></pre>
<ul>
<li>ç¼–å†™urls <code>front/urls.py</code></li>
</ul>
<pre><code class="language-python">path('detail/&lt;article_id&gt;', views.detail, name='detail'),
</code></pre>
<ul>
<li>
<p>è®¿é—®æ–¹å¼ï¼š <code>http://localhost:8000/detail/1</code></p>
</li>
<li>
<p>é€šè¿‡ æŸ¥è¯¢å­—ç¬¦ä¸² ä¼ é€’</p>
</li>
<li>
<p>ç¼–å†™è§†å›¾å‡½æ•° <code>front/views.py</code></p>
</li>
</ul>
<pre><code class="language-python">def article_list(request):
    author = request.GET.get('author')
    return HttpResponse('%s ç›¸å…³çš„æ–‡ç« ' % author)
</code></pre>
<ul>
<li>
<p>ç¼–å†™urls <code>front/urls.py</code></p>
<pre><code class="language-python">path('list/', views.article_list, name='list'),
</code></pre>
</li>
<li>
<p>è®¿é—®æ–¹å¼ï¼š <code>http://localhost:8000/list/?author=%E6%9D%8E%E7%99%BD</code></p>
</li>
</ul>
<h2 id="å…«-å†…ç½®çš„-path-è½¬æ¢å™¨">å…«ã€ å†…ç½®çš„ <code>path</code> è½¬æ¢å™¨</h2>
<ul>
<li><code>int</code> ç±»å‹ï¼š
<ul>
<li>
<p>å®ç°åŸç†å¦‚ä¸‹</p>
<pre><code class="language-python">class IntConverter:
  regex = '[0-9]+'

  def to_python(self, value):
      return int(value)

  def to_url(self, value):
      return str(value)
</code></pre>
</li>
<li>
<p>æ”¹å†™ <code>front/urls.py</code></p>
<pre><code class="language-python">path('detail/&lt;int:article_id&gt;', views.detail, name='detail'),
</code></pre>
</li>
<li>
<p>æ”¹å†™  <code>front/views.py</code></p>
</li>
</ul>
</li>
</ul>
<pre><code class="language-python">def detail(request, article_id):
    print(type(article_id))
    return HttpResponse('å½“å‰æ–‡ç« id: %s' % article_id)
</code></pre>
<ul>
<li>
<p>è®¿é—®ï¼š <strong>http://localhost:8000/detail/1</strong></p>
</li>
<li>
<p>æ§åˆ¶å°è¾“å‡º <code>&lt;class 'int'&gt;</code></p>
</li>
<li>
<p><code>str</code> ç±»å‹ï¼Œ é»˜è®¤ä¸æŒ‡å®šç±»å‹ï¼Œå°±æ˜¯ <code>str</code> ç±»å‹</p>
<ul>
<li>åŸç†ï¼š</li>
</ul>
</li>
</ul>
<pre><code class="language-python">class StringConverter:
    regex = '[^/]+'
    def to_python(self, value):
        return value
    def to_url(self, value):
        return value
</code></pre>
<ul>
<li><code>uuid</code> ç±»å‹ï¼Œé€šç”¨å”¯ä¸€è¯†åˆ«ç 
<ul>
<li>åŸç†ï¼š</li>
</ul>
</li>
</ul>
<pre><code class="language-python">class UUIDConverter:
    regex = '[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}'
    def to_python(self, value):
        return uuid.UUID(value)
    def to_url(self, value):
        return str(value)
</code></pre>
<ul>
<li>
<p>ç”Ÿæˆä¸€ä¸ª<code>uuid</code> å¦‚ï¼š <code>b8f12562-7006-4e21-9aeb-c3426d9dcbd3</code></p>
<pre><code class="language-shell">python

import uuid

uuid.uuid4()
</code></pre>
</li>
<li>
<p>æ”¹å†™ <code>front/urls.py</code></p>
<pre><code class="language-python">path('detail/&lt;uuid:article_id&gt;', views.detail, name='detail'),
</code></pre>
</li>
<li>
<p>è®¿é—®ï¼š <code>http://localhost:8000/detail/b8f12562-7006-4e21-9aeb-c3426d9dcbd3</code></p>
</li>
<li>
<p><code>slug</code> ç±»å‹</p>
<ul>
<li>åŸç†ï¼š</li>
</ul>
</li>
</ul>
<pre><code class="language-python">regex = '[-a-zA-Z0-9_]+'
</code></pre>
<ul>
<li><code>path</code> ç±»å‹</li>
<li>åŸç†ï¼š</li>
</ul>
<pre><code class="language-python">regex = '.+'
</code></pre>
<h2 id="ä¹-è‡ªå®šä¹‰-path-è½¬æ¢å™¨">ä¹ã€è‡ªå®šä¹‰ <code>path</code> è½¬æ¢å™¨</h2>
<p><strong>è¿™é‡Œï¼Œæˆ‘ä»¬å®ç°ä¸€ä¸ªè§„åˆ™ä¸ºï¼š python+django+flask çš„ <code>url</code> å‚æ•°ï¼Œ <code>python</code> ä»£ç æ¥æ”¶åˆ°çš„æ˜¯é€šè¿‡ <code>+</code> æ‹†åˆ†åçš„åˆ—è¡¨, è½¬æ¢å™¨æ¥æ”¶çš„å‚æ•°ä¹Ÿå¿…é¡»æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼› æ¯”è¾ƒæŠ½è±¡ï¼Œè¿˜æ˜¯çœ‹ä»£ç å§ï¼</strong></p>
<ul>
<li>åˆ›å»º <code>front/converters.py</code></li>
</ul>
<pre><code>from django.urls import register_converter
class CateConverter:
      regex = r'\w+|(\w+\+\w+)+'
      def to_python(self, value):
          return value.split('+')
      def to_url(self, value):
          if isinstance(value, list):
              return '+'.join(value)
          else:
              raise RuntimeError('åˆ†ç±»å‚æ•°å¿…é¡»ä¸º list ç±»å‹')
# æ³¨å†Œ path è½¬æ¢å™¨
    register_converter(CateConverter, 'cate')
</code></pre>
<ul>
<li>ä¿®æ”¹ <code>front/__init__.py</code></li>
</ul>
<pre><code class="language-python"># è¿è¡Œæˆ‘ä»¬è‡ªå®šä¹‰çš„è½¬æ¢å™¨
from . import converters
</code></pre>
<ul>
<li>ä¿®æ”¹ <code>front/urls.py</code></li>
</ul>
<pre><code class="language-python">path('category/&lt;cate:category&gt;/', views.index_category, name='category'),
</code></pre>
<ul>
<li>ä¿®æ”¹ <code>front/views.py</code></li>
</ul>
<pre><code>def index_category(request, category):
    pathname = reverse('front:category', kwargs={'category': category})
    return HttpResponse('åˆ†ç±»åˆ—è¡¨ä¸ºï¼š %s, url çš„ pathname éƒ¨åˆ†ä¸ºï¼š %s' % (category, pathname))
</code></pre>
<ul>
<li>è®¿é—®ï¼š <code>http://localhost:8000/category/python+django/</code>, æµè§ˆå™¨æ˜¾ç¤ºå¦‚ä¸‹ï¼š</li>
</ul>
<p><code>åˆ†ç±»åˆ—è¡¨ä¸ºï¼š ['python', 'django'], url çš„ pathname éƒ¨åˆ†ä¸ºï¼š /category/python+django/</code></p>
<h2 id="å-é‡å®šå‘-ä¸-url-å‘½ååè½¬">åã€é‡å®šå‘ ä¸ <code>url</code> å‘½ååè½¬</h2>
<blockquote>
<p>é€šè¿‡æ¨¡æ‹Ÿ <code>cms</code> åå°ç™»å½•è¿›è¡Œè®²è§£</p>
</blockquote>
<ul>
<li>ä¿®æ”¹ <code>cms/urls.py</code></li>
</ul>
<pre><code class="language-python">path('login/', views.login, name='login'),
</code></pre>
<ul>
<li>ä¿®æ”¹ <code>cms/views.py</code></li>
</ul>
<pre><code>  # from django.shortcuts import render
  from django.http import HttpResponse
  from django.shortcuts import redirect, reverse

  # Create your views here.


  def index(request):
      username = request.GET.get('username')
      if username:
          return HttpResponse('cmsé¦–é¡µ')
      else:
          # é‡å®šå‘ç™»å½•é¡µé¢
          return redirect(reverse('cms:login'))  # url å‘½ååè½¬


  def login(request):
      return HttpResponse('ç™»å½•é¡µé¢')

</code></pre>
<ul>
<li>
<p>è®¿é—®ï¼š <code>http://localhost:8000/cms/</code> ä¼šè‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µé¢</p>
</li>
<li>
<p>è®¿é—®ï¼š <code>http://localhost:8000/cms/?username=zhb33</code> æ‰èƒ½è®¿é—® <code>cms</code> åå°é¦–é¡µ</p>
</li>
<li>
<p><code>url</code> å‘½ååè½¬æ—¶çš„å‚æ•°ä¼ é€’</p>
<blockquote>
<p>å¦‚æœåè½¬æ—¶ï¼Œ<code>url</code> éœ€è¦æ¥æ”¶å‚æ•°ï¼Œ å¯é€šè¿‡å…³é”®å­—å‚æ•°ä¼ é€’ï¼Œ å¦‚æœä¼ é€’çš„æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œ éœ€è¦æ‰‹åŠ¨è¿›è¡Œæ‹¼æ¥</p>
</blockquote>
<ul>
<li>ä¿®æ”¹ <code>cms/urls.py</code></li>
</ul>
</li>
</ul>
<pre><code>  path('login/&lt;location&gt;', views.login, name='login'),
</code></pre>
<ul>
<li>ä¿®æ”¹ <code>cms/views.py</code></li>
</ul>
<pre><code>  def index(request):
    username = request.GET.get('username')
    if username:
        return HttpResponse('cmsé¦–é¡µ')
    else:
        # é‡å®šå‘ç™»å½•é¡µé¢
        login_url = reverse('cms:login', kwargs={'location': 'æ·±åœ³'})  # urlä¼ å‚
        login_url += '?next=/'  # æŸ¥è¯¢å­—ç¬¦ä¸²
        return redirect(login_url)  # url å‘½ååè½¬


  def login(request, location):
      return HttpResponse('ç™»å½•é¡µé¢, ç™»å½•åœ°ç‚¹æ˜¯ %s' % location)
</code></pre>
<ul>
<li><code>http://localhost:8000/cms/</code> è·³è½¬åˆ° <code>http://localhost:8000/cms/login/æ·±åœ³?next=/</code></li>
</ul>
<h2 id="åä¸€-urlsçš„-åº”ç”¨å‘½åç©ºé—´-ä¸-å®ä¾‹å‘½åç©ºé—´">åä¸€ã€ <code>urls</code>çš„ åº”ç”¨å‘½åç©ºé—´ ä¸ å®ä¾‹å‘½åç©ºé—´</h2>
<ul>
<li>åº”ç”¨å‘½åç©ºé—´
<ul>
<li>å¯ä»¥åœ¨æ¯ä¸ªåº”ç”¨çš„ <code>urls.py</code> é€šè¿‡ <code>app_name</code> è¿›è¡Œè®¾ç½® (ä¸€èˆ¬ä½¿ç”¨è¿™ç§æ–¹å¼è®¾ç½®)</li>
</ul>
</li>
</ul>
<pre><code>app_name = 'cms'
</code></pre>
<ul>
<li>ä¹Ÿå¯ä»¥åœ¨ <code>ROOT_URLCONF</code> æŒ‡å®šçš„ <code>urls.py</code> ä¸­ä½¿ç”¨ <code>include</code> æ—¶è¿›è¡Œè®¾ç½®(ä¸å¸¸ç”¨)</li>
</ul>
<pre><code>    # mysite/urls.py
    path('cms/', include(('cms.urls', 'cms'))),  # å¼•å…¥ cms æ¨¡å—çš„ urls.py å¹¶è®¾ç½®åº”ç”¨å‘½åç©ºé—´ ä¸º cms
</code></pre>
<ul>
<li>
<p>ä½œç”¨ï¼š å¦‚ä¸Šé¢çš„ <code>url</code> å‘½ååè½¬æ—¶ <code>reverse('cms:login')</code>, å¯ä»¥é˜²æ­¢ä¸å…¶å®ƒåº”ç”¨çš„ <code>url</code> å‘½åå†²çª</p>
</li>
<li>
<p>å®ä¾‹å‘½åç©ºé—´</p>
<ul>
<li>åœ¨é€šè¿‡ <code>include</code> å¼•ç”¨æ—¶ï¼Œè¿›è¡Œè®¾ç½®</li>
</ul>
</li>
</ul>
<pre><code>    # è®¾ç½®å®ä¾‹å‘½åç©ºé—´
    path('cms/', include('cms.urls', namespace='cms')),

    # åŒæ—¶è®¾ç½® åº”ç”¨å‘½åç©ºé—´ å’Œ å®ä¾‹å‘½åç©ºé—´
    path('cms/', include(('cms.urls', 'cms'), namespace='cms')),
</code></pre>
<ul>
<li>
<p>ä½œç”¨ï¼š å½“å¤šä¸ªä¸åŒ <code>url</code> æŒ‡å‘åŒä¸€ä¸ªåº”ç”¨æ—¶ï¼Œ é˜²æ­¢ <code>url</code> å†²çª</p>
<p><strong>ä¸ä½¿ç”¨å®ä¾‹å‘½åç©ºé—´çš„æƒ…å†µ</strong></p>
<ul>
<li>ä¿®æ”¹<code>mysite/urls.py</code></li>
</ul>
</li>
</ul>
<pre><code>      path('cms1/', include('cms.urls')),  # ä¸åŒçš„ url æŒ‡å‘åŒä¸€ä¸ª åº”ç”¨
      path('cms2/', include('cms.urls')),
</code></pre>
<pre><code>* è®¿é—® `http://localhost:8000/cms1/` è·³è½¬åˆ° `http://localhost:8000/cms1/login/æ·±åœ³?next=/`  
* è®¿é—® `http://localhost:8000/cms2/` ä¹Ÿè·³è½¬åˆ° `http://localhost:8000/cms1/login/æ·±åœ³?next=/`  

**å†²çªäº†å§ï¼**

**ä½¿ç”¨å®ä¾‹å‘½åç©ºé—´**

* ä¿®æ”¹`mysite/urls.py`
</code></pre>
<pre><code>    path('cms1/', include('cms.urls', namespace='cms1')),
    path('cms2/', include('cms.urls', namespace='cms2')),
</code></pre>
<pre><code>* ä¿®æ”¹`mysite/views.py`
</code></pre>
<pre><code>def index(request):
      username = request.GET.get('username')
      if username:
          return HttpResponse('cmsé¦–é¡µ')
      else:
          # é‡å®šå‘ç™»å½•é¡µé¢
          current_namespace = request.resolver_match.namespace
          login_url = reverse('%s:login' % current_namespace, kwargs={'location': 'æ·±åœ³'})  # urlä¼ å‚
          login_url += '?next=/'  # æŸ¥è¯¢å­—ç¬¦ä¸²
          return redirect(login_url)  # url å‘½ååè½¬
</code></pre>
<pre><code>* è®¿é—® `http://localhost:8000/cms1/` è·³è½¬åˆ° `http://localhost:8000/cms1/login/æ·±åœ³?next=/`  
* è®¿é—® `http://localhost:8000/cms2/` è·³è½¬åˆ° `http://localhost:8000/cms2/login/æ·±åœ³?next=/`
</code></pre>
<h2 id="åäºŒ-re_path-å‡½æ•°">åäºŒã€ <code>re_path</code> å‡½æ•°</h2>
<blockquote>
<p>é€šè¿‡æ­£åˆ™è¿›è¡ŒåŒ¹é…å‚æ•°</p>
</blockquote>
<p><strong>åŒ¹é…ç”Ÿæ—¥</strong></p>
<ul>
<li>ä¿®æ”¹ <code>front/urls.py</code></li>
</ul>
<pre><code>  from django.urls import path, re_path
  from . import views

  app_name = 'front'

  urlpatterns = [
      path('', views.index, name='index'),
      # ?P&lt;birthday&gt; è¡¨ç¤ºå‚æ•°ä¸º birthday åŒ¹é… \d{4}-\d{2}-\d{2}
      re_path(r'^birthday/(?P&lt;birthday&gt;\d{4}-\d{2}-\d{2})/$', views.index_birthday, name='birthday')
  ]
</code></pre>
<ul>
<li>ä¿®æ”¹ <code>front/views.py</code></li>
</ul>
<pre><code>  def index_birthday(request, birthday):
    return HttpResponse('ç”Ÿæ—¥å¿«ä¹ %s' % birthday)
</code></pre>
<ul>
<li>
<p>è®¿é—®ï¼š <code>http://localhost:8000/birthday/1992-12-28/</code></p>
</li>
<li>
<p>èƒ½ç”¨ <code>path</code> è§£å†³çš„é—®é¢˜ï¼Œ å°½é‡ä¸è¦ç”¨ <code>re_path</code> å› ä¸º <code>re_path</code> å¯è¯»æ€§å·®</p>
</li>
</ul>
<h2 id="åä¸‰-é»˜è®¤å‚æ•°">åä¸‰ã€é»˜è®¤å‚æ•°</h2>
<p><strong>è¦å®ç°é»˜è®¤å‚æ•°ï¼Œéœ€è¦ä¸¤æ¡ <code>url</code> çš„é…åˆ</strong></p>
<ul>
<li>ä¿®æ”¹ <code>front/urls.py</code></li>
</ul>
<pre><code> from django.urls import path, re_path
 from . import views

 app_name = 'front'

 urlpatterns = [
     path('', views.index_list, name='index'),
     path('list/&lt;int:category_id&gt;', views.index_list, name='list'),
 ]
</code></pre>
<ul>
<li>ä¿®æ”¹ <code>front/views.py</code></li>
</ul>
<pre><code class="language-python">from django.http import HttpResponse
category = ['python', 'django', 'flask']

def index_list(request, category_id=0):
      return HttpResponse(category[category_id])
</code></pre>
<ul>
<li>
<p>è®¿é—®ï¼š <code>http://localhost:8000</code>, æ˜¾ç¤º:<br>
<code>python</code></p>
</li>
<li>
<p>è®¿é—®ï¼š <code>http://localhost:8000/list/2</code>, æ˜¾ç¤ºï¼š<br>
<code>flask</code></p>
</li>
</ul>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Djangoæ¨¡æ¿ä¸­åŠ è½½é™æ€æ–‡ä»¶]]></title>
        <id>https://xiong-zh.github.io/post/Djangoæ¨¡æ¿ä¸­åŠ è½½é™æ€æ–‡ä»¶</id>
        <link href="https://xiong-zh.github.io/post/Djangoæ¨¡æ¿ä¸­åŠ è½½é™æ€æ–‡ä»¶">
        </link>
        <updated>2020-01-18T13:11:05.000Z</updated>
        <summary type="html"><![CDATA[<p>Djangoæ¨¡æ¿ä¸­åŠ è½½é™æ€æ–‡ä»¶</p>
]]></summary>
        <content type="html"><![CDATA[<p>Djangoæ¨¡æ¿ä¸­åŠ è½½é™æ€æ–‡ä»¶</p>
<!-- more -->
<h1 id="æ¨¡æ¿ä¸­åŠ è½½é™æ€æ–‡ä»¶">æ¨¡æ¿ä¸­åŠ è½½é™æ€æ–‡ä»¶</h1>
<blockquote>
<p>æ¥ç€ <a href="https://zhb333.github.io/readme-blog/Python/Django/templates_4.html">æ¨¡æ¿ç»“æ„ä¼˜åŒ–</a> å¾€ä¸‹è®²</p>
</blockquote>
<ul>
<li>
<p>ç¡®ä¿<code>mysite/setting.py</code> ä¸­ <code>INSTALLED_APPS</code> å·²ç»å®‰è£…äº† <code>django.contrib.staticfiles</code></p>
</li>
<li>
<p>ç¡®ä¿ <code>mysite/setting.py</code> ä¸­è®¾ç½®äº† <code>STATIC_URL</code></p>
</li>
<li>
<p>åœ¨å·²ç»å®‰è£…çš„ <code>app</code> ä¸‹åˆ›å»º <code>static</code> æ–‡ä»¶å¤¹ï¼Œå¹¶å°†è¯¥åº”ç”¨çš„é™æ€èµ„æºå­˜æ”¾åœ¨é‡Œé¢ : <code>front/static/suolong.jpg</code></p>
<p><code>templates/index.html</code></p>
</li>
</ul>
<pre><code class="language-html">  {% block content %}
      &lt;img src=&quot;/static/suolong.jpg&quot; alt=&quot;suolong&quot;&gt;
  {% endblock %}
</code></pre>
<ul>
<li>
<p><code>mysite/setting.py</code> ä¸­ <code>STATIC_URL</code> å€¼æ˜¯å¯å˜çš„ï¼Œè¿™æ ·ä»¥åå¼•ç”¨é™æ€èµ„æºçš„è·¯å¾„éƒ½è¦æ ¹æ® <code>STATIC_URL</code> æ˜¯æ–°å€¼å»ä¿®æ”¹ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä½¿ç”¨ <code>{% load static %}</code></p>
<p><code>templates/index.html</code></p>
</li>
</ul>
<pre><code>  {% extends 'base.html' %}
  {% load static %}

  {% block content %}
      &lt;img src=&quot;{% static 'suolong.jpg' %}&quot; alt=&quot;suolong&quot;&gt;
  {% endblock %}
</code></pre>
<ul>
<li>
<p>å…¬å…±èµ„æºè·¯å¾„</p>
<p>åœ¨æ›´ç›®å½•ä¸‹åˆ›å»º <code>static</code> æ–‡ä»¶å¤¹</p>
<p><code>static/style.css</code></p>
</li>
</ul>
<pre><code>  body {
      background-color: #abcdef;
  }
</code></pre>
<p><code>mysite/setting.py</code></p>
<pre><code>  STATICFILES_DIRS = (
      os.path.join(BASE_DIR, 'static'),
  )
</code></pre>
<p><code>mysite/base.html</code></p>
<pre><code>  {% load static %}
  &lt;!DOCTYPE html&gt;
  &lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
      &lt;meta charset=&quot;UTF-8&quot;&gt;
      &lt;title&gt;Title&lt;/title&gt;
      &lt;link rel=&quot;stylesheet&quot; href=&quot;{% static 'style.css' %}&quot;&gt;
  &lt;/head&gt;
</code></pre>
<ul>
<li>
<p>åœ¨æ¯ä¸ªéœ€è¦åŠ è½½é™æ€èµ„æºæ–‡ä»¶çš„æ¨¡æ¿ä¸­éƒ½è¦å†™ <code>{% load static %}</code>, ä¸ºäº†ä¸åœ¨æ¯ä¸ªæ¨¡æ¿ä¸­éƒ½å†™ï¼Œæˆ‘ä»¬å¯ä»¥å§ <code>static</code> å˜ä¸º <code>DTL</code> æ¨¡æ¿æ ‡ç­¾</p>
<p><code>mysite/setting.py</code></p>
</li>
</ul>
<pre><code>  TEMPLATES = [
      {
        'OPTIONS': {
            'builtins': [
                'django.templatetags.static'
            ]
        },
      },
  ]
</code></pre>
<p><strong>è¿™æ ·å°±ä¸ç”¨åœ¨æ¯ä¸ªé¡µé¢ä¸­å¼•å…¥<code>{% load static %}</code></strong></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Djangoæ¨¡æ¿ç»“æ„ä¼˜åŒ–]]></title>
        <id>https://xiong-zh.github.io/post/Djangoæ¨¡æ¿ç»“æ„ä¼˜åŒ–</id>
        <link href="https://xiong-zh.github.io/post/Djangoæ¨¡æ¿ç»“æ„ä¼˜åŒ–">
        </link>
        <updated>2020-01-18T13:09:55.000Z</updated>
        <summary type="html"><![CDATA[<p>Djangoæ¨¡æ¿ç»“æ„ä¼˜åŒ–</p>
]]></summary>
        <content type="html"><![CDATA[<p>Djangoæ¨¡æ¿ç»“æ„ä¼˜åŒ–</p>
<!-- more -->
<h1 id="dtl-æ¨¡æ¿ç»“æ„ä¼˜åŒ–"><code>DTL</code> æ¨¡æ¿ç»“æ„ä¼˜åŒ–</h1>
<h2 id="ä¸€-å¼•å…¥æ¨¡æ¿">ä¸€ã€å¼•å…¥æ¨¡æ¿</h2>
<h3 id="include-æ ‡ç­¾çš„ä½¿ç”¨"><code>include</code> æ ‡ç­¾çš„ä½¿ç”¨</h3>
<ul>
<li>
<p>æ–°å»º <code>templates/header.html</code></p>
<pre><code>&lt;header&gt;å¤´éƒ¨&lt;/header&gt;
</code></pre>
</li>
<li>
<p>æ–°å»º <code>templates/footer.html</code></p>
<pre><code>&lt;footer&gt;å°¾éƒ¨&lt;/footer&gt;
</code></pre>
</li>
<li>
<p>ä¿®æ”¹ <code>templates/index.html</code></p>
</li>
</ul>
<pre><code>    &lt;body&gt;
    {% include 'header.html' %}
    &lt;div&gt;å†…å®¹&lt;/div&gt;
    {% include 'footer.html' %}
    &lt;/body&gt;
</code></pre>
<h3 id="include-æ ‡ç­¾ä¸­çš„æ¨¡æ¿æŸ¥æ‰¾è·¯å¾„"><code>include</code> æ ‡ç­¾ä¸­çš„æ¨¡æ¿æŸ¥æ‰¾è·¯å¾„</h3>
<p><strong>å‚ç…§ <a href="http://localhost:8080/readme-blog/Python/Django/templates_1.html#%E4%B8%80%E3%80%81%E6%A8%A1%E6%9D%BF%E6%9F%A5%E6%89%BE%E8%B7%AF%E5%BE%84">render_to_stringçš„æ¨¡æ¿æŸ¥æ‰¾è·¯å¾„</a></strong></p>
<h3 id="include-æ ‡ç­¾å¼•å…¥çš„æ¨¡æ¿å¯ä»¥å¼•ç”¨å½“å‰æ¨¡æ¿ä¸­çš„å˜é‡"><code>include</code> æ ‡ç­¾å¼•å…¥çš„æ¨¡æ¿å¯ä»¥å¼•ç”¨å½“å‰æ¨¡æ¿ä¸­çš„å˜é‡</h3>
<ul>
<li>ä¿®æ”¹ <code>front/views.py</code></li>
</ul>
<pre><code>    def index(request):
        context = {
            'title': 'Django'
        }
        return render(request, 'index.html', context=context)
</code></pre>
<ul>
<li>
<p>ä¿®æ”¹ <code>templates/header.html</code></p>
<pre><code>{#å¤´éƒ¨ Django#}
&lt;header&gt;å¤´éƒ¨ {{ title }}&lt;/header&gt;
</code></pre>
</li>
<li>
<p>ä½†ä¸ºäº†æ‰€æœ‰å¼•ç”¨ <code>templates/header.html</code> çš„æ¨¡æ¿éƒ½èƒ½ä½¿ç”¨ <code>title</code> å˜é‡ï¼Œ å¯ä»¥åœ¨ <code>include</code> æ ‡ç­¾ä¸­ä¼ é€’è¯¥å˜é‡</p>
<p>ä¿®æ”¹ <code>templates/index.html</code></p>
<pre><code>{#å¤´éƒ¨ Young and Beautiful#}
{% include 'header.html' with title='Young and Beautiful' %}
</code></pre>
</li>
</ul>
<h2 id="äºŒ-æ¨¡æ¿ç»§æ‰¿">äºŒã€æ¨¡æ¿ç»§æ‰¿</h2>
<ul>
<li>æ–°å»º <code>templates/base.html</code>ï¼š</li>
</ul>
<pre><code>    &lt;body&gt;
    {% include 'header.html' with title='Young and Beautiful' %}
    &lt;div&gt;
        {% block content %}
            é»˜è®¤å†…å®¹
        {% endblock %}
    &lt;/div&gt;
    {% include 'footer.html' %}
    &lt;/body&gt;
</code></pre>
<ul>
<li>ä¿®æ”¹ <code>templates/index.html</code>:</li>
</ul>
<pre><code>    {% extends 'base.html' %}

    {% block content %}
    é¦–é¡µä¸­çš„å†…å®¹
    {% endblock %}
</code></pre>
<ul>
<li>
<p>è®¿é—® <code>block</code> æ ‡ç­¾è¢«è¦†ç›–çš„å†…å®¹ï¼š</p>
<p><code>templates/index.html</code>:</p>
</li>
</ul>
<pre><code>    {% extends 'base.html' %}

    {% block content %}
    é¦–é¡µä¸­çš„å†…å®¹
    &lt;p&gt;{{ block.super }}&lt;/p&gt;
    {% endblock %}
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Djangoè‡ªå®šä¹‰æ¨¡æ¿è¿‡æ»¤å™¨]]></title>
        <id>https://xiong-zh.github.io/post/Djangoè‡ªå®šä¹‰æ¨¡æ¿è¿‡æ»¤å™¨</id>
        <link href="https://xiong-zh.github.io/post/Djangoè‡ªå®šä¹‰æ¨¡æ¿è¿‡æ»¤å™¨">
        </link>
        <updated>2020-01-18T13:08:18.000Z</updated>
        <summary type="html"><![CDATA[<p>Djangoè‡ªå®šä¹‰æ¨¡æ¿è¿‡æ»¤å™¨</p>
]]></summary>
        <content type="html"><![CDATA[<p>Djangoè‡ªå®šä¹‰æ¨¡æ¿è¿‡æ»¤å™¨</p>
<!-- more -->
<h1 id="dtl-è‡ªå®šä¹‰æ¨¡æ¿è¿‡æ»¤å™¨"><code>DTL</code> è‡ªå®šä¹‰æ¨¡æ¿è¿‡æ»¤å™¨</h1>
<h2 id="ä¸€-æ¨¡æ¿è¿‡æ»¤å™¨çš„å®šä¹‰">ä¸€ã€æ¨¡æ¿è¿‡æ»¤å™¨çš„å®šä¹‰</h2>
<ul>
<li>
<p>åœ¨åº”ç”¨çš„ç›®å½•ä¸‹ï¼Œå¦‚ <code>front</code> ä¸‹ï¼Œ æ–°å»ºä¸€ä¸ªåä¸ºï¼š <code>templatetags</code> çš„ <code>python</code> åŒ…</p>
</li>
<li>
<p>æ–°å»º <code>front/templatetags/custom_filter.py</code>, å¹¶å®šä¹‰ä¸¤ä¸ªæ¨¡æ¿è¿‡æ»¤å™¨å¦‚ä¸‹ï¼š</p>
</li>
</ul>
<pre><code>  from django import template

  register = template.Library()


  def my_add(value, arg):
      try:
          return value + arg
      except (Exception,):
          return ''


  def my_upper(value):
      try:
          return value.upper()
      except (Exception,):
          return value


  register.filter('my_add', my_add)
  register.filter('my_upper', my_upper)
</code></pre>
<ul>
<li>
<p>éœ€è¦ä½¿ç”¨ <code>{% load custom_filter %}</code>, æŠŠåº”ç”¨ä¸‹å®šä¹‰æ¨¡æ¿è¿‡æ»¤å™¨çš„æ–‡ä»¶å¯¼å…¥æ¨¡æ¿</p>
</li>
<li>
<p><code>templates/index.html</code> ä»£ç ä¿®æ”¹å¦‚ä¸‹ï¼š</p>
</li>
</ul>
<pre><code>  {% load custom_filter %}
  &lt;!DOCTYPE html&gt;
  &lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
      &lt;meta charset=&quot;UTF-8&quot;&gt;
      &lt;title&gt;Title&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
  {#abcdef#}
  {{ &quot;abc&quot;|my_add:&quot;def&quot; }} &lt;br&gt;
  {#HELLO#}
  {{ &quot;hello&quot;|my_upper }}
  &lt;/body&gt;
  &lt;/html&gt;
</code></pre>
<ul>
<li>*<em>æ³¨æ„ï¼Œ<code>front</code> åº”ç”¨å¿…é¡»åœ¨ <code>mysite/settings.py</code> è¿›è¡Œæ³¨å†Œï¼Œåœ¨ <code>front</code> ä¸‹å®šä¹‰çš„æ¨¡æ¿è¿‡æ»¤å™¨æ‰èƒ½èµ·ä½œç”¨</em></li>
</ul>
<pre><code>  INSTALLED_APPS = [
      'front',
  ]
</code></pre>
<h2 id="äºŒ-å®æˆ˜-è‡ªå®šä¹‰æ—¶é—´è®¡ç®—è¿‡æ»¤å™¨">äºŒã€å®æˆ˜--è‡ªå®šä¹‰æ—¶é—´è®¡ç®—è¿‡æ»¤å™¨</h2>
<p><code>front/templatetags/custom_filter.py</code></p>
<pre><code>from django import template
from datetime import datetime

register = template.Library()


@register.filter
def time_since(value):
    &quot;&quot;&quot;
    timeè·ç¦»ç°åœ¨çš„æ—¶é—´é—´éš”
    1 å¦‚æœæ—¶é—´é—´éš”å°äº1åˆ†é’Ÿï¼Œé‚£ä¹ˆæ˜¾ç¤º åˆšåˆš
    2 å¦‚æœæ—¶é—´é—´éš”å¤§äº1åˆ†é’Ÿå°äº1å°æ—¶ï¼Œ é‚£ä¹ˆæ˜¾ç¤º xx åˆ†é’Ÿå‰
    3 å¦‚æœæ˜¯å¤§äº1å°æ—¶å°äº24å°æ—¶ï¼Œé‚£ä¹ˆæ˜¾ç¤º xx å°æ—¶å‰
    4 å¦‚æœå¤§äº24å°æ—¶ï¼Œå°äº30å¤©ï¼Œ é‚£ä¹ˆæ˜¾ç¤º xx å¤©å‰
    5 å¦åˆ™æ˜¾ç¤ºå…·ä½“æ—¶é—´ï¼Œ 2018/12/10 23:05
    &quot;&quot;&quot;
    if not isinstance(value, datetime):
        return value
    now = datetime.now()
    timestamp = (now - value).total_seconds()
    if timestamp &lt; 60:
        return 'åˆšåˆš'
    elif 60 &lt;= timestamp &lt; 60 * 60:
        minutes = int(timestamp/60)
        return '%såˆ†é’Ÿå‰' % minutes
    elif 60 * 60 &lt;= timestamp &lt; 60 * 60 * 24:
        hour = int(timestamp / (60 * 60))
        return '%s å°æ—¶å‰' % hour
    elif 60 * 60 * 24 &lt;= timestamp &lt; 60 * 60 * 24 * 30:
        days = int(timestamp / (60 * 60 * 24))
        return '%s å¤©å‰' % days
    else:
        return value.strftime(&quot;%Y/%m/%d %H:%M&quot;)
</code></pre>
<p><code>front/views.py</code></p>
<pre><code>from django.shortcuts import render
from datetime import datetime


def index(request):
    context = {
        'my_time_1': datetime.now(),
        'my_time_2': datetime(year=2018, month=12, day=10, hour=23, minute=18),
        'my_time_3': datetime(year=2018, month=12, day=10, hour=18, minute=18),
        'my_time_4': datetime(year=2018, month=12, day=1, hour=22, minute=18),
        'my_time_5': datetime(year=2017, month=12, day=10, hour=23, minute=18),
    }
    return render(request, 'index.html', context=context)
</code></pre>
<p><code>templates/index.html</code></p>
<pre><code>{% load custom_filter %}
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
{#åˆšåˆš #}
{{ my_time_1|time_since }} &lt;br&gt;
{#7åˆ†é’Ÿå‰ #}
{{ my_time_2|time_since }} &lt;br&gt;
{#5 å°æ—¶å‰ #}
{{ my_time_3|time_since }} &lt;br&gt;
{#9 å¤©å‰ #}
{{ my_time_4|time_since }} &lt;br&gt;
{#2017/12/10 23:18#}
{{ my_time_5|time_since }}
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Djangoæ¨¡æ¿è¿‡æ»¤å™¨è¯¦è§£]]></title>
        <id>https://xiong-zh.github.io/post/Djangoæ¨¡æ¿è¿‡æ»¤å™¨è¯¦è§£</id>
        <link href="https://xiong-zh.github.io/post/Djangoæ¨¡æ¿è¿‡æ»¤å™¨è¯¦è§£">
        </link>
        <updated>2020-01-18T13:06:44.000Z</updated>
        <summary type="html"><![CDATA[<p>Djangoæ¨¡æ¿è¿‡æ»¤å™¨è¯¦è§£</p>
]]></summary>
        <content type="html"><![CDATA[<p>Djangoæ¨¡æ¿è¿‡æ»¤å™¨è¯¦è§£</p>
<!-- more -->
<h1 id="dtl-æ¨¡æ¿è¿‡æ»¤å™¨"><code>DTL</code> æ¨¡æ¿è¿‡æ»¤å™¨</h1>
<h2 id="add"><code>add</code></h2>
<ul>
<li>åŸç†ï¼š</li>
</ul>
<pre><code>  def add(value, arg):
    &quot;&quot;&quot;Add the arg to the value&quot;&quot;&quot;
    try:
      return int(value) + int(arg)
    except (ValueError, TypeError):
      try:
        return value + arg
      except Exception:
        return ''
</code></pre>
<ul>
<li>ä½¿ç”¨<br>
<code>front/views.py</code></li>
</ul>
<pre><code>  def index(request):
    context = {
        &quot;number&quot;: 1,
        &quot;persons&quot;: ['baby', 'dear'],
        &quot;girls&quot;: ['å®å®', 'äº²çˆ±çš„']
    }
    return render(request, 'index.html', context=context)
</code></pre>
<p><code>templates/index.html</code></p>
<pre><code>{#æ•°å­—ç›¸åŠ #}
{{ number|add:&quot;2&quot; }} &lt;br&gt;
{#å­—ç¬¦ä¸²æ‹¼æ¥#}
{{ number|add:'abc' }} &lt;br&gt;
{#åˆ—è¡¨æ‹¼æ¥#}
{{ persons|add:girls }}
</code></pre>
<h2 id="cut"><code>cut</code></h2>
<ul>
<li>
<p>åŸç†ï¼š</p>
<pre><code>def cut(vaule, arg):
  &quot;&quot;&quot;Remove all values of arg from the given string&quot;&quot;&quot;
  safe = isinstance(value, SafeData)
  value = value.replace(arg, '')
  if safe and arg != ';':
    return mark_safe(value)
  return value
</code></pre>
</li>
<li>
<p>ä½¿ç”¨<br>
<code>templates/index.html</code></p>
<pre><code>{# å»é™¤å­—ç¬¦ä¸²ä¸­ç©ºæ ¼ #}
{{ &quot;This is ten percent luck, twenty percent skill&quot;|cut:&quot; &quot; }}
</code></pre>
</li>
</ul>
<h2 id="date"><code>date</code></h2>
<ul>
<li>
<p>æ‰€æœ‰æ ¼å¼</p>
<table>
<thead>
<tr>
<th style="text-align:center">æ ¼å¼å­—ç¬¦</th>
<th style="text-align:center">æè¿°</th>
<th style="text-align:center">ç¤ºä¾‹è¾“å‡º</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">a</td>
<td style="text-align:center">'a.m.' æˆ– 'p.m.' ï¼ˆè¯·æ³¨æ„ï¼Œè¿™ä¸PHPè¾“å‡ºç•¥æœ‰ä¸åŒï¼Œå› ä¸ºè¿™åŒ…æ‹¬ä¸Associated Pressæ ·å¼åŒ¹é…çš„å¥ç‚¹ã€‚ï¼‰</td>
<td style="text-align:center">'a.m.'</td>
</tr>
<tr>
<td style="text-align:center">A</td>
<td style="text-align:center">'AM' æˆ– 'PM'ã€‚</td>
<td style="text-align:center">'a.m.'</td>
</tr>
<tr>
<td style="text-align:center">b</td>
<td style="text-align:center">æœˆï¼Œæ–‡å­—ï¼Œ3ä¸ªå­—æ¯ï¼Œå°å†™ã€‚</td>
<td style="text-align:center">'jan'</td>
</tr>
<tr>
<td style="text-align:center">B</td>
<td style="text-align:center">æœªå®ç°ã€‚</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">c</td>
<td style="text-align:center">ISO 8601æ ¼å¼ã€‚ ï¼ˆæ³¨æ„ï¼šä¸å…¶ä»–æ ¼å¼åŒ–ç¨‹åºï¼Œå¦‚â€œZâ€ï¼Œâ€œOâ€æˆ–â€œrâ€ä¸åŒï¼Œå¦‚æœå€¼æ˜¯ä¸€ä¸ªå¤©çœŸçš„datetimeï¼ˆè§ datetime.tzinfoï¼‰ï¼Œâ€œcâ€æ ¼å¼åŒ–ç¨‹åºä¸ä¼šæ·»åŠ æ—¶åŒºåç§»ã€‚</td>
<td style="text-align:center">2008-01-02T10:30:00.000123+02:00 æˆ– 2008-01-02T10:30:00.000123 ï¼ˆå¦‚æœdatetimeæ˜¯å¤©çœŸçš„ï¼‰</td>
</tr>
<tr>
<td style="text-align:center">d</td>
<td style="text-align:center">æœˆçš„æ—¥æœŸï¼Œå¸¦å‰å¯¼é›¶çš„2ä½æ•°å­—ã€‚</td>
<td style="text-align:center">'01' åˆ° '31'</td>
</tr>
<tr>
<td style="text-align:center">D</td>
<td style="text-align:center">æ˜ŸæœŸå‡ ï¼Œæ–‡å­—ï¼Œ3ä¸ªå­—æ¯ã€‚</td>
<td style="text-align:center">'Fri'</td>
</tr>
<tr>
<td style="text-align:center">e</td>
<td style="text-align:center">æ—¶åŒºåç§°ã€‚å¯ä»¥æ˜¯ä»»ä½•æ ¼å¼ï¼Œæˆ–å¯èƒ½è¿”å›ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼Œå…·ä½“å–å†³äºdatetimeã€‚</td>
<td style="text-align:center">''ï¼Œ'GMT'ï¼Œ'-500'ï¼Œ'US/Eastern' ç­‰ã€‚</td>
</tr>
<tr>
<td style="text-align:center">E</td>
<td style="text-align:center">æœˆï¼Œç‰¹å®šäºè¯­è¨€ç¯å¢ƒçš„æ›¿ä»£è¡¨ç¤ºï¼Œé€šå¸¸ç”¨äºé•¿æ—¥æœŸè¡¨ç¤ºã€‚</td>
<td style="text-align:center">'listopada' ï¼ˆå¯¹äºæ³¢å…°è¯­åŒºåŸŸï¼Œè€Œä¸æ˜¯ 'Listopad'ï¼‰</td>
</tr>
<tr>
<td style="text-align:center">f</td>
<td style="text-align:center">æ—¶é—´ï¼Œ12å°æ—¶å°æ—¶å’Œåˆ†é’Ÿï¼Œå¦‚æœä»–ä»¬ä¸ºé›¶ï¼Œåˆ†é’Ÿå°†å…³é—­ã€‚ä¸“æœ‰æ‰©å±•ã€‚</td>
<td style="text-align:center">'1'ï¼Œ'1:30'</td>
</tr>
<tr>
<td style="text-align:center">F</td>
<td style="text-align:center">æœˆï¼Œæ–‡å­—ï¼Œé•¿ã€‚</td>
<td style="text-align:center">'January'</td>
</tr>
<tr>
<td style="text-align:center">g</td>
<td style="text-align:center">å°æ—¶ï¼Œ12å°æ—¶æ ¼å¼ï¼Œä¸å«å‰å¯¼é›¶ã€‚</td>
<td style="text-align:center">'1' åˆ° '12'</td>
</tr>
<tr>
<td style="text-align:center">G</td>
<td style="text-align:center">å°æ—¶ï¼Œ24å°æ—¶æ ¼å¼ï¼Œæ— å‰å¯¼é›¶ã€‚</td>
<td style="text-align:center">'0' åˆ° '23'</td>
</tr>
<tr>
<td style="text-align:center">h</td>
<td style="text-align:center">å°æ—¶ï¼Œ12å°æ—¶æ ¼å¼ã€‚</td>
<td style="text-align:center">'01' åˆ° '12'</td>
</tr>
<tr>
<td style="text-align:center">H</td>
<td style="text-align:center">å°æ—¶ï¼Œ24å°æ—¶æ ¼å¼ã€‚</td>
<td style="text-align:center">'00' åˆ° '23'</td>
</tr>
<tr>
<td style="text-align:center">i</td>
<td style="text-align:center">åˆ†é’Ÿã€‚</td>
<td style="text-align:center">'00' åˆ° '59'</td>
</tr>
<tr>
<td style="text-align:center">I</td>
<td style="text-align:center">å¤ä»¤æ—¶ï¼Œæ— è®ºæ˜¯å¦ç”Ÿæ•ˆã€‚</td>
<td style="text-align:center">'1' æˆ– '0'</td>
</tr>
<tr>
<td style="text-align:center">j</td>
<td style="text-align:center">æ²¡æœ‰å‰å¯¼é›¶çš„æœˆä»½æ—¥ã€‚</td>
<td style="text-align:center">'1' åˆ° '31'</td>
</tr>
<tr>
<td style="text-align:center">l</td>
<td style="text-align:center">æ˜ŸæœŸå‡ ï¼Œæ–‡å­—ï¼Œé•¿ã€‚</td>
<td style="text-align:center">'Friday'</td>
</tr>
<tr>
<td style="text-align:center">L</td>
<td style="text-align:center">æ˜¯å¦ä¸ºé—°å¹´çš„å¸ƒå°”å€¼ã€‚</td>
<td style="text-align:center">True æˆ– False</td>
</tr>
<tr>
<td style="text-align:center">m</td>
<td style="text-align:center">æœˆï¼Œ2ä½æ•°å­—ï¼Œå‰å¯¼é›¶ã€‚</td>
<td style="text-align:center">'01' åˆ° '12'</td>
</tr>
<tr>
<td style="text-align:center">M</td>
<td style="text-align:center">æœˆï¼Œæ–‡å­—ï¼Œ3ä¸ªå­—æ¯ã€‚</td>
<td style="text-align:center">'Jan'</td>
</tr>
<tr>
<td style="text-align:center">n</td>
<td style="text-align:center">æ²¡æœ‰å‰å¯¼é›¶çš„æœˆã€‚</td>
<td style="text-align:center">'1' åˆ° '12'</td>
</tr>
<tr>
<td style="text-align:center">N</td>
<td style="text-align:center">æœˆç¼©å†™åœ¨Associated Pressé£æ ¼ã€‚ä¸“æœ‰æ‰©å±•ã€‚</td>
<td style="text-align:center">'Jan.'ï¼Œ'Feb.'ï¼Œ'March'ï¼Œ'May'</td>
</tr>
<tr>
<td style="text-align:center">o</td>
<td style="text-align:center">ISO-8601å‘¨ç¼–å·å¹´ï¼Œå¯¹åº”äºä½¿ç”¨é—°å¹´çš„ISO-8601å‘¨ç¼–å·ï¼ˆWï¼‰ã€‚æ›´å¸¸è§çš„å¹´ä»½æ ¼å¼è§Yã€‚</td>
<td style="text-align:center">'1999'</td>
</tr>
<tr>
<td style="text-align:center">O</td>
<td style="text-align:center">ä¸æ ¼æ—å¨æ²»æ—¶é—´çš„å·®å€¼ï¼ˆä»¥å°æ—¶ä¸ºå•ä½ï¼‰ã€‚</td>
<td style="text-align:center">'+0200'</td>
</tr>
<tr>
<td style="text-align:center">P</td>
<td style="text-align:center">æ—¶é—´ï¼Œ12å°æ—¶åˆ¶ï¼Œåˆ†é’Ÿå’Œâ€™a.mã€‚â€™/â€™p.mã€‚â€™ï¼Œå¦‚æœå®ƒä»¬ä¸ºé›¶ï¼Œåˆ†é’Ÿå°†å…³é—­ï¼Œå¦‚æœåˆé€‚ï¼Œåˆ†é’Ÿå°†ä¿ç•™ç‰¹æ®Šå­—ç¬¦ä¸²â€™åˆå¤œâ€™å’Œâ€™ä¸­åˆâ€™ã€‚ä¸“</td>
<td style="text-align:center">æœ‰æ‰©å±•ã€‚ '1 a.m.'ï¼Œ'1:30 p.m.'ï¼Œ'midnight'ï¼Œ'noon'ï¼Œ'12:30 p.m.'</td>
</tr>
<tr>
<td style="text-align:center">r</td>
<td style="text-align:center">RFC 5322 æ ¼å¼çš„æ—¥æœŸã€‚</td>
<td style="text-align:center">'Thu, 21 Dec 2000 16:01:07 +0200'</td>
</tr>
<tr>
<td style="text-align:center">s</td>
<td style="text-align:center">ç§’ï¼Œå¸¦å‰å¯¼é›¶çš„2ä½æ•°ã€‚</td>
<td style="text-align:center">'00' åˆ° '59'</td>
</tr>
<tr>
<td style="text-align:center">S</td>
<td style="text-align:center">æ¯æœˆæ—¥æœŸçš„è‹±æ–‡åºæ•°åç¼€ï¼Œ2ä¸ªå­—ç¬¦ã€‚</td>
<td style="text-align:center">'st'ï¼Œ'nd'ï¼Œ'rd' æˆ– 'th'</td>
</tr>
<tr>
<td style="text-align:center">t</td>
<td style="text-align:center">æŒ‡å®šæœˆä»½çš„å¤©æ•°ã€‚</td>
<td style="text-align:center">28 åˆ° 31</td>
</tr>
<tr>
<td style="text-align:center">T</td>
<td style="text-align:center">æœ¬æœºçš„æ—¶åŒºã€‚</td>
<td style="text-align:center">'EST'ï¼Œ'MDT'</td>
</tr>
<tr>
<td style="text-align:center">u</td>
<td style="text-align:center">å¾®ç§’ã€‚</td>
<td style="text-align:center">000000 åˆ° 999999</td>
</tr>
<tr>
<td style="text-align:center">U</td>
<td style="text-align:center">è‡ªUnixæ—¶ä»£ä»¥æ¥çš„ç§’æ•°ï¼ˆ1970å¹´1æœˆ1æ—¥00:00:00 UTCï¼‰ã€‚</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">w</td>
<td style="text-align:center">æ˜ŸæœŸå‡ ï¼Œæ²¡æœ‰å‰å¯¼é›¶çš„æ•°å­—ã€‚</td>
<td style="text-align:center">'0' ï¼ˆæ˜ŸæœŸæ—¥ï¼‰è‡³ '6' ï¼ˆæ˜Ÿå…­ï¼‰</td>
</tr>
<tr>
<td style="text-align:center">W</td>
<td style="text-align:center">ISO-8601å¹´çš„å‘¨æ•°ï¼Œå‘¨ä»æ˜ŸæœŸä¸€å¼€å§‹ã€‚</td>
<td style="text-align:center">1ï¼Œ53</td>
</tr>
<tr>
<td style="text-align:center">y</td>
<td style="text-align:center">å¹´ï¼Œ2ä½æ•°ã€‚</td>
<td style="text-align:center">'99'</td>
</tr>
<tr>
<td style="text-align:center">Y</td>
<td style="text-align:center">å¹´ï¼Œ4ä½æ•°ã€‚</td>
<td style="text-align:center">'1999'</td>
</tr>
<tr>
<td style="text-align:center">z</td>
<td style="text-align:center">ä¸€å¹´ä¸­çš„ä¸€å¤©ã€‚</td>
<td style="text-align:center">0 åˆ° 365</td>
</tr>
<tr>
<td style="text-align:center">Z</td>
<td style="text-align:center">æ—¶åŒºåç§»ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ã€‚ UTCä¹‹å‰çš„æ—¶åŒºçš„åç§»æ€»æ˜¯è´Ÿçš„ï¼Œå¹¶ä¸”å¯¹äºUTCçš„ä¸œéƒ¨çš„åç§»æ€»æ˜¯æ­£çš„ã€‚</td>
<td style="text-align:center">-43200 åˆ° 43200</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>å¸¸ç”¨æ ¼å¼</p>
<table>
<thead>
<tr>
<th style="text-align:center">æ ¼å¼å­—ç¬¦</th>
<th style="text-align:center">æè¿°</th>
<th style="text-align:center">ç¤ºä¾‹è¾“å‡º</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Y</td>
<td style="text-align:center">å¹´ï¼Œ4ä½æ•°ã€‚</td>
<td style="text-align:center">'1999'</td>
</tr>
<tr>
<td style="text-align:center">m</td>
<td style="text-align:center">æœˆï¼Œ2ä½æ•°å­—ï¼Œå‰å¯¼é›¶ã€‚</td>
<td style="text-align:center">'01' åˆ° '12'</td>
</tr>
<tr>
<td style="text-align:center">n</td>
<td style="text-align:center">æ²¡æœ‰å‰å¯¼é›¶çš„æœˆã€‚</td>
<td style="text-align:center">'1' åˆ° '12'</td>
</tr>
<tr>
<td style="text-align:center">d</td>
<td style="text-align:center">æœˆçš„æ—¥æœŸï¼Œå¸¦å‰å¯¼é›¶çš„2ä½æ•°å­—ã€‚</td>
<td style="text-align:center">'01' åˆ° '31'</td>
</tr>
<tr>
<td style="text-align:center">j</td>
<td style="text-align:center">æ²¡æœ‰å‰å¯¼é›¶çš„æœˆä»½æ—¥ã€‚</td>
<td style="text-align:center">'1' åˆ° '31'</td>
</tr>
<tr>
<td style="text-align:center">g</td>
<td style="text-align:center">å°æ—¶ï¼Œ12å°æ—¶æ ¼å¼ï¼Œä¸å«å‰å¯¼é›¶ã€‚</td>
<td style="text-align:center">'1' åˆ° '12'</td>
</tr>
<tr>
<td style="text-align:center">h</td>
<td style="text-align:center">å°æ—¶ï¼Œ12å°æ—¶æ ¼å¼ã€‚</td>
<td style="text-align:center">'01' åˆ° '12'</td>
</tr>
<tr>
<td style="text-align:center">G</td>
<td style="text-align:center">å°æ—¶ï¼Œ24å°æ—¶æ ¼å¼ï¼Œæ— å‰å¯¼é›¶ã€‚</td>
<td style="text-align:center">'0' åˆ° '23'</td>
</tr>
<tr>
<td style="text-align:center">H</td>
<td style="text-align:center">å°æ—¶ï¼Œ24å°æ—¶æ ¼å¼ã€‚</td>
<td style="text-align:center">'00' åˆ° '23'</td>
</tr>
<tr>
<td style="text-align:center">i</td>
<td style="text-align:center">åˆ†é’Ÿã€‚</td>
<td style="text-align:center">'00' åˆ° '59'</td>
</tr>
<tr>
<td style="text-align:center">s</td>
<td style="text-align:center">ç§’ï¼Œå¸¦å‰å¯¼é›¶çš„2ä½æ•°ã€‚</td>
<td style="text-align:center">'00' åˆ° '59'</td>
</tr>
</tbody>
</table>
</li>
</ul>
<p><code>front/views.py</code></p>
<pre><code>from django.shortcuts import render
from datetime import datetime


def index(request):
    context = {
        &quot;today&quot;: datetime.now()
    }
    return render(request, 'index.html', context=context)
</code></pre>
<p><code>templates/index.html</code></p>
<pre><code>{# 2018/12/09 #}
{{ today|date:&quot;Y/m/d&quot; }}
</code></pre>
<h2 id="default"><code>default</code></h2>
<p><code>front/views.py</code></p>
<pre><code>from django.shortcuts import render


def index(request):
    context = {
        'list': [],
        'dict': {},
        'str': '',
        'none': None,
        'number': 0,
    }
    return render(request, 'index.html', context=context)
</code></pre>
<p><code>templates/index.html</code></p>
<pre><code>{# ç©ºåˆ—è¡¨ #}
{{ list|default:'ç©ºåˆ—è¡¨' }}
{#ç©ºå­—å…¸#}
{{ dict|default:'ç©ºå­—å…¸' }}
{#ç©ºå­—ç¬¦ä¸²#}
{{ str|default:'ç©ºå­—ç¬¦ä¸²' }}
{#æ•°å­—0#}
{{ number|default:'æ•°å­—0' }}
{#None#}
{{ none|default:'None' }}
</code></pre>
<h2 id="default-if-none"><code>default-if-none</code></h2>
<p><strong>åªæœ‰å€¼ä¸º<code>None</code>æ‰ä¼šèµ·ä½œç”¨</strong></p>
<p><code>templates/index.html</code></p>
<pre><code>{#[]#}
{{ list|default_if_none:'ç©ºå­—å…¸' }}
{{ str|default_if_none:'ç©ºå­—ç¬¦ä¸²' }}
{#0#}
{{ number|default_if_none:'æ•°å­—0' }}
{#None#}
{{ none|default_if_none:'None' }}
</code></pre>
<h2 id="first"><code>first</code></h2>
<p><strong>è¿”å›åˆ—è¡¨æˆ–å…ƒç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ </strong></p>
<p><code>front/views.py</code></p>
<pre><code>from django.shortcuts import render


def index(request):
    context = {
        'student': ['å¨éœ‡å¤©', 'æ“å¤©æŸ±']
    }
    return render(request, 'index.html', context=context)
</code></pre>
<p><code>templates/index.html</code></p>
<pre><code>{# å¨éœ‡å¤© #}
{{ student|first }}
</code></pre>
<h2 id="last"><code>last</code></h2>
<p><strong>è¿”å›åˆ—è¡¨æˆ–å…ƒç»„ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ </strong></p>
<p><code>templates/index.html</code></p>
<pre><code>{# æ“å¤©æŸ± #}
{{ student|last }}
</code></pre>
<h2 id="floatformat"><code>floatformat</code></h2>
<p><strong>å››èˆäº”å…¥æ ¼å¼åŒ–æµ®ç‚¹ç±»å‹</strong></p>
<ul>
<li>
<p>æ²¡æœ‰å‚æ•°æ˜¯ï¼Œé»˜è®¤ä¿ç•™ä¸€ä½å°æ•°ç‚¹</p>
</li>
<li>
<p>ä¼ é€’çš„å‚æ•°ä»£è¡¨å°æ•°ç‚¹çš„ä½æ•°</p>
</li>
</ul>
<p><code>templates/index.html</code></p>
<pre><code>{#3.1#}
{{ 3.141592654|floatformat }} &lt;br&gt;
{#3.14159 #}
{{ 3.141592654|floatformat:5 }} &lt;br&gt;
</code></pre>
<h2 id="join"><code>join</code></h2>
<p><strong>æŒ‡å®šåˆ†éš”ç¬¦æŠŠå…ƒç»„æˆ–è€…åˆ—è¡¨ï¼Œè½¬æ¢ä¸ºå­—ç¬¦ä¸²</strong></p>
<p><code>templates/index.html</code></p>
<pre><code>{#å¨éœ‡å¤©-æ“å¤©æŸ±#}
{{ student|join:'-' }}
</code></pre>
<h2 id="length"><code>length</code></h2>
<p><strong>è¿”å›å…ƒç»„ã€åˆ—è¡¨ã€å­—ç¬¦ä¸²çš„é•¿åº¦</strong><br>
<code>templates/index.html</code></p>
<pre><code>{#2#}
{{ student|length }}
</code></pre>
<h2 id="lower"><code>lower</code></h2>
<p><strong>å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå°å†™</strong><br>
<code>templates/index.html</code></p>
<pre><code>{#abc#}
{{ &quot;ABC&quot;|lower }}
</code></pre>
<h2 id="upper"><code>upper</code></h2>
<p><strong>å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¤§å†™</strong><br>
<code>templates/index.html</code></p>
<pre><code>{#ABC#}
{{ &quot;abc&quot;|upper }}
</code></pre>
<h2 id="random"><code>random</code></h2>
<p><strong>è¿”å›å…ƒç»„ã€åˆ—è¡¨ã€å­—ç¬¦ä¸²ä¸­éšæœºé€‰å–ä¸€ä¸ªå€¼</strong><br>
<code>templates/index.html</code></p>
<pre><code>{{ &quot;abc&quot;|random }}
</code></pre>
<h2 id="safe"><code>safe</code></h2>
<p><strong>æ ‡è®°ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å®‰å…¨çš„ï¼ŒåŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼Œä¹Ÿä¸ä¼šè¢«è½¬ä¹‰ï¼Œ ç±»ä¼¼å…³é—­<code>autoescape</code>æ ‡ç­¾çš„è‡ªåŠ¨è½¬ä¹‰</strong><br>
<code>templates/index.html</code></p>
<pre><code>{{ &quot;&lt;h1&gt;autoescape off&lt;/h1&gt;&quot;|safe }}
</code></pre>
<h2 id="slice"><code>slice</code></h2>
<p><strong>ç±»ä¼¼äº<code>python</code>çš„åˆ‡ç‰‡æ“ä½œ</strong></p>
<p><code>front/views.py</code></p>
<pre><code>def index(request):
    context = {
        'data': list(range(10))
    }
    return render(request, 'index.html', context=context)
</code></pre>
<p><code>templates/index.html</code></p>
<pre><code>{#[1, 3, 5, 7, 9]#}
{{ data|slice:&quot;1::2&quot;}}
</code></pre>
<h2 id="striptags"><code>striptags</code></h2>
<p><strong>å»é™¤å­—ç¬¦ä¸²ä¸­çš„ <code>HTML</code> æ ‡ç­¾</strong></p>
<p><code>templates/index.html</code></p>
<pre><code>{{ &quot;&lt;h1&gt;å»é™¤å­—ç¬¦ä¸²ä¸­çš„htmlæ ‡ç­¾&lt;/h1&gt;&quot;|striptags }}
</code></pre>
<h2 id="truncatechars"><code>truncatechars</code></h2>
<p><strong>æ˜¾ç¤ºæŒ‡å®šå­—ç¬¦é•¿åº¦ï¼Œè¶…å‡ºéƒ¨åˆ†æ˜¾ç¤º..., ä¸‰ä¸ªç‚¹ä¹Ÿçº³å…¥æŒ‡å®šå­—ç¬¦èŒƒå›´çš„é•¿åº¦</strong></p>
<p><code>templates/index.html</code></p>
<pre><code>{#æ˜¾ç¤º...#}
{{ &quot;æ˜¾ç¤ºæŒ‡å®šå­—ç¬¦é•¿åº¦ï¼Œè¶…å‡ºéƒ¨åˆ†æ˜¾ç¤º...&quot;|truncatechars:5 }}
</code></pre>
<h2 id="truncatechars_html"><code>truncatechars_html</code></h2>
<p><strong>ç±»ä¼¼ <code>truncatechars</code>, åªä¸è¿‡ä¸ä¼šåˆ‡å‰² <code>HTML</code> æ ‡ç­¾</strong><br>
<code>templates/index.html</code></p>
<pre><code>{{ &quot;&lt;h1&gt;æ˜¾ç¤ºæŒ‡å®šå­—ç¬¦é•¿åº¦ï¼Œè¶…å‡ºéƒ¨åˆ†æ˜¾ç¤º...&lt;/h1&gt;&quot;|truncatechars_html:5 }}
</code></pre>
<h2 id="å…¶å®ƒä¸å¸¸ç”¨è¿‡æ»¤å™¨">å…¶å®ƒä¸å¸¸ç”¨è¿‡æ»¤å™¨</h2>
<p><strong>å¯ä»¥åœ¨ <code>pycharm</code> ä¸­ï¼Œ æŸ¥çœ‹æºä»£ç </strong></p>
<pre><code>from django.template import defaultfilters, defaulttags
# defaultfilters æŸ¥çœ‹å†…ç½®è¿‡æ»¤å™¨
# defaulttags æŸ¥çœ‹å†…ç½®æ ‡ç­¾
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Django æ¨¡æ¿æ ‡ç­¾è¯¦è§£]]></title>
        <id>https://xiong-zh.github.io/post/Djangoæ¨¡æ¿æ ‡ç­¾è¯¦è§£</id>
        <link href="https://xiong-zh.github.io/post/Djangoæ¨¡æ¿æ ‡ç­¾è¯¦è§£">
        </link>
        <updated>2020-01-18T13:05:34.000Z</updated>
        <summary type="html"><![CDATA[<p>Django æ¨¡æ¿æ ‡ç­¾è¯¦è§£</p>
]]></summary>
        <content type="html"><![CDATA[<p>Django æ¨¡æ¿æ ‡ç­¾è¯¦è§£</p>
<!-- more -->
<h1 id="dtl-æ¨¡æ¿æ ‡ç­¾è¯¦è§£"><code>DTL</code> æ¨¡æ¿æ ‡ç­¾è¯¦è§£</h1>
<blockquote>
<p>æ¥ç€ä¸Šä¸€ç¯‡ <a href="https://zhb333.github.io/readme-blog/Python/Django/urls.html" title="urlsä¸è§†å›¾è¯¦è§£">urlsä¸è§†å›¾è¯¦è§£</a> ç»§ç»­å¾€ä¸‹è®²</p>
</blockquote>
<h2 id="ä¸€-æ¨¡æ¿æŸ¥æ‰¾è·¯å¾„">ä¸€ã€æ¨¡æ¿æŸ¥æ‰¾è·¯å¾„</h2>
<p><code>mysite/setting.py</code>ï¼š æ¨¡æ¿æŸ¥æ‰¾çš„ä¼˜å…ˆçº§æœ€é«˜ä¸ºå¦‚ä¸‹é…ç½®</p>
<pre><code>TEMPLATES = [
    {
        'DIRS': [os.path.join(BASE_DIR, 'templates')],
    },
]
</code></pre>
<p>å…¶æ¬¡æ˜¯ï¼Œåœ¨å„è‡ªçš„ <code>app</code> ä¸­ï¼Œ æ³¨æ„ï¼Œ éœ€è¦åœ¨ <code>INSTALLED_APPS</code> ä¸­æ³¨å†Œåæ‰èƒ½èµ·ä½œç”¨ï¼š</p>
<pre><code>INSTALLED_APPS = [
    'front',
]

TEMPLATES = [
    {
        'APP_DIRS': True,
    },
]
</code></pre>
<p>æœ€åå¦‚æœåœ¨å½“å‰ <code>app</code> ä¸­è¿˜æ‰¾ä¸åˆ°æ¨¡æ¿ï¼Œä¼šåˆ°å…¶å®ƒå·²å®‰è£…çš„ <code>app</code> ä¸­æŸ¥æ‰¾ï¼Œ å¦‚æœè¿˜æ‰¾ä¸åˆ°å°±ä¼šæŠ¥é”™äº†ï¼</p>
<h2 id="äºŒ-render_to_string">äºŒã€<code>render_to_string</code></h2>
<ul>
<li>
<p>åœ¨æ ¹ç›®å½•æ–°å»º <code>templates</code> æ–‡ä»¶å¤¹</p>
</li>
<li>
<p>åˆ›å»º <code>templates/index.html</code></p>
</li>
</ul>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;Title&lt;/title&gt;
    &lt;style&gt;
        body {
            color: #f00;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
ä½›æ›°ï¼š æˆ‘æ‰§ï¼Œ æ˜¯ç—›è‹¦çš„æ ¹æºï¼
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<ul>
<li>ä¿®æ”¹ <code>front/urls.py</code></li>
</ul>
<pre><code> path('', views.index, name='index'),
</code></pre>
<ul>
<li>ä¿®æ”¹ <code>front/views.py</code></li>
</ul>
<pre><code>from django.template.loader import render_to_string
from django.http import HttpResponse


def index(request):
    # åœ¨ mysite/settings.py é…ç½®äº†é¡¹ç›®æ¨¡æ¿è·¯å¾„
    html = render_to_string(&quot;index.html&quot;)
    return HttpResponse(html)
</code></pre>
<h2 id="ä¸‰-render">ä¸‰ã€<code>render</code></h2>
<blockquote>
<p><code>render_to_string</code> ä¸ <code>HttpResponse</code> ç»„åˆçš„å¿«æ·æ–¹å¼ï¼Œ å¯ <code>pycharm</code> æŸ¥çœ‹ <code>render</code> çš„å®ç°å¦‚ä¸‹ï¼š</p>
</blockquote>
<pre><code>def render(request, template_name, context=None, content_type=None, status=None, using=None):
    content = loader.render_to_string(template_name, context, request, using=using)
    return HttpResponse(content, content_type, status)
</code></pre>
<p>ä¿®æ”¹ <code>front/views.py</code></p>
<pre><code>from django.shortcuts import render


def index(request):
    return render(request, 'index.html')
</code></pre>
<h2 id="å››-æ¨¡æ¿å˜é‡">å››ã€æ¨¡æ¿å˜é‡</h2>
<blockquote>
<p>å¯ä»¥é€šè¿‡<code>render</code> å‡½æ•°çš„ <code>context</code> å‚æ•°ï¼Œç»™æ¨¡æ¿ä¼ é€’æ•°æ®</p>
</blockquote>
<p><strong>æ¨¡æ¿ä¸­ï¼Œä¸æ”¯æŒä¸­æ‹¬å·è¯­æ³•ï¼Œåªèƒ½é€šè¿‡ <code>.</code> è¯­æ³•è·å–</strong></p>
<ul>
<li>
<p>ä¼ é€’å­—ç¬¦ä¸²</p>
<p>ä¿®æ”¹ <code>front/views.py</code></p>
</li>
</ul>
<pre><code>def index(request):
    context = {'username': 'zhb333'}
    return render(request, 'index.html', context=context)
</code></pre>
<pre><code>ä¿®æ”¹ `templates/index.html`
</code></pre>
<pre><code>    &lt;body&gt;
    {{ username }}
    &lt;/body&gt;
</code></pre>
<pre><code>è®¿é—®ï¼š`http://localhost:8000/`, é¡µé¢æ˜¾ç¤ºï¼š **zhb333**
</code></pre>
<ul>
<li>
<p>ä¼ é€’ä¸€ä¸ªå¯¹è±¡</p>
<p>ä¿®æ”¹ <code>front/views.py</code></p>
</li>
</ul>
<pre><code>class Person:
   def __init__(self, username):
        self.username = username


   def index(request):
        context = {'person': Person('ç†æƒ³ä¸‰æ—¬')}
        return render(request, 'index.html', context=context)
</code></pre>
<pre><code>ä¿®æ”¹ `templates/index.html`
</code></pre>
<pre><code>  {{ person.username }}
</code></pre>
<ul>
<li>
<p>ä¼ é€’çš„æ•°æ®æ˜¯ä¸€ä¸ªå­—å…¸æ—¶ï¼Œ å­—å…¸ä¸­ä¸è¦å‡ºç°å…³é”®å­—ï¼Œè¿™æ ·ä¼šé€ æˆæ­§ä¹‰</p>
<p>ä¿®æ”¹ <code>front/views.py</code></p>
</li>
</ul>
<pre><code>    def index(request):
        context = {'person': {'username': 'æˆ‘è¦ä½ '}}
        return render(request, 'index.html', context=context)
</code></pre>
<pre><code>ä¿®æ”¹ `templates/index.html`  
</code></pre>
<pre><code>   {{ person.keys }}
</code></pre>
<pre><code>æµè§ˆå™¨æ˜¾ç¤ºï¼š **dict_keys(['username'])**  

ä¿®æ”¹ `front/views.py`
</code></pre>
<pre><code>def index(request):
     context = {'person': {'username': 'æˆ‘è¦ä½ ', 'keys': 'å¤œç©ºä¸­æœ€äº®çš„æ˜Ÿ'}}
     return render(request, 'index.html', context=context)
</code></pre>
<pre><code>æµè§ˆå™¨æ˜¾ç¤ºï¼š **å¤œç©ºä¸­æœ€äº®çš„æ˜Ÿ**
</code></pre>
<ul>
<li>
<p>ä¼ é€’åˆ—è¡¨æˆ–å…ƒç»„</p>
<p>ä¿®æ”¹ <code>front/views.py</code></p>
</li>
</ul>
<pre><code>   # context = {'persons': ['é‚£äº›èŠ±å„¿', 'å¥¹ä»¬éƒ½è€äº†å§', 'å¥¹ä»¬åœ¨å“ªé‡Œå‘€']}
   context = {'persons': ('é‚£äº›èŠ±å„¿', 'å¥¹ä»¬éƒ½è€äº†å§', 'å¥¹ä»¬åœ¨å“ªé‡Œå‘€')}
</code></pre>
<pre><code>ä¿®æ”¹ `templates/index.html`  
</code></pre>
<pre><code>   {{ persons.0 }} &lt;br&gt;
   {{ persons.1 }} &lt;br&gt;
   {{ persons.2 }} &lt;br&gt;
</code></pre>
<h2 id="äº”-å¸¸ç”¨çš„æ¨¡æ¿æ ‡ç­¾">äº” å¸¸ç”¨çš„æ¨¡æ¿æ ‡ç­¾</h2>
<p><strong>æ‰€æœ‰æ ‡ç­¾éƒ½éœ€è¦ç”¨ <code>{%%}</code> è¿›è¡ŒåŒ…è£¹</strong></p>
<ul>
<li><code>if</code> æ ‡ç­¾
<blockquote>
<p><code>if</code> æ ‡ç­¾ä¸­å¯ä»¥ä½¿ç”¨ï¼š <code>==</code>ã€<code>!=</code>ã€<code>&lt;</code>ã€<code>&lt;=</code>ã€<code>&gt;</code>ã€<code>&gt;=</code>ã€<code>in</code>ã€<code>not in</code>ã€<code>is</code>ã€<code>is not</code> ç­‰åˆ¤æ–­è¿ç®—ç¬¦</p>
</blockquote>
<ul>
<li>
<p><code>if...else</code> è¿ç®—ç¬¦ä¸¾ä¾‹</p>
<p>ä¿®æ”¹ <code>templates/index.html</code></p>
</li>
</ul>
</li>
</ul>
<pre><code>        {% if 'é‚£äº›èŠ±å„¿' in persons %}
            &lt;p style=&quot;color: hotpink&quot;&gt;å¯çˆ±çš„èŠ±å„¿&lt;/p&gt;
        {% else %}
            &lt;p style=&quot;color: darkgray&quot;&gt;å¯ä¼¶çš„èŠ±å„¿&lt;/p&gt;
        {% endif %}
</code></pre>
<pre><code>* `if...elif...else` ä¸¾ä¾‹
 ä¿®æ”¹ `templates/index.html`
</code></pre>
<pre><code>      {% if age &lt; 18 %}
            &lt;p&gt;ä¹³è‡­æœªå¹²çš„å°å­&lt;/p&gt;
      {% elif age == 18 %}
            &lt;p&gt;æ°é€¢å°‘å¹´æ—¶&lt;/p&gt;
      {% else %}
            &lt;p&gt;è€ç”·äºº&lt;/p&gt;
      {% endif %}
</code></pre>
<ul>
<li>
<p><code>for...in</code> å¾ªç¯åˆ—è¡¨</p>
<ul>
<li>
<p>å¾ªç¯åˆ—è¡¨</p>
<p>ä¿®æ”¹ <code>front/views.py</code></p>
</li>
</ul>
</li>
</ul>
<pre><code>    context = {
            'books': ['æ·±å…¥ç†è§£ES6', 'JavaScriptæƒå¨æŒ‡å—', 'JavaScriptè¯­è¨€ç²¾ç²¹']
         }
</code></pre>
<pre><code>    ä¿®æ”¹ `templates/index.html`  
</code></pre>
<pre><code>    &lt;ul&gt;
       {% for book in books %}
             &lt;li&gt;{{ book }}&lt;/li&gt;
       {% endfor %}
    &lt;/ul&gt;
</code></pre>
<pre><code>* åå‘å¾ªç¯åˆ—è¡¨  `reversed`

    ä¿®æ”¹ `templates/index.html`  
</code></pre>
<pre><code>     {% for book in books reversed %}
        &lt;li&gt;{{ book }}&lt;/li&gt;
     {% endfor %}
</code></pre>
<ul>
<li>
<p><code>for...in</code> å¾ªç¯ä¸­ï¼Œ <code>DTL</code> æä¾›äº†ä¸€äº›å¯ç”¨çš„æ¨¡æ¿å˜é‡ï¼š</p>
<ul>
<li>
<p>åˆ—è¡¨çš„ä¸‹æ ‡ <code>forloop.counter</code> ä» <code>1</code> å¼€å§‹</p>
<p>ä¿®æ”¹ <code>templates/index.html</code></p>
</li>
</ul>
</li>
</ul>
<pre><code>   {% for book in books %}
      &lt;li&gt;{{ forloop.counter }} -- {{ book }}&lt;/li&gt;
   {% endfor %}
</code></pre>
<pre><code>* åˆ—è¡¨çš„ä¸‹æ ‡ `forloop.counter0` ä» `0` å¼€å§‹

    ä¿®æ”¹ `templates/index.html`  
</code></pre>
<pre><code>        {% for book in books %}
            &lt;li&gt;{{ forloop.counter0 }} -- {{ book }}&lt;/li&gt;
        {% endfor %}
</code></pre>
<pre><code>* åˆ—è¡¨çš„åå‘ä¸‹æ ‡ `forloop.revcounter` ä» `1` å¼€å§‹
</code></pre>
<pre><code>        {% for book in books reversed %}
            &lt;li&gt;{{ forloop.revcounter }} -- {{ book }}&lt;/li&gt;
        {% endfor %}
</code></pre>
<pre><code>* åˆ—è¡¨çš„åå‘ä¸‹æ ‡ `forloop.revcounter0` ä» `0` å¼€å§‹
</code></pre>
<pre><code>        {% for book in books reversed %}
            &lt;li&gt;{{ forloop.revcounter0 }} -- {{ book }}&lt;/li&gt;
        {% endfor %}
</code></pre>
<pre><code>* æ˜¯å¦æ˜¯ç¬¬ä¸€æ¬¡éå† `forloop.first`
</code></pre>
<pre><code>        {% for book in books %}
            {% if forloop.first %}
                &lt;li style=&quot;color: green;&quot;&gt;{{ forloop.revcounter0 }} -- {{ book }}&lt;/li&gt;
            {% else %}
                &lt;li style=&quot;color: red;&quot;&gt;{{ forloop.revcounter0 }} -- {{ book }}&lt;/li&gt;
            {% endif %}
        {% endfor %}
</code></pre>
<pre><code>* æ˜¯å¦æ˜¯æœ€åä¸€æ¬¡æ¬¡éå† `forloop.last`
</code></pre>
<pre><code>        {% for book in books %}
            {% if forloop.last %}
                &lt;li style=&quot;color: green;&quot;&gt;{{ forloop.revcounter0 }} -- {{ book }}&lt;/li&gt;
            {% else %}
                &lt;li style=&quot;color: red;&quot;&gt;{{ forloop.revcounter0 }} -- {{ book }}&lt;/li&gt;
            {% endif %}
        {% endfor %}
</code></pre>
<pre><code>* è°ƒç”¨ä¸Šä¸€çº§å¾ªç¯çš„ `forloop` æ¨¡æ¿å˜é‡  `forloop.parentloop`  
    ä¿®æ”¹ `front/views.py` 
</code></pre>
<pre><code>    context = {
      'family': [{'father': 'å¤§å¤´çˆ¸çˆ¸', 'children': ['å°å¤´å­©å„¿', 'å°å¤´å¥³å„¿']}]
      }
</code></pre>
<pre><code>     ä¿®æ”¹ `templates/index.html`  
</code></pre>
<pre><code>        {% for who in family %}
            &lt;p&gt;this is &lt;strong style=&quot;color: green&quot;&gt;{{ who.father }}&lt;/strong&gt;&lt;/p&gt;
            {% for child in who.children %}
                &lt;p&gt;{{ child }}&lt;/p&gt;
                &lt;p&gt;{{ forloop.parentloop.first }}&lt;/p&gt;
                &lt;p&gt;{{ forloop.parentloop.last }}&lt;/p&gt;
                &lt;p&gt;{{ forloop.parentloop.counter }}&lt;/p&gt;
                &lt;p&gt;{{ forloop.parentloop.revcounter }}&lt;/p&gt;
            {% endfor %}
        {% endfor %}
</code></pre>
<ul>
<li>
<p><code>for...in</code> å¾ªç¯å­—å…¸</p>
<ul>
<li>å¾ªç¯å­—å…¸ <code>keys</code><br>
ä¿®æ”¹ <code>front/views.py</code></li>
</ul>
</li>
</ul>
<pre><code>           context = {'student': {
                'name': 'é“æ˜å¯º',
                'girl': 'æ‰èœ',
                'age': '18',
            }}
</code></pre>
<pre><code>    ä¿®æ”¹ `templates/index.html`  

    ```
    &lt;ul&gt;
        {% for key in student.keys %}
            &lt;li&gt;{{ key }}&lt;/li&gt;
        {% endfor %}
    &lt;/ul&gt;
    ```      
    
* å¾ªç¯å­—å…¸ `values`    

    ä¿®æ”¹ `templates/index.html`  

    ```
    {% for value in student.values %}
        &lt;li&gt;{{ value }}&lt;/li&gt;
    {% endfor %}
    ```   

* å¾ªç¯å­—å…¸ `items`    

    ä¿®æ”¹ `templates/index.html`  

    ```
    {% for key,value in student.items %}
        &lt;li&gt;{{ key }}--{{ value }}&lt;/li&gt;
    {% endfor %}
    ```   
</code></pre>
<ul>
<li>
<p><code>for...in...empty...</code></p>
<p>ä¿®æ”¹ <code>front/views.py</code></p>
</li>
</ul>
<pre><code>    context = {
    'comments': []
    }
</code></pre>
<pre><code>ä¿®æ”¹ `templates/index.html`  
</code></pre>
<pre><code>    {% for comment in comments %}
        {{ comment }}
    {% empty %}
        è¿˜æ²¡æœ‰ä»»ä½•è¯„è®º
    {% endfor %}
</code></pre>
<ul>
<li>
<p><code>with</code> æ ‡ç­¾ ï¼ˆåœ¨æ¨¡æ¿ä¸­å®šä¹‰å˜é‡ï¼‰</p>
<p><strong>é€šè¿‡ <code>with</code> æ ‡ç­¾å®šä¹‰çš„å˜é‡åªèƒ½åœ¨ï¼Œ åªèƒ½åœ¨ <code>with</code> æ ‡ç­¾åŒ…è£¹çš„è¯­å¥å—ä¸­ä½¿ç”¨</strong></p>
<p>ä¿®æ”¹ <code>front/views.py</code></p>
</li>
</ul>
<pre><code>    context = {
        'students': ['å­™æ‚Ÿç©º', 'çŒªå…«æˆ’', 'æ²™å’Œå°š']
    }
</code></pre>
<pre><code>ä¿®æ”¹ `templates/index.html`  
</code></pre>
<pre><code>    {% with students.0 as monkey %}
        {{ monkey }}
    {% endwith %}

    {% with pig=students.1 %}
        {{ pig }}
    {% endwith %}
</code></pre>
<ul>
<li>
<p><code>url</code> æ ‡ç­¾</p>
<p><strong>é€šè¿‡ <code>url</code> æ ‡ç­¾ å¯ä»¥æŠŠ <code>urls.py</code> ä¸­ï¼Œ å¯¹åº”çš„ <code>path</code> æˆ– <code>re_path</code> çš„å‘½åï¼Œè½¬æ¢åŒ–ä¸ºæµè§ˆå™¨å¯è¯†åˆ«çš„é“¾æ¥</strong></p>
<p>ä¿®æ”¹ <code>front/urls.py</code></p>
</li>
</ul>
<pre><code>    from django.urls import path
    from . import views

    app_name = 'front'

    urlpatterns = [
        path('', views.index, name='index'),
        path('book/&lt;book_id&gt;/', views.book, name='book'),
        path('movie/', views.movie, name='movie'),
        path('story/&lt;story_id&gt;/&lt;category&gt;/', views.story, name='story'),
    ]
</code></pre>
<pre><code>ä¿®æ”¹ `front/views.py`
</code></pre>
<pre><code>    from django.http import HttpResponse
    from django.template.loader import render_to_string


    def index(request):
        return HttpResponse(render_to_string('index.html'))


    def book(request, book_id):
        return HttpResponse('ä¹¦ç±, %s' % book_id)


    def movie(request):
        movie_id = request.GET.get('movie_id')
        return HttpResponse('ç”µå½±, %s' % movie_id)


    def story(request, story_id, category):
        _type = request.GET.get('type')
        return HttpResponse('æ•…äº‹id: %s, åˆ†ç±»ï¼š %s, ç±»å‹ï¼š %s' % (story_id, category, _type))
</code></pre>
<pre><code>ä¿®æ”¹ `templates/index.html`  
</code></pre>
<pre><code>    &lt;p&gt;&lt;a href=&quot;{% url 'front:index' %}&quot;&gt;é¦–é¡µ&lt;/a&gt;&lt;/p&gt;
    &lt;p&gt;&lt;a href=&quot;{% url 'front:book' book_id=1 %}&quot;&gt;ä¹¦ç±&lt;/a&gt;&lt;/p&gt;
    &lt;p&gt;&lt;a href=&quot;{% url 'front:movie' %}?movie_id=2&quot;&gt;ç”µå½±&lt;/a&gt;&lt;/p&gt;
    &lt;p&gt;&lt;a href=&quot;{% url 'front:story' story_id=3 category='å†’é™©' %}?type=æœªçŸ¥&quot;&gt;æ•…äº‹&lt;/a&gt;&lt;/p&gt;
</code></pre>
<ul>
<li>
<p><code>spaceless</code> æ ‡ç­¾ ï¼ˆå»é™¤htmlä»£ç ä¸­çš„ç©ºç™½å­—ç¬¦ï¼‰</p>
<p><strong>ä¸‹é¢çš„ <code>html</code> æ¨¡æ¿ä»£ç å­˜åœ¨å¾ˆå¤šç©ºç™½å­—ç¬¦ï¼Œå¯ä»¥é€šè¿‡ <code>spaceless</code> æ ‡ç­¾å»é™¤</strong></p>
</li>
</ul>
<pre><code>    {% spaceless %}
        &lt;ul&gt;
            &lt;li&gt;
                &lt;a href=&quot;https://www.baidu.com&quot;&gt;
                    ç™¾åº¦
                &lt;/a&gt;
            &lt;/li&gt;
        &lt;/ul&gt;
    {% endspaceless %}
</code></pre>
<ul>
<li>
<p><code>autoescape</code>æ ‡ç­¾ ï¼ˆé»˜è®¤å¼€å¯äº†ç‰¹æ®Šå­—ç¬¦è‡ªåŠ¨è½¬ä¹‰ï¼‰</p>
<p><strong>å¯ä»¥é€šè¿‡è®¾ç½® <code>autoescape</code> æ ‡ç­¾çš„è‡ªåŠ¨è½¬ä¹‰ ä¸º <code>off</code>, å…³é—­è‡ªåŠ¨è½¬ä¹‰</strong><br>
ä¿®æ”¹ <code>front/urls.py</code></p>
</li>
</ul>
<pre><code>    urlpatterns = [
        path('', views.index, name='index'),
    ]
</code></pre>
<pre><code>ä¿®æ”¹ `front/views.py`
</code></pre>
<pre><code>    from django.shortcuts import render


    def index(request):
        return render(request, 'index.html', context={'link': '&lt;p&gt;&lt;a href=&quot;http://www.baidu.com&quot;&gt;ç™¾åº¦&lt;/a&gt;&lt;/p&gt;'})
</code></pre>
<pre><code>ä¿®æ”¹ `templates/index.html`
</code></pre>
<pre><code>    &lt;body&gt;
    {{ link }}
    {% autoescape off %}
        {{ link }}
    {% endautoescape %}
    &lt;/body&gt;
</code></pre>
<ul>
<li><code>verbatim</code> æ ‡ç­¾<br>
<strong>å½“ä¸æƒ³è¦<code>DTL</code>ç¼–è¯‘ {{}} æˆ– {%%} æ—¶ï¼Œ å¯ä»¥é€šè¿‡ <code>verbatim</code> æ ‡ç­¾åŒ…è£¹</strong></li>
</ul>
<pre><code>    {% verbatim %}
        {{ å“ˆå“ˆ }}
        {% å‘µå‘µ %}
    {% endverbatim %}
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Django ORMå¸¸ç”¨Fieldè¯¦è§£]]></title>
        <id>https://xiong-zh.github.io/post/Django-ORMå¸¸ç”¨Fieldè¯¦è§£</id>
        <link href="https://xiong-zh.github.io/post/Django-ORMå¸¸ç”¨Fieldè¯¦è§£">
        </link>
        <updated>2020-01-18T13:04:14.000Z</updated>
        <summary type="html"><![CDATA[<p>Django ORMå¸¸ç”¨Fieldè¯¦è§£</p>
]]></summary>
        <content type="html"><![CDATA[<p>Django ORMå¸¸ç”¨Fieldè¯¦è§£</p>
<!-- more -->
<h2 id="ä¸€-å¸¸ç”¨çš„field">ä¸€ã€å¸¸ç”¨çš„<code>Field</code></h2>
<p><code>book/models.py</code></p>
<pre><code>class Fields(models.Model):

    # æ˜ å°„åˆ°æ•°æ®åº“ä¸­æ˜¯intç±»å‹ï¼Œå¯ä»¥æœ‰è‡ªåŠ¨å¢é•¿çš„ç‰¹æ€§ã€‚ä¸€èˆ¬ä¸éœ€è¦ä½¿ç”¨è¿™ä¸ªç±»å‹ï¼Œå¦‚æœä¸æŒ‡å®šä¸»é”®ï¼Œé‚£ä¹ˆæ¨¡å‹ä¼šè‡ªåŠ¨çš„ç”Ÿæˆä¸€ä¸ªå«åšidçš„è‡ªåŠ¨å¢é•¿çš„ä¸»é”®ã€‚
    # auto_id = models.AutoField()

    # 64ä½çš„æ•´å½¢ï¼Œç±»ä¼¼äºAutoFieldï¼Œåªä¸è¿‡æ˜¯äº§ç”Ÿçš„æ•°æ®çš„èŒƒå›´æ˜¯ä»1-9223372036854775807
    id = models.BigAutoField(primary_key=True)

    # åœ¨æ¨¡å‹å±‚é¢æ¥æ”¶çš„æ˜¯True / Falseã€‚åœ¨æ•°æ®åº“å±‚é¢æ˜¯tinyintç±»å‹ å­˜å‚¨çš„æ˜¯ 0/1ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šé»˜è®¤å€¼ï¼Œé»˜è®¤å€¼æ˜¯Noneã€‚
    removed = models.BooleanField()

    # åœ¨æ•°æ®åº“å±‚é¢æ˜¯varcharç±»å‹ã€‚åœ¨Pythonå±‚é¢å°±æ˜¯æ™®é€šçš„å­—ç¬¦ä¸²ã€‚è¿™ä¸ªç±»å‹åœ¨ä½¿ç”¨çš„æ—¶å€™å¿…é¡»è¦æŒ‡å®šæœ€å¤§çš„é•¿åº¦ï¼Œä¹Ÿå³å¿…é¡»è¦ä¼ é€’max_length
    title = models.CharField(max_length=100)

    # æ—¥æœŸç±»å‹ã€‚åœ¨Pythonä¸­æ˜¯datetime.dateç±»å‹ï¼Œå¯ä»¥è®°å½•å¹´æœˆæ—¥ã€‚åœ¨æ˜ å°„åˆ°æ•°æ®åº“ä¸­ä¹Ÿæ˜¯dateç±»å‹ã€‚ä½¿ç”¨è¿™ä¸ªFieldå¯ä»¥ä¼ é€’ä»¥ä¸‹å‡ ä¸ªå‚æ•°ï¼š
    #
    # auto_nowï¼šæœ€åä¸€æ¬¡ä¿®æ”¹æ—¶é—´ï¼Œå¯ä»¥å°†è¿™ä¸ªå±æ€§è®¾ç½®ä¸ºTrueã€‚
    # auto_now_addï¼šæ–°å¢æ—¶é—´ï¼Œå¯ä»¥å°†è¿™ä¸ªå±æ€§è®¾ç½®ä¸ºTrueã€‚
    birth = models.DateField(auto_now_add=True)

    # æ—¥æœŸæ—¶é—´ç±»å‹ï¼Œç±»ä¼¼äºDateFieldã€‚ä¸ä»…ä»…å¯ä»¥å­˜å‚¨æ—¥æœŸï¼Œè¿˜å¯ä»¥å­˜å‚¨æ—¶é—´ã€‚æ˜ å°„åˆ°æ•°æ®åº“ä¸­æ˜¯datetimeç±»å‹ã€‚è¿™ä¸ªFieldä¹Ÿå¯ä»¥ä½¿ç”¨auto_nowå’Œauto_now_addä¸¤ä¸ªå±æ€§ã€‚
    created_time = models.DateTimeField(auto_now_add=True)

    # æ—¶é—´ç±»å‹ã€‚åœ¨æ•°æ®åº“ä¸­æ˜¯timeç±»å‹ã€‚åœ¨Pythonä¸­æ˜¯datetime.timeç±»å‹ã€‚
    lunch_time = models.TimeField()

    # ç±»ä¼¼äºCharFieldã€‚åœ¨æ•°æ®åº“åº•å±‚ä¹Ÿæ˜¯ä¸€ä¸ªvarcharç±»å‹ã€‚æœ€å¤§é•¿åº¦æ˜¯254ä¸ªå­—ç¬¦ã€‚å¹¶ä¸éªŒè¯é‚®ç®±æ ¼å¼ï¼Œé…åˆ ModelForm ä½¿ç”¨æ—¶ï¼Œæ‰ä¼šä¸è¿›è¡Œé‚®ç®±æ ¼å¼éªŒè¯
    email = models.EmailField()

    # ç”¨æ¥å­˜å‚¨æ–‡ä»¶çš„ã€‚è¿™ä¸ªè¯·å‚è€ƒåé¢çš„æ–‡ä»¶ä¸Šä¼ ç« èŠ‚éƒ¨åˆ†ã€‚
    # file = models.FileField()

    # ç”¨æ¥å­˜å‚¨å›¾ç‰‡æ–‡ä»¶çš„ã€‚è¿™ä¸ªè¯·å‚è€ƒåé¢çš„å›¾ç‰‡ä¸Šä¼ ç« èŠ‚éƒ¨åˆ†ã€‚
    # image = models.ImageField()

    # æµ®ç‚¹ç±»å‹ã€‚æ˜ å°„åˆ°æ•°æ®åº“ä¸­æ˜¯doubleç±»å‹ã€‚
    price = models.FloatField()

    # æ•´å½¢ã€‚å€¼çš„åŒºé—´æ˜¯-2147483648â€”â€”2147483647
    age = models.IntegerField()

    # å¤§æ•´å½¢ã€‚å€¼çš„åŒºé—´æ˜¯-9223372036854775808â€”â€”9223372036854775807ã€‚
    total = models.BigIntegerField()

    # æ­£æ•´å½¢ã€‚å€¼çš„åŒºé—´æ˜¯0â€”â€”2147483647ã€‚
    money = models.PositiveIntegerField()

    # å°æ•´å½¢ã€‚å€¼çš„åŒºé—´æ˜¯-32768â€”â€”32767ã€‚
    apple = models.SmallIntegerField()

    # å°æ•´å½¢ã€‚å€¼çš„åŒºé—´æ˜¯-32768â€”â€”32767ã€‚
    pear = models.PositiveSmallIntegerField()

    # å°æ•´å½¢ã€‚å€¼çš„åŒºé—´æ˜¯-32768â€”â€”32767ã€‚
    content = models.TextField()

    # åªèƒ½å­˜å‚¨uuidæ ¼å¼çš„å­—ç¬¦ä¸²ã€‚uuidæ˜¯ä¸€ä¸ª32ä½çš„å…¨çƒå”¯ä¸€çš„å­—ç¬¦ä¸²ï¼Œä¸€èˆ¬ç”¨æ¥ä½œä¸ºä¸»é”®ã€‚
    uuid = models.UUIDField()

    # ç±»ä¼¼äºCharFieldï¼Œåªä¸è¿‡åªèƒ½ç”¨æ¥å­˜å‚¨urlæ ¼å¼çš„å­—ç¬¦ä¸²ã€‚å¹¶ä¸”é»˜è®¤çš„max_lengthæ˜¯200ã€‚
    url = models.URLField()
</code></pre>
<h2 id="äºŒ-æ³¨æ„äº‹é¡¹">äºŒã€æ³¨æ„äº‹é¡¹ï¼š</h2>
<ul>
<li>å·²ç»å°†æ¨¡å‹æ˜ å°„åˆ°æ•°æ®åº“åï¼Œä¿®æ”¹æˆ–æ–°å¢è¡¨å­—æ®µï¼Œå¦‚æœæ²¡æœ‰æä¾›é»˜è®¤å€¼ï¼Œåœ¨ç”Ÿæˆè¿ç§»æ–‡ä»¶æ—¶ï¼Œä¼šæä¾›ä¸¤ä¸ªé€‰é¡¹ï¼Œè®©ä½ æ·»åŠ é»˜è®¤å€¼</li>
</ul>
<pre><code>  (myenv) E:\code\PythonEnvs\myenv\book_manager&gt;python manage.py makemigrations
  You are trying to add a non-nullable field 'age' to fields without a default; we can't do that (the database nee
  ds something to populate existing rows).
  Please select a fix:
  1) Provide a one-off default now (will be set on all existing rows with a null value for this column)
  2) Quit, and let me add a default in models.py
</code></pre>
<ul>
<li>
<p>ä½¿ç”¨ <code>DateField</code>ã€ <code>DateTimeField</code> çš„è‡ªåŠ¨æ·»åŠ æ—¶é—´å‚æ•° <code>auto_now_add</code> æˆ– <code>auto_now</code>ï¼Œ æ·»åŠ åˆ°æ•°æ®åº“ä½¿ç”¨çš„æ˜¯ <code>django.utils.timezone.now()</code> , è¿™æ˜¯ä¸€ä¸ª  <code>UTC</code> æ—¶é—´ï¼Œ ä¸ºäº†åœ¨æ¨¡æ¿ä¸­æ­£ç¡®æ˜¾ç¤ºå½“å‰æ—¶åŒºçš„æ—¶é—´ï¼Œéœ€è¦é…ç½®æ­£ç¡®æ—¶åŒº</p>
<p><code>book_manager/settings.py</code></p>
</li>
</ul>
<pre><code>  TIME_ZONE = 'Asia/Shanghai'
</code></pre>
<hr>
<p><code>book_manager/urls.py</code></p>
<pre><code>  from django.urls import path, include

  urlpatterns = [
      path('', include('book.urls')),
  ]
</code></pre>
<hr>
<p><code>book/urls.py</code></p>
<pre><code>  from django.urls import path
  from . import views

  app_name = 'book'

  urlpatterns = [
      path('', views.index, name='index')
  ]
</code></pre>
<hr>
<p><code>book/models.py</code></p>
<pre><code>  class Book(models.Model):
      id = models.AutoField(primary_key=True)
      title = models.CharField(max_length=100, null=False)
      author = models.CharField(max_length=100, null=False)
      price = models.FloatField(default=0)
      create_time = models.DateTimeField(auto_now_add=True)
</code></pre>
<hr>
<p><code>book/views.py</code></p>
<pre><code>  from django.shortcuts import render
  from . import models

  def index(request):
      book = models.Book(title='ç²¾é€šES6', author='zhb333', price=333)
      book.save()
      obj = models.Book.objects.get(pk=1)
      # UTC æ—¶é—´
      return render(request, 'book/index.html', context={'create_time': obj.create_time})
</code></pre>
<hr>
<p><code>book/templates/book/index.html</code></p>
<pre><code>  {#æ­£ç¡®é…ç½®æ—¶åŒºï¼Œå³ä¾¿å­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„æ—¶é—´æ˜¯UTCæ—¶é—´ï¼Œæ¨¡æ¿ä¸­ä¹Ÿä¼šæ­£ç¡®æ˜¾ç¤ºé…ç½®çš„æ—¶åŒºæ‰€å¯¹åº”çš„æ—¶é—´#}
  {{ create_time }}
</code></pre>
<h2 id="ä¸‰-å…¶å®ƒä¸å¸¸ç”¨çš„-field">ä¸‰ã€å…¶å®ƒä¸å¸¸ç”¨çš„ <code>Field</code></h2>
<p><strong>å¯ä»¥åœ¨ <code>pycharm</code> ä¸­æŒ‰<code>ctrl</code> å¹¶ç‚¹å‡»ä»»ä¸€ä¸ª <code>Field</code>è¿›å…¥æ‰€æœ‰<code>Field</code>çš„å®šä¹‰æ–‡ä»¶æŸ¥çœ‹</strong></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Djangoåˆ›å»ºå’Œæ˜ å°„ORMæ¨¡å‹åˆ°æ•°æ®åº“]]></title>
        <id>https://xiong-zh.github.io/post/Djangoåˆ›å»ºå’Œæ˜ å°„ORMæ¨¡å‹åˆ°æ•°æ®åº“</id>
        <link href="https://xiong-zh.github.io/post/Djangoåˆ›å»ºå’Œæ˜ å°„ORMæ¨¡å‹åˆ°æ•°æ®åº“">
        </link>
        <updated>2020-01-18T13:03:08.000Z</updated>
        <summary type="html"><![CDATA[<p>Djangoåˆ›å»ºå’Œæ˜ å°„ORMæ¨¡å‹åˆ°æ•°æ®åº“</p>
]]></summary>
        <content type="html"><![CDATA[<p>Djangoåˆ›å»ºå’Œæ˜ å°„ORMæ¨¡å‹åˆ°æ•°æ®åº“</p>
<!-- more -->
<h2 id="1-æ–°å»ºåº”ç”¨-book">1ã€æ–°å»ºåº”ç”¨ <code>book</code></h2>
<pre><code>python manage.py startapp book
</code></pre>
<h2 id="2-é…ç½®-book-ä¸ºå·²å®‰è£…åº”ç”¨">2ã€é…ç½® <code>book</code> ä¸ºå·²å®‰è£…åº”ç”¨</h2>
<p><code>book_manager/settings.py</code></p>
<pre><code>INSTALLED_APPS = [
    'book',
]
</code></pre>
<h2 id="3-åˆ›å»ºæ¨¡å‹">3ã€åˆ›å»ºæ¨¡å‹</h2>
<p><code>book/models.py</code></p>
<pre><code>from django.db import models
# Create your models here.

class Book(models.Model):
    id = models.AutoField(primary_key=True)
    title = models.CharField(max_length=100, null=False)
    author = models.CharField(max_length=100, null=False)
    price = models.FloatField(default=0)
</code></pre>
<h2 id="4-ç”Ÿæˆæ•°æ®åº“è¿ç§»æ–‡ä»¶">4ã€ç”Ÿæˆæ•°æ®åº“è¿ç§»æ–‡ä»¶</h2>
<pre><code>python manage.py makemigrations
</code></pre>
<h2 id="5-å°†å·²å®‰è£…çš„åº”ç”¨çš„è¿ç§»æ–‡ä»¶æ˜ å°„åˆ°æ•°æ®åº“">5ã€å°†å·²å®‰è£…çš„åº”ç”¨çš„è¿ç§»æ–‡ä»¶æ˜ å°„åˆ°æ•°æ®åº“</h2>
<pre><code>python manage.py migrate
</code></pre>
<p><strong>æ³¨æ„ï¼š</strong></p>
<ol>
<li>
<p>å¦‚æœåœ¨æ¨¡å‹ä¸­ä¸æŒ‡å®šè¡¨åï¼Œé»˜è®¤æ˜¯ä»¥ åº”ç”¨å_æ¨¡å‹åï¼ˆå°å†™ï¼‰å¦‚ï¼š<code>book_book</code> ä½œä¸ºè¡¨å</p>
</li>
<li>
<p>æ¨¡å‹ä¸­é»˜è®¤ä»¥ <code>id</code> ä½œä¸ºä¸»é”®ï¼Œå› æ­¤åœ¨æ¨¡å‹ä¸­å¯ä»¥çœç•¥ä¸»é”®çš„å®šä¹‰å³ï¼š</p>
<p><code>book/models.py</code></p>
</li>
</ol>
<pre><code>    class Book(models.Model):
        title = models.CharField(max_length=100, null=False)
        author = models.CharField(max_length=100, null=False)
        price = models.FloatField(default=0)
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Djangoæ“ä½œæ•°æ®åº“åŸç”ŸSQLåˆä½“éªŒ]]></title>
        <id>https://xiong-zh.github.io/post/Djangoæ“ä½œæ•°æ®åº“åŸç”ŸSQLåˆä½“éªŒ</id>
        <link href="https://xiong-zh.github.io/post/Djangoæ“ä½œæ•°æ®åº“åŸç”ŸSQLåˆä½“éªŒ">
        </link>
        <updated>2020-01-18T13:00:51.000Z</updated>
        <summary type="html"><![CDATA[<p>Django - Django æ“ä½œæ•°æ®åº“-åŸç”ŸSQLåˆä½“éªŒ</p>
]]></summary>
        <content type="html"><![CDATA[<p>Django - Django æ“ä½œæ•°æ®åº“-åŸç”ŸSQLåˆä½“éªŒ</p>
<!-- more -->
<h2 id="ä¸€-å®‰è£…-mysqlclient">ä¸€ã€å®‰è£… <code>mysqlclient</code></h2>
<pre><code>pip install mysqlclient
</code></pre>
<h2 id="äºŒ-é…ç½®è¿æ¥æ•°æ®åº“">äºŒã€ é…ç½®è¿æ¥æ•°æ®åº“</h2>
<p><code>mysite/settings.py</code></p>
<pre><code>DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql',
        # æ•°æ®åº“å
        'NAME': 'django_db1',
        'USER': 'root',
        'PASSWORD': '123456',
        'HOST': '127.0.0.1',
        'PORT': '3306',
    }
}
</code></pre>
<h2 id="ä¸‰-ä½¿ç”¨åŸç”Ÿ-sql-æ“ä½œæ•°æ®åº“">ä¸‰ã€ä½¿ç”¨åŸç”Ÿ <code>sql</code> æ“ä½œæ•°æ®åº“</h2>
<ul>
<li>
<p>ä½¿ç”¨ <code>navicat</code> æ–°å»ºæ•°æ®åº“ <code>django_db1</code></p>
</li>
<li>
<p>åœ¨æ•°æ®åº“ <code>django_db1</code> æ–°å»ºè¡¨ <code>book</code></p>
</li>
<li>
<p>æ–°å¢æ•°æ®ï¼š</p>
<p><code>front/views.py</code></p>
</li>
</ul>
<pre><code>from django.shortcuts import render
from django.db import connection
def index(request):
      cursor = connection.cursor()
      cursor.execute(&quot;insert into book(title,author) values('æ·±å…¥ç†è§£ES6', 'å°¼å¤æ‹‰æ–¯')&quot;)
      return render(request, 'front/index.html')
</code></pre>
<ul>
<li>
<p>æµè§ˆå™¨è®¿é—®ï¼š <code>localhost:8000</code>, ä¾¿ä¼šæ–°å¢ä¸€æ¡æ•°æ®</p>
</li>
<li>
<p>æŸ¥è¯¢æ•°æ®</p>
<p><code>front/views.py</code></p>
</li>
</ul>
<pre><code>    def index(request):
    cursor = connection.cursor()
    cursor.execute(&quot;select * from book&quot;)
    # æŸ¥è¯¢ä¸€æ¡æ•°æ®
    # row = cursor.fetchone()
    # æŒ‡å®šæŸ¥è¯¢çš„æ¡æ•°
    # rows = cursor.fetchmany(2)
    # æŸ¥è¯¢æ‰€æœ‰æ•°æ®
    rows = cursor.fetchall()
    for row in rows:
        print(row)
    return render(request, 'front/index.html')
</code></pre>
<h2 id="å››-python-db-apiä¸‹-cursorå¯¹è±¡å¸¸ç”¨æ¥å£">å››ã€<code>Python DB API</code>ä¸‹ <code>cursor</code>å¯¹è±¡ï¼Œå¸¸ç”¨æ¥å£</h2>
<ul>
<li>
<p><code>description</code></p>
<p>æ‰§è¡Œ <code>cursor.execute</code>åï¼Œå¯é€šè¿‡ <code>cursor.description</code> æŸ¥çœ‹å­—æ®µä¿¡æ¯</p>
<p><code>front/views.py</code></p>
</li>
</ul>
<pre><code>    def index(request):
    cursor = connection.cursor()
    cursor.execute(&quot;select * from book&quot;)
    # (('id', 3, 1, 11, 11, 0, 0), ('title', 253, 15, 765, 765, 0, 0), ('author', 253, 12, 765, 765, 0, 0))
    print(cursor.description)
    rows = cursor.fetchall()
    for row in rows:
        print(row)
    return render(request, 'front/index.html')
</code></pre>
<ul>
<li>
<p><code>rowcount</code></p>
<p>æ‰§è¡Œ <code>sql</code> åˆ é™¤ï¼Œæ–°å¢ï¼Œä¿®æ”¹æ—¶ï¼Œè¿”å›å—å½±å“çš„æ¡æ•°ï¼Œ æŸ¥è¯¢æ—¶ï¼Œè¿”å›æŸ¥è¯¢æ•°æ®çš„æ¡æ•°</p>
<p><code>front/views.py</code></p>
</li>
</ul>
<pre><code>    def index(request):
    cursor = connection.cursor()
    cursor.execute(&quot;delete from book where id=2&quot;)
    # 1
    print(cursor.rowcount)
    return render(request, 'front/index.html')
</code></pre>
<ul>
<li>
<p><code>close</code></p>
<p>å…³é—­æ¸¸æ ‡</p>
</li>
</ul>
<pre><code>   cursor.close()
</code></pre>
<ul>
<li>
<p><code>execute</code></p>
<p>ç”¨äºæ‰§è¡Œ <code>sql</code> è¯­å¥ï¼Œ è¿˜å¯ä»¥ä¼ é€’å‚æ•°</p>
</li>
</ul>
<pre><code> cursor.execute('select * from book where id=%s', (1,))
</code></pre>
<ul>
<li><code>fetchone</code></li>
<li><code>fetchmany</code></li>
<li><code>fetchall</code></li>
</ul>
<pre><code>    # æŸ¥è¯¢ä¸€æ¡æ•°æ®
    row = cursor.fetchone()
    # æŒ‡å®šæŸ¥è¯¢çš„æ¡æ•°
    rows = cursor.fetchmany(2)
    # æŸ¥è¯¢æ‰€æœ‰æ•°æ®
    rows = cursor.fetchall()
</code></pre>
<h2 id="äº”-å›¾ä¹¦ç®¡ç†ç³»ç»Ÿæ¡ˆä¾‹">äº”ã€å›¾ä¹¦ç®¡ç†ç³»ç»Ÿæ¡ˆä¾‹</h2>
<ul>
<li>è¿›å…¥è™šæ‹Ÿç¯å¢ƒ</li>
</ul>
<pre><code>   workon myenv
</code></pre>
<ul>
<li>åˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®</li>
</ul>
<pre><code>    django-admin startproject book_manager
</code></pre>
<ul>
<li>åˆ›å»º <code>front</code> åº”ç”¨</li>
</ul>
<pre><code>    cd book_manager
    python manage.py startapp front
</code></pre>
<ul>
<li>é…ç½®å°† <code>front</code> åº”ç”¨ï¼Œæ³¨å†Œåˆ°å·²å®‰è£…åº”ç”¨<br>
<code>book_manager/setting.py</code></li>
</ul>
<pre><code>    INSTALLED_APPS = [
        'front',
    ]
</code></pre>
<hr>
<ol>
<li>
<p>ä½¿ç”¨ <code>Navicat</code> åˆ›å»ºæ•°æ®åº“ <code>book_manager</code></p>
</li>
<li>
<p>åˆ›å»ºè¡¨ <code>book</code>, ä¸‰ä¸ªå­—æ®µï¼š <code>id</code>ã€ <code>title</code>ã€ <code>author</code></p>
</li>
<li>
<p>é…ç½®æ•°æ®åº“è¿æ¥<br>
<code>book_manager/settings.py</code></p>
</li>
</ol>
<pre><code>    DATABASES = {
        'default': {
            'ENGINE': 'django.db.backends.mysql',
            # æ•°æ®åº“å
            'NAME': 'book_manager',
            'USER': 'root',
            'PASSWORD': '123456',
            'HOST': '127.0.0.1',
            'PORT': '3306',
        }
    }
</code></pre>
<ol start="4">
<li>
<p>é…ç½®è·¯ç”±</p>
<p><code>book_manager/urls.py</code></p>
</li>
</ol>
<pre><code>    from django.urls import path, include

    urlpatterns = [
        path('', include('front.urls')),
    ]
</code></pre>
<pre><code>`front/urls.py`
</code></pre>
<pre><code>    from django.urls import path
    from . import views

    app_name = 'front'

    urlpatterns = [
        path('', views.index, name='index'),
        path('create/', views.create_book, name='create'),
        path('detail/&lt;int:book_id&gt;', views.book_detail, name='detail'),
        path('delete/&lt;int:book_id&gt;', views.book_delete, name='delete'),
        path('edit/&lt;int:book_id&gt;', views.book_edit, name='edit'),
    ]
</code></pre>
<ol start="5">
<li>
<p>ç¼–å†™è§†å›¾å‡½æ•°</p>
<p><code>front/views.py</code></p>
</li>
</ol>
<pre><code>    from django.shortcuts import render, reverse, redirect
    from django.db import connection


    # è·å–æ“ä½œæ•°æ®åº“é”šç‚¹
    def get_cursor():
        return connection.cursor()

    # é¦–é¡µï¼Œå±•ç¤ºæ‰€æœ‰å›¾ä¹¦
    def index(request):
        cursor = get_cursor()
        cursor.execute('select * from book')
        keys = [item[0] for item in cursor.description]
        books = [dict(zip(keys, values)) for values in cursor.fetchall()]
        cursor.close()
        return render(request, 'front/index.html', context={&quot;books&quot;: books})

    # æ–°å¢å›¾ä¹¦
    def create_book(request):
        if request.method == 'POST':
            title = request.POST.get('title')
            author = request.POST.get('author')
            cursor = get_cursor()
            cursor.execute('insert into book(title, author) values(%s, %s)', (title, author))
            cursor.close()
            return redirect(reverse('front:index'))
        else:
            return render(request, 'front/create.html')

    # å›¾ä¹¦è¯¦æƒ…
    def book_detail(request, book_id):
        cursor = get_cursor()
        cursor.execute('select * from book where id=%s', (book_id,))
        keys = [item[0] for item in cursor.description]
        book = dict(zip(keys, cursor.fetchone()))
        cursor.close()
        return render(request, 'front/detail.html', context={&quot;book&quot;: book})

    # åˆ é™¤å›¾ä¹¦
    def book_delete(request, book_id):
        cursor = get_cursor()
        cursor.execute('delete from book where id=%s', (book_id,))
        cursor.close()
        return redirect(reverse('front:index'))

    # ç¼–è¾‘å›¾ä¹¦
    def book_edit(request, book_id):
        cursor = get_cursor()
        if request.method == 'GET':
            cursor.execute('select * from book where id=%s', (book_id,))
            keys = [item[0] for item in cursor.description]
            book = dict(zip(keys, cursor.fetchone()))
            cursor.close()
            return render(request, 'front/edit.html', context={&quot;book&quot;: book})
        else:
            title = request.POST.get('title')
            author = request.POST.get('author')
            cursor.execute('update book set title=%s, author=%s where id=%s', (title, author, book_id))
            cursor.close()
            return redirect(reverse('front:index'))
</code></pre>
<ol start="6">
<li>å°† <code>static</code> æ³¨å†Œä¸ºæ¨¡æ¿æ ‡ç­¾<br>
<code>book_manager/settings.py</code></li>
</ol>
<pre><code>    TEMPLATES = [
        {
            'OPTIONS': {
                'builtins': [
                    'django.templatetags.static'
                ],
            },
        },
    ]
</code></pre>
<ol start="7">
<li>å…³é—­è¡¨å• <code>csrf</code> éªŒè¯<br>
<code>book_manager/settings.py</code></li>
</ol>
<pre><code>    MIDDLEWARE = [
        # 'django.middleware.csrf.CsrfViewMiddleware',
    ]
</code></pre>
<ol start="6">
<li>ç¼–å†™æ¨¡æ¿<br>
<code>front/templates/front/base.html</code></li>
</ol>
<pre><code>    &lt;!DOCTYPE html&gt;
    &lt;html lang=&quot;en&quot;&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;title&gt;å›¾ä¹¦ç®¡ç†ç³»ç»Ÿ&lt;/title&gt;
        &lt;link rel=&quot;stylesheet&quot; href=&quot;{% static 'front/style.css' %}&quot;&gt;
    &lt;/head&gt;
    &lt;body&gt;
        {% include 'front/header.html' %}
        {% block content %}
        {% endblock %}
    &lt;/body&gt;
    &lt;/html&gt;
</code></pre>
<pre><code>`front/templates/front/header.html`
</code></pre>
<pre><code>     &lt;header&gt;
        &lt;nav&gt;
            &lt;ul&gt;
                &lt;li&gt;&lt;a href=&quot;/&quot;&gt;é¦–é¡µ&lt;/a&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href=&quot;/create/&quot;&gt;æ–°å¢å›¾ä¹¦&lt;/a&gt;&lt;/li&gt;
            &lt;/ul&gt;
        &lt;/nav&gt;
    &lt;/header&gt;
</code></pre>
<pre><code>`front/templates/front/index.html`
</code></pre>
<pre><code>    {% extends &quot;front/base.html&quot; %}

    {% block content %}
        &lt;h1&gt;æ‰€æœ‰å›¾ä¹¦&lt;/h1&gt;
        &lt;table cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; &gt;
            &lt;thead&gt;
                &lt;tr&gt;
                    &lt;th class=&quot;table-id&quot;&gt;åºå·&lt;/th&gt;
                    &lt;th class=&quot;table-title&quot;&gt;ä¹¦å&lt;/th&gt;
                    &lt;th class=&quot;table-author&quot;&gt;ä½œè€…&lt;/th&gt;
                &lt;/tr&gt;
            &lt;/thead&gt;
            &lt;tbody&gt;
                {% for book in books %}
                    &lt;tr&gt;
                        &lt;td class=&quot;table-id&quot;&gt;{{ forloop.counter }}&lt;/td&gt;
                        &lt;td class=&quot;table-title&quot;&gt;&lt;a href=&quot;{% url 'front:detail' book_id=book.id %}&quot;&gt;{{ book.title }}&lt;/a&gt;&lt;/td&gt;
                        &lt;td class=&quot;table-author&quot;&gt;{{ book.author }}&lt;/td&gt;
                    &lt;/tr&gt;
                {% endfor %}
            &lt;/tbody&gt;
        &lt;/table&gt;
    {% endblock %}
</code></pre>
<pre><code>`front/templates/front/create.html`
</code></pre>
<pre><code>    {% extends &quot;front/base.html&quot; %}

    {% block content %}
        &lt;h1&gt;æ–°å¢å›¾ä¹¦&lt;/h1&gt;
        &lt;form action=&quot;&quot; method=&quot;post&quot; id=&quot;create-form&quot;&gt;
            &lt;p&gt;
                &lt;label for=&quot;title&quot;&gt; ä¹¦åï¼š
                    &lt;input type=&quot;text&quot; class=&quot;input-text&quot; name=&quot;title&quot; id=&quot;title&quot; required&gt;
                &lt;/label&gt;
            &lt;/p&gt;
            &lt;p&gt;
                &lt;label for=&quot;author&quot;&gt; ä½œè€…ï¼š
                    &lt;input type=&quot;text&quot; class=&quot;input-text&quot; name=&quot;author&quot; id=&quot;author&quot; required&gt;
                &lt;/label&gt;
            &lt;/p&gt;
            &lt;p&gt;
                &lt;input type=&quot;submit&quot; value=&quot;æ–°å¢å›¾ä¹¦&quot; class=&quot;default-btn&quot;&gt;
            &lt;/p&gt;
        &lt;/form&gt;
    {% endblock %}
</code></pre>
<pre><code>`front/templates/front/detail.html`
</code></pre>
<pre><code>    {% extends &quot;front/base.html&quot; %}

    {% block content %}
        &lt;h1&gt;å›¾ä¹¦è¯¦æƒ…&lt;/h1&gt;
        &lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot;&gt;
            {% for key, value in book.items %}
                &lt;tr&gt;
                    &lt;td class=&quot;table-id&quot;&gt;{{ key }}&lt;/td&gt;
                    &lt;td class=&quot;table-title&quot;&gt;{{ value }}&lt;/td&gt;
                &lt;/tr&gt;
            {% endfor %}
            &lt;tr&gt;
                &lt;td class=&quot;table-id&quot;&gt;&lt;button id=&quot;book-del&quot; class=&quot;small-danger-btn&quot;&gt;åˆ é™¤&lt;/button&gt;&lt;/td&gt;
                &lt;td class=&quot;table-title&quot;&gt;&lt;button id=&quot;book-edit&quot; class=&quot;small-default-btn&quot;&gt;ç¼–è¾‘&lt;/button&gt;&lt;/td&gt;
            &lt;/tr&gt;
        &lt;/table&gt;

        &lt;script&gt;
            const delBtn = document.querySelector('#book-del');
            const editBtn = document.querySelector('#book-edit');

            delBtn.onclick = function() {
                window.location.href = '{% url 'front:delete' book_id=book.id %}'
            };

            editBtn.onclick = function() {
                window.location.href = '{% url 'front:edit' book_id=book.id %}'
            };
        &lt;/script&gt;
    {% endblock %}
</code></pre>
<pre><code>`front/templates/front/edit.html`
</code></pre>
<pre><code>    {% extends &quot;front/base.html&quot; %}

    {% block content %}
        &lt;h1&gt;ç¼–è¾‘å›¾ä¹¦&lt;/h1&gt;
        &lt;form action=&quot;{% url 'front:edit' book_id=book.id %}&quot; method=&quot;post&quot; id=&quot;create-form&quot;&gt;
            &lt;p&gt;
                &lt;label for=&quot;title&quot;&gt; ä¹¦åï¼š
                    &lt;input type=&quot;text&quot; class=&quot;input-text&quot; value=&quot;{{ book.title }}&quot; name=&quot;title&quot; id=&quot;title&quot; required&gt;
                &lt;/label&gt;
            &lt;/p&gt;
            &lt;p&gt;
                &lt;label for=&quot;author&quot;&gt; ä½œè€…ï¼š
                    &lt;input type=&quot;text&quot; class=&quot;input-text&quot; value=&quot;{{ book.author }}&quot; name=&quot;author&quot; id=&quot;author&quot; required&gt;
                &lt;/label&gt;
            &lt;/p&gt;
            &lt;p&gt;
                &lt;input type=&quot;submit&quot; value=&quot;ç¼–è¾‘å›¾ä¹¦&quot; class=&quot;default-btn&quot;&gt;
            &lt;/p&gt;
        &lt;/form&gt;
    {% endblock %}
</code></pre>
<pre><code>`front/static/front/style.css`
</code></pre>
<pre><code>    body, ul, li, h1{
        padding: 0;
        margin: 0;
    }

    nav ul {
        list-style: none;
        height: 60px;
        background-color: #333;
    }

    nav li {
        padding: 0 10px;
        float: left;
        text-align: center;
        line-height: 60px;
    }

    nav a {
        width: 120px;
        display: block;
        height: 60px;
        font-size: 22px;
        color: #fff;
        font-weight: bold;
        text-decoration: none;
    }

    nav a:hover {
        color: lightblue;
    }

    #create-form {
        width: 600px;
        height: 300px;
        background-color: #abcdef;
        margin: 15px auto;
    }

    #create-form p {
        text-align: center;
        padding-top:  25px;
    }

    .input-text {
        width: 200px;
        height: 30px;
        border-radius: 5px;
        border: 1px solid lightblue;
    }

    .default-btn {
        width: 150px;
        height: 50px;
        border-radius: 10px;
        color: #fff;
        background-color: lightgreen;
        line-height: 30px;
        text-align: center;
        border: 1px solid #89a1a9;
    }

    .small-default-btn {
        width: 100px;
        height: 35px;
        border-radius: 10px;
        color: #fff;
        background-color: lightgreen;
        line-height: 30px;
        text-align: center;
        border: 1px solid #89a1a9;
    }

    .small-danger-btn {
        width: 100px;
        height: 35px;
        border-radius: 10px;
        color: #fff;
        background-color: darkred;
        line-height: 30px;
        text-align: center;
        border: 1px solid #89a1a9;
    }

    table {
        margin: 25px auto;
    }

    td, th {
        border: 1px solid lightblue;
        text-align: center;
    }

    .table-id {
        width: 100px;
        height: 50px;
    }

    .table-title {
        width: 500px;
        height: 50px;
    }

    .table-author {
        width: 300px;
        height: 50px;
    }


    h1 {
        text-align: center;
        color: #333;
    }
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Pythonè¯­æ³•é€ŸæŸ¥]]></title>
        <id>https://xiong-zh.github.io/post/Pythonè¯­æ³•é€ŸæŸ¥</id>
        <link href="https://xiong-zh.github.io/post/Pythonè¯­æ³•é€ŸæŸ¥">
        </link>
        <updated>2020-01-18T04:04:14.000Z</updated>
        <summary type="html"><![CDATA[<p>Python æ˜¯ä¸€é—¨ç‹¬ç‰¹çš„è¯­è¨€ï¼Œå¿«é€Ÿæµè§ˆä¸€ä¸‹ä»–çš„è¦ç‚¹ï¼š</p>
<ul>
<li>é¢å‘å¯¹è±¡ï¼šæ¯ä¸€ä¸ªå˜é‡éƒ½æ˜¯ä¸€ä¸ªç±»ï¼Œæœ‰å…¶è‡ªå·±çš„å±æ€§ï¼ˆattributeï¼‰ä¸æ–¹æ³•ï¼ˆmethodï¼‰ã€‚</li>
<li>è¯­æ³•å—ï¼šç”¨ç¼©è¿›ï¼ˆå››ä¸ªç©ºæ ¼ï¼‰è€Œä¸æ˜¯åˆ†å·ã€èŠ±æ‹¬å·ç­‰ç¬¦å·æ¥æ ‡è®°ã€‚å› æ­¤ï¼Œè¡Œé¦–çš„ç©ºæ ¼ä¸èƒ½éšæ„ä¹¦å†™ã€‚</li>
<li>æ³¨é‡Šï¼šè¡Œå†…ç”¨â€œ#â€å·ï¼Œè¡Œé—´æ³¨é‡Šå†™åœ¨ä¸¤ç»„è¿ç»­ä¸‰å•å¼•å·ä¹‹é—´ï¼šâ€™â€™â€™</li>
<li>ç»­è¡Œï¼šè¡Œå°¾è¾“å…¥ä¸€ä¸ªåæ–œæ åŠ ä¸€ä¸ªç©ºæ ¼ï¼ˆâ€™\ â€˜ï¼‰ï¼Œå†æ¢è¡Œã€‚å¦‚æœè¡Œå°¾è¯­æ³•æ˜æ˜¾æœªå®Œæˆï¼ˆæ¯”å¦‚ä»¥é€—å·ç»“å°¾ï¼‰ï¼Œå¯ä»¥ç›´æ¥ç»­è¡Œã€‚</li>
<li>æ‰“å°ä¸è¾“å…¥ï¼š å‡½æ•° print() ä¸ input()ï¼Œæ³¨æ„ print() çš„ sep ä¸ end å‚æ•°ã€‚</li>
</ul>
]]></summary>
        <content type="html"><![CDATA[<p>Python æ˜¯ä¸€é—¨ç‹¬ç‰¹çš„è¯­è¨€ï¼Œå¿«é€Ÿæµè§ˆä¸€ä¸‹ä»–çš„è¦ç‚¹ï¼š</p>
<ul>
<li>é¢å‘å¯¹è±¡ï¼šæ¯ä¸€ä¸ªå˜é‡éƒ½æ˜¯ä¸€ä¸ªç±»ï¼Œæœ‰å…¶è‡ªå·±çš„å±æ€§ï¼ˆattributeï¼‰ä¸æ–¹æ³•ï¼ˆmethodï¼‰ã€‚</li>
<li>è¯­æ³•å—ï¼šç”¨ç¼©è¿›ï¼ˆå››ä¸ªç©ºæ ¼ï¼‰è€Œä¸æ˜¯åˆ†å·ã€èŠ±æ‹¬å·ç­‰ç¬¦å·æ¥æ ‡è®°ã€‚å› æ­¤ï¼Œè¡Œé¦–çš„ç©ºæ ¼ä¸èƒ½éšæ„ä¹¦å†™ã€‚</li>
<li>æ³¨é‡Šï¼šè¡Œå†…ç”¨â€œ#â€å·ï¼Œè¡Œé—´æ³¨é‡Šå†™åœ¨ä¸¤ç»„è¿ç»­ä¸‰å•å¼•å·ä¹‹é—´ï¼šâ€™â€™â€™</li>
<li>ç»­è¡Œï¼šè¡Œå°¾è¾“å…¥ä¸€ä¸ªåæ–œæ åŠ ä¸€ä¸ªç©ºæ ¼ï¼ˆâ€™\ â€˜ï¼‰ï¼Œå†æ¢è¡Œã€‚å¦‚æœè¡Œå°¾è¯­æ³•æ˜æ˜¾æœªå®Œæˆï¼ˆæ¯”å¦‚ä»¥é€—å·ç»“å°¾ï¼‰ï¼Œå¯ä»¥ç›´æ¥ç»­è¡Œã€‚</li>
<li>æ‰“å°ä¸è¾“å…¥ï¼š å‡½æ•° print() ä¸ input()ï¼Œæ³¨æ„ print() çš„ sep ä¸ end å‚æ•°ã€‚</li>
</ul>
<!--more-->
<h1 id="ä»‹ç»">ä»‹ç»</h1>
<p>Python æ˜¯ä¸€é—¨ç‹¬ç‰¹çš„è¯­è¨€ï¼Œå¿«é€Ÿæµè§ˆä¸€ä¸‹ä»–çš„è¦ç‚¹ï¼š</p>
<ul>
<li>é¢å‘å¯¹è±¡ï¼šæ¯ä¸€ä¸ªå˜é‡éƒ½æ˜¯ä¸€ä¸ªç±»ï¼Œæœ‰å…¶è‡ªå·±çš„å±æ€§ï¼ˆattributeï¼‰ä¸æ–¹æ³•ï¼ˆmethodï¼‰ã€‚</li>
<li>è¯­æ³•å—ï¼šç”¨ç¼©è¿›ï¼ˆå››ä¸ªç©ºæ ¼ï¼‰è€Œä¸æ˜¯åˆ†å·ã€èŠ±æ‹¬å·ç­‰ç¬¦å·æ¥æ ‡è®°ã€‚å› æ­¤ï¼Œè¡Œé¦–çš„ç©ºæ ¼ä¸èƒ½éšæ„ä¹¦å†™ã€‚</li>
<li>æ³¨é‡Šï¼šè¡Œå†…ç”¨â€œ#â€å·ï¼Œè¡Œé—´æ³¨é‡Šå†™åœ¨ä¸¤ç»„è¿ç»­ä¸‰å•å¼•å·ä¹‹é—´ï¼šâ€™â€™â€™</li>
<li>ç»­è¡Œï¼šè¡Œå°¾è¾“å…¥ä¸€ä¸ªåæ–œæ åŠ ä¸€ä¸ªç©ºæ ¼ï¼ˆâ€™\ â€˜ï¼‰ï¼Œå†æ¢è¡Œã€‚å¦‚æœè¡Œå°¾è¯­æ³•æ˜æ˜¾æœªå®Œæˆï¼ˆæ¯”å¦‚ä»¥é€—å·ç»“å°¾ï¼‰ï¼Œå¯ä»¥ç›´æ¥ç»­è¡Œã€‚</li>
<li>æ‰“å°ä¸è¾“å…¥ï¼š å‡½æ•° print() ä¸ input()ï¼Œæ³¨æ„ print() çš„ sep ä¸ end å‚æ•°ã€‚</li>
<li>å˜é‡ï¼šæ— éœ€æŒ‡å®šå˜é‡ç±»å‹ï¼Œä¹Ÿä¸éœ€è¦æå‰å£°æ˜å˜é‡ã€‚
<ul>
<li>åˆ é™¤å˜é‡ï¼šdel()</li>
<li>å¤åˆ¶å˜é‡ï¼šç›´æ¥å°†å˜é‡aèµ‹å€¼ç»™bï¼Œæœ‰æ—¶ä»…ä»…å¤åˆ¶äº†ä¸€ä¸ªâ€œå¼•ç”¨â€ã€‚æ­¤å b ä¸ a çš„æ”¹åŠ¨ä»ä¼šäº’ç›¸å½±å“ã€‚å¿…è¦æ—¶ä½¿ç”¨ a is b æ¥åˆ¤æ–­æ˜¯å¦åŒå€ã€‚</li>
</ul>
</li>
<li>æ¨¡å—ï¼šé€šè¿‡ import pandas çš„æ–¹å¼åŠ è½½æ¨¡å—ï¼ˆæˆ–è€… import pandas as pdï¼‰ï¼Œå¹¶ç”¨å½¢å¦‚ pandas.DataFrameï¼ˆæˆ– pd.DataFrameï¼‰çš„æ–¹å¼è°ƒç”¨æ¨¡å—å†…çš„æ–¹æ³•ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ from pandas import DataFrame çš„æ–¹å¼ï¼Œè¿™æ ·åœ¨ä¸‹æ–‡å¯ä»¥ç›´æ¥ä½¿ç”¨ DataFrame ä½œä¸ºè°ƒç”¨åã€‚</li>
<li>å¸®åŠ©ï¼šé…åˆä½¿ç”¨ dir() ä¸ help() å‘½ä»¤ï¼›å…¶ä¸­å‰è€…æ˜¯è¾“å‡ºå˜é‡æ‰€æœ‰çš„æˆå‘˜ã€‚ä»¥åŠæŸ¥é˜… å®˜ç½‘é¡µé¢ã€‚</li>
</ul>
<p>å˜é‡å¤åˆ¶çš„ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code>a = [1, 2]
b = a
print(id(a) - id(b))  # åœ°å€å·®ä¸º 0ï¼Œè¡¨ç¤ºå®è´¨æ˜¯åŒå€çš„
0
</code></pre>
<pre><code>b.append(3)
print(a)  # åªæ”¹åŠ¨äº† bï¼Œä½† a ä¹Ÿè·Ÿç€å˜åŠ¨äº†
[1, 2, 3]
a is b
True
</code></pre>
<p>ä½¿ç”¨åˆ‡ç‰‡æ¥é‡æ–°åˆ†é…ç©ºé—´ï¼š</p>
<pre><code>a is a[:]
False
</code></pre>
<h1 id="æ•°æ®ç»“æ„">æ•°æ®ç»“æ„</h1>
<p>Python åŸç”Ÿçš„æ•°æ®ç»“æ„åŒ…æ‹¬ï¼š</p>
<h2 id="æ•°å­—num">æ•°å­—ï¼ˆnumï¼‰</h2>
<p>ç»†åˆ†ä¸ºæ•´æ•°ï¼ˆintï¼‰ä¸æµ®ç‚¹æ•°ï¼ˆfloatï¼‰ä¸¤ç§ã€‚</p>
<ul>
<li>å››åˆ™è¿ç®—ï¼š+ï¼Œ -ï¼Œ *ï¼Œ / ï¼Œä¹˜æ–¹ï¼š **</li>
<li>æ•´é™¤ï¼š 5 // 2 = 2ï¼Œå–ä½™ï¼š5 % 2 = 1</li>
<li>è‡ªè¿ç®—ï¼š a += 1 ï¼ˆå››åˆ™ä¸ä¹˜æ–¹å‡å¯ç±»ä¼¼è‡ªè¿ç®—ï¼‰<br>
ä»¥åŠä¸€äº›ç»†èŠ‚ï¼š</li>
<li>è¿ç®—ä¸¤æ•°ä¸­åªè¦æœ‰ä¸€ä¸ªæµ®ç‚¹æ•°ï¼Œç»“æœå°±æ˜¯æµ®ç‚¹æ•°ï¼›</li>
<li>æ•´æ•°ç›¸é™¤ï¼Œå³ä½¿èƒ½é™¤å°½ï¼Œç»“æœä¹Ÿæ˜¯æµ®ç‚¹æ•°ï¼›</li>
<li>Python å†…éƒ¨çš„æœºåˆ¶è§£å†³äº†æ•´æ•°æº¢å‡ºçš„é—®é¢˜ï¼Œä¸ç”¨æ‹…å¿ƒã€‚</li>
</ul>
<h2 id="å¸ƒå°”boolä¸é€»è¾‘">å¸ƒå°”ï¼ˆboolï¼‰ä¸é€»è¾‘</h2>
<p>é¦–å­—æ¯å¤§å†™ True / False.</p>
<ul>
<li>é€»è¾‘è¿ç®—ç¬¦ï¼šä¸ A and Bï¼Œæˆ– A or Bï¼Œé not A</li>
<li>é€»è¾‘å…³ç³»ç¬¦ï¼šç­‰äº ==ï¼Œ ä¸ç­‰äº !=. å…¶ä»–ä¸èµ˜è¿°ã€‚</li>
<li>å‡ ç§é€»è¾‘åˆ¤æ–­ä¾‹å­ï¼š</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">å˜é‡ x</th>
<th style="text-align:center">x = []</th>
<th style="text-align:center">x = 0</th>
<th style="text-align:center">x = 2</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">bool(x)</td>
<td style="text-align:center">False</td>
<td style="text-align:center">False</td>
<td style="text-align:center">True</td>
</tr>
<tr>
<td style="text-align:center">if x: â€¦</td>
<td style="text-align:center">False</td>
<td style="text-align:center">False</td>
<td style="text-align:center">True</td>
</tr>
<tr>
<td style="text-align:center">if x is None: â€¦</td>
<td style="text-align:center">False</td>
<td style="text-align:center">False</td>
<td style="text-align:center">False</td>
</tr>
</tbody>
</table>
<h2 id="åºåˆ—sequence">åºåˆ—ï¼ˆsequenceï¼‰</h2>
<p>åºåˆ—ä¸»è¦åŒ…æ‹¬**å­—ç¬¦ä¸²ï¼ˆstrï¼‰ã€åˆ—è¡¨ï¼ˆlistï¼‰ä¸å…ƒç¥–ï¼ˆtupleï¼‰**ä¸‰ç±»ã€‚</p>
<ul>
<li>åºåˆ—ç´¢å¼•è§„åˆ™ï¼š
<ul>
<li>ç´¢å¼•ä»0å¼€å§‹ï¼Œåˆ° N-1 ç»“æŸã€‚</li>
<li>åˆ‡ç‰‡ï¼šåˆ‡ç‰‡çš„ç´¢å¼•æ˜¯å·¦é—­å³å¼€çš„ã€‚
<ul>
<li>seq[0:2]ï¼ˆä» 0 åˆ° 1ï¼‰</li>
<li>seq[2:]ï¼ˆä» 2 åˆ°å°¾ï¼‰</li>
<li>seq[:3] ï¼ˆä»å¤´åˆ° 2ï¼‰</li>
<li>seq[:]ï¼ˆå…¨éƒ¨ï¼‰</li>
<li>seq[:10:2]ï¼ˆä»å¤´åˆ°9ï¼Œæ¯ä¸¤ä¸ªå–ä¸€ä¸ªï¼‰</li>
<li>seq[::2]ï¼ˆå…¨éƒ¨ï¼Œæ¯ä¸¤ä¸ªå–ä¸€ä¸ªï¼‰</li>
</ul>
</li>
<li>ç´¢å¼•å…è®¸è´Ÿæ•°ï¼šseq(-1) ä¸ seq(N - 1) ç­‰åŒï¼Œseq(-3:-1)ä¸ seq(N-3:N-1) ç­‰åŒã€‚</li>
</ul>
</li>
<li>åºåˆ—é€šç”¨å‡½æ•°ï¼š
<ul>
<li>len()ï¼šè¿”å›åºåˆ—é•¿åº¦ã€‚</li>
<li>+/* ï¼šåŠ å·ç”¨äºè¿æ¥ä¸¤ä¸ªåºåˆ—ï¼Œä¹˜å·é‡å¤æ’åˆ—è‹¥å¹²æ¬¡å†è¿æ¥ã€‚</li>
<li>seq1 in seq2ï¼šå¦‚æœ seq1 è¿™ä¸ªç‰‡æ®µå¯ä»¥åœ¨ seq2 ä¸­è¢«æ‰¾åˆ°ï¼Œè¿”å› True.</li>
<li>indexï¼šåœ¨ seq1 in seq2 ä¸º True æ—¶ä½¿ç”¨ï¼Œseq2.index(seq1) è¡¨ç¤º seq1 é¦–æ¬¡å‡ºç°äº seq2 ä¸­çš„ä½ç½®ã€‚</li>
<li>max()/min()ï¼šè¿”å›åºåˆ—ä¸­çš„æœ€å€¼ã€‚å¦‚æœä¸æ˜¯æ•°å­—ï¼Œåˆ™æŒ‰ ASCII ç é¡ºåºè¿”å›ã€‚</li>
<li>cmp(seq1, seq2)ï¼šæ¯”è¾ƒå¤§å°ã€‚ç»“æœä¸ºè´Ÿï¼Œåˆ™è¡¨ç¤º seq1 è¾ƒå°ã€‚</li>
</ul>
</li>
</ul>
<h3 id="å­—ç¬¦ä¸²str">å­—ç¬¦ä¸²ï¼ˆstrï¼‰</h3>
<p>å†™äºä¸€å¯¹åŒå¼•å·æˆ–å•å¼•å·å†…ã€‚ç”¨ str() å¯ä»¥å¼ºåˆ¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚</p>
<ul>
<li>
<p>è½¬ä¹‰ï¼šåæ–œæ ã€‚å¦‚æœå¼ºåˆ¶ä¸è§£é‡Šå­—ç¬¦ä¸²ï¼Œåœ¨å·¦å¼•å·å‰åŠ å­—æ¯ r å³å¯ï¼š <code>r&quot;c:\new&quot;</code>.</p>
</li>
<li>
<p>åˆ†å‰²ä¸è¿æ¥ï¼š<code>**.split()</code> ä¸ <code>**.join()</code>.</p>
<pre><code>s = &quot; I love Python&quot;  # é¦–ä½æ˜¯ç©ºæ ¼
lst = s.split(' ')
lst1 = '-'.join(lst)

print(lst, '\n', lst1)
['', 'I', 'love', 'Python'] 
 -I-love-Python
</code></pre>
</li>
<li>
<p>ç´§åˆ‡ï¼š<code>strip()</code> å»æ‰å­—ç¬¦ä¸²é¦–å°¾ä¸¤ç«¯çš„ç©ºæ ¼ã€‚æ–¹æ³• <code>lstrip()/rstrip()</code> åˆ™åªåˆ‡é™¤é¦–ç«¯/å°¾ç«¯çš„ç©ºæ ¼ã€‚</p>
<pre><code>s.strip()
'I love Python'
</code></pre>
</li>
<li>
<p>å¤§å°å†™è½¬æ¢ï¼šå¦‚ä¸‹å‡ ä¸ªæ–¹æ³•ï¼š</p>
<ul>
<li>é¦–å­—æ¯å¤§å†™ï¼šs.title()</li>
<li>å…¨å¤§å†™ï¼šs.upper()</li>
<li>å…¨å°å†™ï¼šs.lower()</li>
<li>å¥é¦–å¤§å†™ï¼šs.capitalize()</li>
</ul>
</li>
<li>
<p>æ ¼å¼åŒ–ï¼šå­—ç¬¦ä¸²æ ¼å¼åŒ–æ˜¯ä¸€ç§å®ç”¨åŠŸèƒ½ã€‚é€šè¿‡ .format() æˆå‘˜å‡½æ•°å®Œæˆã€‚</p>
<pre><code>'I like {} and {}'.format('Python', 'you')
'I like Python and you'
'{0} + {2} = {1}'.format (10, 20, 'Python ')  # æŒ‰é¡ºåºå¼•ç”¨
'10 + Python  = 20'
'{0} * {1} = {0}'.format (10, 'Python ')  # ç¼–å·åå¤å¼•ç”¨
'10 * Python  = 10'
</code></pre>
</li>
</ul>
<p>æ ¼å¼åŒ–æ§åˆ¶ç ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:center">æ§åˆ¶ç </th>
<th style="text-align:center">å«ä¹‰</th>
<th style="text-align:center">æ§åˆ¶ç </th>
<th style="text-align:center">å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">ğŸ˜’</td>
<td style="text-align:center">å­—ç¬¦ä¸²</td>
<td style="text-align:center">:c</td>
<td style="text-align:center">å•ä¸ªå­—ç¬¦</td>
</tr>
<tr>
<td style="text-align:center">:b/o/x/d</td>
<td style="text-align:center">äºŒã€å…«ã€åå…­ã€åè¿›åˆ¶æ•°</td>
<td style="text-align:center">:e/f</td>
<td style="text-align:center">ç§‘å­¦è®¡æ•°æ³•/æµ®ç‚¹æ•°</td>
</tr>
</tbody>
</table>
<p>ä¸€äº›å¤æ‚æ§åˆ¶çš„ä¾‹å­ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:center">ä¾‹å­</th>
<th style="text-align:center">å«ä¹‰</th>
<th style="text-align:center">ä¾‹å­</th>
<th style="text-align:center">å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">:.2f/:+.2f</td>
<td style="text-align:center">ä¸¤ä½å°æ•°/å¸¦ç¬¦å·ä¸¤ä½å°æ•°</td>
<td style="text-align:center">: .2f</td>
<td style="text-align:center">æ­£æ•°å‰è¡¥ç©ºæ ¼çš„ä¸¤ä½å°æ•°</td>
</tr>
<tr>
<td style="text-align:center">:,</td>
<td style="text-align:center">é€—å·åˆ†éš”ç¬¦</td>
<td style="text-align:center">:.2%</td>
<td style="text-align:center">ç™¾åˆ†æ¯”ä¸¤ä½å°æ•°</td>
</tr>
<tr>
<td style="text-align:center">:.2e</td>
<td style="text-align:center">ç§‘å­¦è®¡æ•°æ³•ä¸¤ä½å°æ•°</td>
<td style="text-align:center">:^4d</td>
<td style="text-align:center">æ€»å®½å››ä½å±…ä¸­å¯¹é½</td>
</tr>
<tr>
<td style="text-align:center">:&gt;4d/&lt;4d</td>
<td style="text-align:center">æ€»å®½å››ä½å·¦/å³å¯¹é½</td>
<td style="text-align:center">:0&gt;4d</td>
<td style="text-align:center">æ€»å®½å››ä½å·¦ä¾§è¡¥é›¶</td>
</tr>
</tbody>
</table>
<p>ä¸¾ä¾‹ï¼š</p>
<pre><code>&quot;{:0&gt;7.2f} is an odd number&quot;.format(123.4)  # æ€»å®½ 7 ä½å°æ•°ç‚¹å 2 ä½ï¼Œå·¦ä¾§è¡¥é›¶
'0123.40 is an odd number'
</code></pre>
<p>å…¶ä»–å®ç”¨çš„å­—ç¬¦ä¸²å‡½æ•°ï¼š</p>
<ul>
<li>str.replace(old, new[, times])ï¼šå°†å­—ç¬¦ä¸²ä¸­å‰ times ä¸ª old å­ä¸²æ›¿æ¢ä¸º newã€‚Times ä¸æŒ‡å®šæ—¶é»˜è®¤æ›¿æ¢å…¨éƒ¨ã€‚</li>
<li>str.isdigit()ï¼šåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æ¯ä¸€ä½éƒ½æ˜¯æ•°å­—ï¼Œè¿”å› True æˆ–è€… Falseã€‚<br>
å­—ç¬¦ä¸²ä¸­æ­£åˆ™è¡¨è¾¾å¼çš„å†…å®¹å‚è§æœ¬æ–‡é™„å½•ã€‚</li>
</ul>
<h3 id="åˆ—è¡¨list">åˆ—è¡¨ï¼ˆlistï¼‰</h3>
<p>ä¸­æ‹¬å·å¼çš„ç»“æ„ã€‚<code>list()</code> ç”¨äºå¼ºåˆ¶è½¬æ¢ç±»å‹ã€‚</p>
<pre><code>lst = [1, 2, 3]
print(lst)
[1, 2, 3]
# ã€åè½¬ã€‘ï¼šå…¶ä¸­ç¬¬äºŒç§æ–¹å¼ä¼šæ›´æ”¹ç°æœ‰çš„åˆ—è¡¨
lst1 = list(reversed(lst))
lst.reverse()
print(lst1, lst)
[3, 2, 1] [3, 2, 1]
# ã€è¿½åŠ ã€‘ï¼šå…ƒç´  append()ï¼Œå¦ä¸€ä¸ªåˆ—è¡¨ï¼šextend()
lst.append(4)
print(lst)
[3, 2, 1, 4]
lst.extend(lst1)
print(lst)
[3, 2, 1, 4, 3, 2, 1]
# ã€æ’å…¥ã€‘ï¼šlst.insert(idx, obj) ä¼šåœ¨ lst[idx] å¤„æ’å…¥ objï¼Œç„¶åä¾æ¬¡åç§»åŸæœ‰é¡¹
lst.insert(1, 100)
print(lst)
[3, 100, 2, 1, 4, 3, 2, 1]
# ã€åˆ é™¤ã€‘ï¼šlst.remove(obj) ä¼šåˆ é™¤é¦–ä¸ªåŒ¹é…å€¼ï¼Œè‹¥æ— åŒ¹é…ä¼šæŠ¥é”™ï¼›
#           lst.pop(idx) ä¼šè¿”å› lst[idx]ï¼Œå¹¶å°†å…¶åˆ é™¤ã€‚å¦‚æœä¸æŒ‡å®š idxï¼Œé»˜è®¤ä¸ºåˆ—è¡¨å°¾
lst.remove(2)
print(lst)
[3, 100, 1, 4, 3, 2, 1]
tmp = lst.pop()
print(lst, &quot;\n&quot;, tmp)
[3, 100, 1, 4, 3, 2] 
 1
# ã€æœç´¢ã€‘ï¼šä½¿ç”¨åºåˆ—é€šç”¨å‡½æ•°å³å¯ã€‚ç”¨ count(obj) å¯ä»¥è®¡ç®—é¢‘æ•°ã€‚
# ã€æ’åºã€‘ï¼šsort() æ–¹æ³•ã€‚å¦‚æœæŒ‡å®š reverse å‚æ•°ï¼Œå¯é™åºæ’åºã€‚
lst.sort(reverse=True)
print(lst)
[100, 4, 3, 3, 2, 1]
# ã€æ¸…ç©ºã€‘ï¼šclear()
lst.clear()
print(lst)
[]
</code></pre>
<h3 id="å…ƒç»„tuple">å…ƒç»„ï¼ˆtupleï¼‰</h3>
<p>åœ†æ‹¬å·å¼çš„ç»“æ„ï¼Œæ˜¯ä¸€ç§ä¸å¯å˜åºåˆ—ã€‚</p>
<pre><code>a = (1, 'string ', [1 ,2])
print(a)
(1, 'string ', [1, 2])
</code></pre>
<p><strong>Note</strong>: å®šä¹‰ä¸€ä¸ªç©ºçš„å…ƒç»„ç”¨<code>()</code>ï¼Œå®šä¹‰åªæœ‰ä¸€ä¸ªå…ƒç»„çš„å…ƒç»„ï¼Œéœ€è¦åŠ <code>,</code>ï¼Œå¦åˆ™å°±ä¸æ˜¯å…ƒç»„äº†ï¼Œå¦‚ä¸‹ï¼š</p>
<pre><code>&gt;&gt;&gt; tuple1 = ()
&gt;&gt;&gt; type(tuple1)
&lt;type 'tuple'&gt;
&gt;&gt;&gt; tuple2 = (1)
&gt;&gt;&gt; type(tuple2)
&lt;type 'int'&gt;
&gt;&gt;&gt; tuple3 = (1,)
&gt;&gt;&gt; type(tuple3)
&lt;type 'tuple'&gt;
</code></pre>
<h2 id="å­—å…¸dict">å­—å…¸ï¼ˆdictï¼‰</h2>
<p>å­—å…¸æ˜¯ä¸€ç§ç±»å“ˆå¸Œè¡¨çš„æ•°æ®ç»“æ„ï¼Œå†…éƒ¨æ— åºï¼Œé€šè¿‡é”®å€¼å¯¹ï¼ˆkey: valueï¼‰çš„å½¢å¼å­˜å‚¨æ•°æ®ã€‚å‡ ç§å­—å…¸åˆå§‹åŒ–çš„æ–¹å¼ï¼š</p>
<pre><code># å°å­—å…¸ç›´æ¥èµ‹å€¼
d1 = {&quot;name&quot;: &quot;wklchris&quot;, &quot;gender&quot;: &quot;male&quot;}
# åˆ©ç”¨å­—å…¸å¢åŠ é”®å€¼å¯¹çš„æ–¹æ³•
d2 = {}
d2['name'] = 'wklchris'
# ä¸€ä¸ªå€¼èµ‹ç»™å¤šä¸ªé”®
d3 = {}.fromkeys((&quot;name&quot;, &quot;gender&quot;), &quot;NA&quot;)
# å¼ºåˆ¶æ ¼å¼è½¬æ¢
d4 = dict(name=&quot;wklchris&quot;, gender=&quot;male&quot;)

print(d1, d2, d3, d4, sep=&quot;\n&quot;)
{'name': 'wklchris', 'gender': 'male'}
{'name': 'wklchris'}
{'name': 'NA', 'gender': 'NA'}
{'name': 'wklchris', 'gender': 'male'}
</code></pre>
<p>å­—å…¸çš„æ“ä½œæ–¹æ³•ï¼š</p>
<pre><code>len(d1)
2
# ã€å¤åˆ¶ã€‘ï¼š
dd = d1.copy()
dd is d1
False
# ã€æŸ¥æ‰¾é”®åç§°ã€‘ï¼š
&quot;name&quot; in dd
True
# ã€åˆ é™¤é”®å€¼å¯¹ã€‘
del(dd[&quot;name&quot;])
# ã€getã€‘
dd.get(&quot;name&quot;, &quot;Nothing&quot;)  # å¦‚æœé”®ä¸å­˜åœ¨ï¼Œè¿”å›â€œNothingâ€
'Nothing'
# ã€setdefaultã€‘
dd.setdefault(&quot;name&quot;, &quot;wklchris&quot;)  # å¦‚æœé”®ä¸å­˜åœ¨ï¼Œå°±æ–°å»ºè¯¥é”®ï¼Œå¹¶èµ‹å€¼
'wklchris'
print(dd)
{'name': 'wklchris', 'gender': 'male'}
# ã€è¾“å‡ºé”®å€¼ã€‘ï¼š
list(dd.items())
[('name', 'wklchris'), ('gender', 'male')]
list(dd.keys())
['name', 'gender']
list(dd.values())
['wklchris', 'male']
# ã€å¼¹å‡ºé”®å€¼å¯¹ã€‘ï¼špop(key) / popitem(key)
# å…¶ä¸­ï¼Œåè€…ä¼šéšæœºå¼¹å‡ºä¸€ä¸ªé”®å€¼å¯¹
tmp = dd.pop(&quot;gender&quot;)
print(dd, tmp)
{'name': 'wklchris'} male
# ã€æ›´æ–°ã€‘ï¼šupdate(ref_dict) ä»¥ ref_dict ä¸ºå‡†ï¼Œæ›´æ–°å½“å‰å­—å…¸
d4 = {&quot;name&quot;: &quot;Test&quot;, &quot;Age&quot;: 3}
dd.update(d4)
print(dd)
{'name': 'Test', 'Age': 3}
</code></pre>
<h2 id="é›†åˆset">é›†åˆï¼ˆsetï¼‰</h2>
<p>æœ¬æ–‡åªè®¨è®ºå¯å˜é›†åˆï¼Œå…³äºä¸å¯å˜é›†åˆçš„å†…å®¹ï¼Œå‚è€ƒ help(frozenset)ã€‚</p>
<p>é›†åˆæ˜¯ä¸€ç§æ— åºçš„æ•°æ®å­˜å‚¨æ–¹å¼ï¼Œä¸”å†…éƒ¨å…ƒç´ å…·æœ‰å”¯ä¸€æ€§ã€‚é›†åˆä¸å­—å…¸ä¸€æ ·éƒ½å¯ä»¥ç”¨èŠ±æ‹¬å·çš„å½¢å¼åˆ›ç«‹ã€‚ä½†åœ¨ä¹¦å†™ a={} æ—¶ï¼ŒPython ä¼šå°†å…¶è¯†åˆ«ä¸ºå­—å…¸ç±»å‹ã€‚</p>
<ul>
<li>
<p>å¢æ·»ï¼šadd() / update()</p>
</li>
<li>
<p>åˆ é™¤ï¼šremove() / discard()ï¼ŒåŒºåˆ«åœ¨äºåè€…æœç´¢æ— ç»“æœä¼šæŠ¥é”™ã€‚</p>
</li>
<li>
<p>ä»å±ï¼ša.issubset(b) é›†åˆ a æ˜¯å¦æ˜¯ b çš„å­é›†ï¼›a.issuperset(b) é›†åˆ a æ˜¯å¦æ˜¯ b çš„çˆ¶é›†ã€‚a == b ä¸¤é›†åˆæ˜¯å¦å…¨ç­‰ã€‚</p>
</li>
<li>
<p>é›†åˆè¿ç®—ï¼šé›†åˆè¿ç®—ä¸ä¼šæ”¹å˜å‚ä¸è¿ç®—çš„é›†åˆæœ¬èº«ã€‚</p>
<ul>
<li>
<p>å¹¶é›†ï¼š a | b æˆ–è€… a.union(b)</p>
</li>
<li>
<p>äº¤é›†ï¼š a &amp; b æˆ–è€… a.intersection(b)</p>
</li>
<li>
<p>è¡¥é›†ï¼š a - b æˆ–è€… a.difference(b)</p>
<p>æ³¨æ„</p>
<p>ï¼šåœ¨å­—ç¬¦ä¸²å¼ºåˆ¶è½¬æ¢ä¸ºé›†åˆæ—¶ï¼Œå¿…è¦æ—¶ä½¿ç”¨ä¸­æ‹¬å·å…ˆè½¬ä¸ºåˆ—è¡¨ï¼ˆå¦åˆ™å­—ç¬¦ä¸²ä¼šè¢«æ‹†åˆ†ä¸ºå•ä¸ªå­—ç¬¦åå†è¿›è¡Œè½¬æ¢ï¼‰ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code>ss = {&quot;a&quot;, &quot;b&quot;, &quot;c&quot;}
ss | set(&quot;de&quot;)
{'a', 'b', 'c', 'd', 'e'}
ss | set([&quot;de&quot;])
{'a', 'b', 'c', 'de'}
</code></pre>
</li>
</ul>
</li>
</ul>
<h1 id="åŸºæœ¬è¯­å¥">åŸºæœ¬è¯­å¥</h1>
<p>åŒå¤§å¤šæ•°ç¨‹åºè¯­è¨€ä¸€æ ·ï¼ŒPython æ‹¥æœ‰ <code>if, for, while</code>è¯­å¥ã€‚ä»€ä¹ˆï¼Ÿ<code>switch</code> è¯­å¥ï¼Ÿä½¿ç”¨å­—å…¸å°±å¥½ã€‚</p>
<h2 id="if-è¯­å¥ä¸ä¸‰å…ƒæ“ä½œ">if è¯­å¥ä¸ä¸‰å…ƒæ“ä½œ</h2>
<p>åœ¨ Python ä¸­ï¼Œ<code>else if</code> è¢«ç¼©å†™ä¸ºå•ä¸ªå…³é”®è¯ <code>elif</code>.</p>
<pre><code>if 1.0 &gt; 1:
    a = 1
elif 1.0 &lt; 1:
    a = 2
else:
    a = 3
    
a
3
</code></pre>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒPython ä¸­çš„ if è¯­å¥æ”¯æŒé“¾å¼æ¯”è¾ƒï¼Œå½¢å¦‚ <code>a &lt; x &lt; b, a &lt; x &gt;= b</code> ç­‰ï¼š</p>
<pre><code>a = 0
if 1 &lt; 2 &gt; 1.5:
    a = 1
a
1
</code></pre>
<p>ä¸‰å…ƒæ“ä½œå®è´¨æ˜¯é«˜åº¦ç®€åŒ–çš„ if ç¯å¢ƒï¼Œå½¢å¦‚ <code>X = a if flag else b</code>ï¼š</p>
<pre><code>a = 1 if 2 &lt; 1 else 2
a
2
</code></pre>
<h2 id="for-è¯­å¥">for è¯­å¥</h2>
<p>Python çš„å¾ªç¯è¯­å¥ä¸­ï¼Œåƒå…¶ä»–è¯­è¨€ä¸€æ ·ï¼Œæœ‰ <code>break</code>ï¼ˆè·³å‡ºå¾ªç¯ä½“ï¼‰ ä¸ <code>continue</code>ï¼ˆå¾ªç¯æ­¥è¿›ï¼‰ å…³é”®è¯å¯ä»¥ä½¿ç”¨ã€‚</p>
<p>for è¯­å¥å€ŸåŠ©å…³é”®è¯ in ä½¿ç”¨ï¼šï¼ˆå‡½æ•° <code>range(N, M=0, s=1)</code> æ˜¯ä¸€ä¸ªç”Ÿæˆç­‰å·®æ•°åˆ—çš„å‡½æ•°ï¼Œä½äºå·¦é—­å³å¼€åŒºé—´<code>[M,N)</code>ä¸Šä¸”å…¬å·®ä¸º sï¼‰ã€‚</p>
<pre><code>for i in range(3):
    print(i)
0
1
2
</code></pre>
<p>æ³¨æ„åˆ°å­—å…¸çš„ d.items(), d.keys(), d.values() å‘½ä»¤ä¹Ÿå¸¸å¸¸ç”¨äº for è¯­å¥ï¼š</p>
<pre><code>d = {&quot;a&quot;: 1, &quot;b&quot;: 2, &quot;c&quot;: 3}
for k, v in d.items():
    print(k, v)
b 2
c 3
a 1
</code></pre>
<p>ä»¥ä¸Šç­‰ä»·äºï¼š</p>
<pre><code>for k in d.keys():
    print(k, d[k])
b 2
c 3
a 1
</code></pre>
<p>Python ä¸­çš„ <code>for</code> è¯­å¥å¯é€‰ <code>else</code> è¯­æ³•å—ï¼Œè¡¨ç¤º <code>for</code> è¯­å¥æ­£å¸¸ç»“æŸåæ‰§è¡Œçš„å†…å®¹ï¼ˆä¸­é€” <code>break</code> ä¸å±äºæ­£å¸¸ç»“æŸï¼‰ã€‚è¿™å¯¹äºå¤„ç†ä¸€äº› break æ“ä½œå¾ˆæœ‰å¸®åŠ©ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code>a = 0
flag = 0
for i in range(5):
    if i &gt; 2:
        flag = 1
        break
if flag == 1:
    a = 1
a
1
</code></pre>
<p>è¿™åœ¨ Python ä¸­æ˜¾å¾—å¤ªå¤æ‚äº†ï¼Œç›´æ¥ä½¿ç”¨ <code>forâ€¦elseâ€¦</code>å³å¯ï¼š</p>
<pre><code>a = 1
for i in range(5):
    if i &gt; 1:
        break
else:
    a = 0
a
1
</code></pre>
<h2 id="while-è¯­å¥">while è¯­å¥</h2>
<p>while è¯­å¥çš„ <code>else</code> è¯­æ³•å—ï¼ŒæŒ‡æ˜äº†é€€å‡º while å¾ªç¯åç«‹åˆ»æ‰§è¡Œçš„å†…å®¹ï¼›å®ƒä¸æ˜¯å¿…éœ€çš„ã€‚</p>
<p>å¦‚æœä½ æƒ³è¦å°† while è¯­å¥å†…éƒ¨çš„å‚æ•°ä¼ å‡ºï¼ˆæ¯”å¦‚ä¸‹ä¾‹çš„è®¡æ•°å™¨ç»ˆå€¼ï¼‰ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸é”™çš„æ–¹æ¡ˆã€‚</p>
<pre><code>count = 1
while count &lt; 5:
    a = count
    count *= 2
else:
    b = count

print(a, b)
4 8
</code></pre>
<h2 id="åˆ—è¡¨è§£æ">åˆ—è¡¨è§£æ</h2>
<p>åˆ—è¡¨è§£ææ˜¯ä¸€ç§åˆ›å»ºåˆ—è¡¨çš„é«˜åº¦ç¼©å†™æ–¹å¼ï¼š</p>
<pre><code>lst = [x ** 2 for x in range(4)]
lst
[0, 1, 4, 9]
</code></pre>
<p>ä¹Ÿå¯ä»¥é…åˆ if è¯­å¥ï¼š</p>
<pre><code>lst = [x ** 2 for x in range(4) if x &gt; 0]
lst
[1, 4, 9]
</code></pre>
<p>ç±»ä¼¼çš„ï¼Œä¹Ÿæœ‰å­—å…¸è§£æï¼Œä»¥åŠä¸‹æ–‡ä¼šä»‹ç»çš„ç”Ÿæˆå™¨ï¼Œä¹Ÿæœ‰ç”Ÿæˆå™¨è§£æï¼ˆæŠŠå¤–å›´çš„æ‹¬å·æ¢æˆåœ†æ‹¬å·å³å¯ï¼‰ï¼š</p>
<pre><code>{n: n ** 2 for n in range(3)}
{0: 0, 1: 1, 2: 4}
</code></pre>
<h1 id="å‡½æ•°">å‡½æ•°</h1>
<p>æœ¬èŠ‚ä»‹ç» Python å‡½æ•°çš„åŸºç¡€ç‰¹ç‚¹ï¼Œä»¥åŠä¸€äº›å®ç”¨å‡½æ•°ã€‚</p>
<h2 id="å‡½æ•°å®šä¹‰ä¸åˆ¤æ–­">å‡½æ•°å®šä¹‰ä¸åˆ¤æ–­</h2>
<p>ä½¿ç”¨ <code>def</code> å…³é”®å­—ã€‚ä¸‰è¿åŒå¼•å·é—´çš„å†…å®¹è¢«è§†ä¸ºå‡½æ•°çš„å¸®åŠ©å­—ç¬¦ä¸²ï¼Œå¯ä»¥é€šè¿‡ <code>help()</code> å‘½ä»¤æŸ¥çœ‹ã€‚</p>
<pre><code>def func(a, b=0):
    &quot;&quot;&quot;
    This is a function that can meow.
    &quot;&quot;&quot;
    return &quot; &quot;.join([&quot;meow&quot;] * (a + b))
</code></pre>
<p>è°ƒç”¨å‡½æ•°ï¼š</p>
<pre><code>func(2)  # å•å‚æ•°ï¼Œä»… a 
'meow meow'
func(2, 3)  # åŒå‚æ•°ï¼Œ a ä¸ b éƒ½è¢«ä¼ å…¥
'meow meow meow meow meow'
help(func)
Help on function func in module __main__:

func(a, b=0)
    This is a function that can meow.
</code></pre>
<p>é€šè¿‡ <code>callable()</code> å¯ä»¥åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ä¸€ä¸ªå¯è°ƒç”¨çš„å‡½æ•°ï¼š</p>
<pre><code>callable(func)
True
</code></pre>
<h2 id="ä¸å®šå‚å‡½æ•°">ä¸å®šå‚å‡½æ•°</h2>
<p>åˆ©ç”¨åºåˆ—ï¼ˆæˆ–å…ƒç»„ï¼‰ä¸å­—å…¸ï¼Œå‘å‡½æ•°ä¼ å‚ã€‚å‰è€…åœ¨ä¼ å…¥æ—¶éœ€è¦åŠ ä¸Šä¸€ä¸ªæ˜Ÿå·ï¼Œåè€…éœ€è¦ä¸¤ä¸ªã€‚</p>
<pre><code>lst = [1, 3, 4]
d = {&quot;a&quot;: 2, &quot;b&quot;: 3, &quot;c&quot;: 5}
print(&quot;{}+{}={}&quot;.format(*lst), &quot;{a}+{b}={c}&quot;.format(**d))
1+3=4 2+3=5
</code></pre>
<h2 id="zip-å‡½æ•°">zip å‡½æ•°</h2>
<p>zip() å‡½æ•°çš„ä½œç”¨æ˜¯â€œåˆå¹¶â€å¤šä¸ªåˆ—è¡¨ä¸ºä¸€ä¸ªã€‚å…¶è¿”å›å€¼æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œåˆ—è¡¨å†…çš„å…ƒç´ ç±»å‹æ˜¯å…ƒç»„ã€‚å¦‚æœå¾…åˆå¹¶çš„åˆ—è¡¨é•¿åº¦ä¸åŒï¼Œä»¥æœ€çŸ­çš„ä¸ºå‡†ã€‚</p>
<pre><code>a = [1, 2, 3, 4]
b = [5 ,6, 7]
c = &quot;abcd&quot;
list(zip(a, b, c))
[(1, 5, 'a'), (2, 6, 'b'), (3, 7, 'c')]
</code></pre>
<p>å®ƒæ¯”è¾ƒå¸¸ç”¨äºäº¤æ¢å­—å…¸çš„é”®ä¸å€¼ï¼š</p>
<pre><code>dict(zip(d.values(), d.keys()))
{2: 'a', 3: 'b', 5: 'c'}
</code></pre>
<h2 id="lambda-å‡½æ•°">lambda å‡½æ•°</h2>
<p>ä¸€ç§åŒ¿åå‡½æ•°çš„å£°æ˜æ–¹å¼ã€‚å¦‚æœä½ ä½¿ç”¨è¿‡ <code>MATLAB</code>ï¼Œä½ å¯èƒ½ç†Ÿæ‚‰è¿™ä¸€ç±»æ¦‚å¿µã€‚</p>
<pre><code>func = lambda x, y: x + y
func(2, 5)
7
</code></pre>
<h2 id="map-å‡½æ•°">map å‡½æ•°</h2>
<p><code>map()</code> èƒ½å¤Ÿå¯¹ä¼ å…¥çš„åºåˆ—è¿›è¡Œä¾æ¬¡æ“ä½œï¼Œå¹¶å°†ç»“æœè¿”å›ä¸ºä¸€ä¸ªå¯è½¬æ¢ä¸ºåˆ—è¡¨çš„ <code>map</code> å¯¹è±¡ã€‚é€šå¸¸åˆ—è¡¨è§£æï¼ˆæˆ–ç”Ÿæˆå™¨è§£æï¼‰å¯ä»¥å®ç°ä¸å…¶åŒæ ·çš„å·¥ä½œã€‚</p>
<pre><code>lst = list(map(lambda x: x + 1, range (5)))
print(lst)
[1, 2, 3, 4, 5]
f = lambda x: x + 1
[f(x) for x in range(5)]
[1, 2, 3, 4, 5]
</code></pre>
<h2 id="filter-å‡½æ•°">filter å‡½æ•°</h2>
<p>ç»™å®šåºåˆ—ï¼Œå¯¹äºæ»¡è¶³æŸè§„åˆ™çš„éƒ¨åˆ†ï¼ˆå³ Trueï¼‰ï¼Œäºˆä»¥è¿”å›ã€‚</p>
<pre><code>list(filter(lambda x: x &gt; 0, range(-3, 3)))
[1, 2]
</code></pre>
<h2 id="reduce-å‡½æ•°">reduce å‡½æ•°</h2>
<p>è¯¥å‡½æ•°åœ¨ Python 2 ä¸­æ˜¯å¯ä»¥ç›´æ¥è°ƒç”¨çš„ï¼Œä½†åœ¨ Python 3 ä¸­éœ€è¦ä» <code>functools</code> æ¨¡å—è¿›è¡Œè°ƒç”¨ã€‚</p>
<pre><code>from functools import reduce
reduce(lambda x, y: x + y, range (5))  # 0+1+2+3+4
10
</code></pre>
<h2 id="enumerate-å‡½æ•°">enumerate å‡½æ•°</h2>
<p>å®ƒå…è®¸ä½ åƒ d.items() é‚£æ ·ï¼Œç”¨ç±»ä¼¼çš„æ–¹å¼æ“ä½œåˆ—è¡¨ï¼š</p>
<pre><code>a = [1, 3, 5]
for i, v in enumerate(a):
    print(&quot;lst[{}] = {}&quot;.format(i, v))

lst[0] = 1
lst[1] = 3
lst[2] = 5
</code></pre>
<h1 id="è£…é¥°å™¨ç®—å­">è£…é¥°å™¨ï¼šç®—å­</h1>
<p>è£…é¥°å™¨æ˜¯å‡½æ•°çš„å‡½æ•°â€”â€”ä¼ å…¥çš„å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›çš„å€¼ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ã€‚ç›¸å½“äºä¸€ä¸ªå‡½æ•°é›†åˆ°å¦ä¸€ä¸ªå‡½æ•°é›†çš„æ˜ å°„ï¼Œå¯ä»¥ç†è§£ä¸ºæ•°å­¦æ„ä¹‰ä¸Šçš„ç®—å­ã€‚</p>
<p>é¦–å…ˆæ¥çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼šå‡½æ•°å¯ä»¥è¢«èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ã€‚</p>
<pre><code>def pyrint(data=&quot;Python&quot;):
    return data.upper()

f = pyrint
f()
'PYTHON'
</code></pre>
<p>è¿˜å¯ä»¥é€šè¿‡ <code>__name__</code> æ¥å¾—åˆ°å½“å‰å‡½æ•°çš„åç§°ï¼š</p>
<pre><code>f.__name__
'pyrint'
</code></pre>
<p>é‚£ä»€ä¹ˆæ—¶å€™éœ€è¦è£…é¥°å™¨å‘¢ï¼Ÿæ¯”å¦‚åœ¨å‡½æ•°éœ€è¦è¢«é‡ç”¨ã€ä½†åˆä¸èƒ½ç›´æ¥æ”¹å†™ <code>def</code>çš„åœºåˆï¼ˆåœ¨ç»´æŠ¤ä¸­åº”è¯¥ä¸å°‘è§å§ï¼ï¼‰ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨è¿”å›å€¼ä¹‹å‰ï¼ŒæŠŠå‡½æ•°åä¹Ÿæ‰“å°å‡ºæ¥ï¼š</p>
<pre><code>def showname(func):
    def subfunc(*args, **kwarg):
        print(&quot;FUNCTION {} called.&quot;.format(func.__name__))
        return func(*args, **kwarg)
    return subfunc
</code></pre>
<p>è¿™æ ·å¦‚æœæˆ‘ä»¬é€šè¿‡ <code>showname(pyrint)</code> è¿™ç§å½¢å¼ï¼Œå°±èƒ½å¤Ÿåœ¨ <code>pyrint</code> å‡½æ•°è¢«è°ƒç”¨ä¹‹å‰ï¼Œé¢å¤–æ‰“å°ä¸€è¡Œå†…å®¹ã€‚</p>
<p>æƒ³è¦æ”¹åŠ¨è¯¥å‡½æ•°ï¼Œä¸éœ€è¦æ”¹åŠ¨ def è¯­å¥ä»¥ä¸‹çš„å†…å®¹ï¼Œåªéœ€è¦ç”¨ <code>@showname</code> å‘½ä»¤æ¥åº”ç”¨è¿™ä¸ªè£…é¥°å™¨ï¼š</p>
<pre><code>@showname
def pyrint(data=&quot;Python&quot;):
    return data.upper()
pyrint()
FUNCTION pyrint called.

'PYTHON'
</code></pre>
<p>å¦‚æœè£…é¥°å™¨éœ€è¦ä¼ é€’å‚æ•°ï¼Œé‚£ä¹ˆï¼Œéœ€è¦åœ¨å®šä¹‰æ—¶ï¼Œå¤–å±‚å†åµŒå¥—ä¸€ä¸ªå‡½æ•°ï¼š</p>
<pre><code>def showname(num=1):
    def decorator(func):
        def subfunc(*args, **kwarg):
            print(&quot;Call time: {}. FUNCTION {} called.&quot;.format(num, func.__name__))
            return func(*args, **kwarg)
        return subfunc
    return decorator

@showname(2)
def pyrint(data=&quot;Python&quot;):
    return data.upper()

pyrint()
Call time: 2. FUNCTION pyrint called.

'PYTHON'
</code></pre>
<p>ä¸è¿‡è£…é¥°å™¨è¢«åº”ç”¨äºå‡½æ•°å®šä¹‰ä¹‹å‰æ—¶ï¼Œå‡½æ•°çš„ <code>__name__</code> å±æ€§ä¼šæ”¹å˜ã€‚æ¯”å¦‚ä¸Šä¾‹ï¼š</p>
<pre><code>pyrint.__name__
'subfunc'
ä½¿ç”¨æ¨¡å— functools æ¥è§£å†³è¿™ä¸€é—®é¢˜ï¼š

import functools

def showname(num=1):
    def decorator(func):
        @functools.wraps(func)  # åŠ ä¸Šè¿™ä¸€è¡Œ
        def subfunc(*args, **kwarg):
            print(&quot;Call time: {}. FUNCTION {} called.&quot;.format(num, func.__name__))
            return func(*args, **kwarg)
        return subfunc
    return decorator

@showname(2)
def pyrint(data=&quot;Python&quot;):
    return data.upper()

pyrint.__name__
'pyrint'
</code></pre>
<h1 id="è¿­ä»£å™¨-itertools">è¿­ä»£å™¨ [itertools]</h1>
<p>è¿­ä»£å™¨ä¸ç”Ÿæˆå™¨åœ¨å†…å­˜ä¼˜åŒ–ä¸Šå¾ˆæœ‰æ„ä¹‰ã€‚</p>
<h2 id="è¿­ä»£å™¨">è¿­ä»£å™¨</h2>
<p>è¿­ä»£å™¨æœ€æ˜¾è‘—çš„ç‰¹å¾æ˜¯æ‹¥æœ‰ <code>__iter__()</code> å’Œ <code>__next__()</code> æ–¹æ³•ï¼›å®ƒåƒä¸€ä¸ªé“¾è¡¨ã€‚å¦‚æœå®ƒæŒ‡å‘æœ«å°¾ï¼Œé‚£ä¹ˆå†æ¬¡æ‰§è¡Œ <code>__next__()</code> æ—¶ä¼šæŠ¥é”™ã€‚ä¸€ä¸ªä¾‹å­ï¼š</p>
<pre><code>a = [1, 2, 3]
b = iter(a)
print(b.__next__(), b.__next__())  # æˆ–è€…ä½¿ç”¨ next(b)
1 2
</code></pre>
<p>å®é™…ä¸Šï¼ŒPython 3 å†…ç½®äº†ä¸€ä¸ª <code>itertools</code> çš„åº“ï¼Œé‡Œé¢æœ‰è¯¸å¦‚ <code>cycle</code> å’Œ <code>count</code> ç­‰é€‚ç”¨äºè¿­ä»£å™¨çš„å‡½æ•°ï¼š</p>
<pre><code>import itertools

# count: ç»™å®šé¦–é¡¹ä¸å…¬å·®çš„æ— ç©·ç­‰å·®æ•°åˆ—
p = itertools.count(start = 1, step = 0.5)
print(p.__next__(), p.__next__())

# cycle: å‘¨æœŸå¾ªç¯çš„æ— ç©·åºåˆ—
p = itertools.cycle(list(&quot;AB&quot;))
print(next(p), next(p), next(p))

# islice: ä»æ— ç©·åºåˆ—ä¸­åˆ‡ç‰‡
p = itertools.cycle(list(&quot;AB&quot;))
print(list(itertools.islice(p, 0, 4)))
1 1.5
A B A
['A', 'B', 'A', 'B']
</code></pre>
<p>è¯·æ—¶åˆ»æ³¨æ„å½“å‰æŒ‡å‘çš„è¿­ä»£å™¨ä½ç½®â€”â€”å¤±ä¹‹æ¯«å˜ï¼Œè°¬ä»¥åƒé‡Œã€‚</p>
<h2 id="ç”Ÿæˆå™¨">ç”Ÿæˆå™¨</h2>
<p>ç”Ÿæˆå™¨æ˜¯è¿­ä»£å™¨çš„ä¸€ç§ï¼Œå…¶å®è´¨æ˜¯å®šä¹‰ä¸­å«æœ‰ yield å…³é”®è¯çš„å‡½æ•°ã€‚å®ƒæ²¡æœ‰ return() è¯­å¥ã€‚</p>
<p>ç”Ÿæˆå™¨å¯ä»¥ç›´æ¥ä½¿ç”¨ç±»ä¼¼åˆ—è¡¨è§£æçš„æ–¹å¼ï¼Œç§°ä¸ºç”Ÿæˆå™¨è§£æã€‚ä¾‹å¦‚ï¼š(i for i in range(10)ã€‚</p>
<pre><code>def Fib(N):  # æ–æ³¢é‚£å¥‘æ•°åˆ—
    n, former, later = 0, 0, 1
    while n &lt; N:
        yield later
        former, later = later, later + former
        n += 1

list(Fib(5))
[1, 1, 2, 3, 5]
</code></pre>
<p>ä¸Šä¾‹ä¸æ™®é€šçš„å†™æ³•çœ‹ä¸Šå»å·®åˆ«ä¸å¤§ï¼Œä½†å®é™…ä¸Šå¯ä»¥å°† while è¯­å¥æ”¹å†™ä¸º <code>while True</code>ï¼Œåˆ é™¤å˜é‡ nï¼Œåœ¨å¤–éƒ¨å€ŸåŠ© itertools çš„ <code>islice</code> å‡½æ•°æ¥æˆªå–ã€‚è¿™åœ¨å‡½æ•°å®šä¹‰æ—¶å¯¹ä»£ç çš„å‹ç¼©æ˜¯æ˜¾ç„¶çš„ã€‚</p>
<pre><code>def iterFib():
    former, later = 0, 1
    while True:
        yield later
        former, later = later, later + former

list(itertools.islice(iterFib(), 0, 5))
[1, 1, 2, 3, 5]
</code></pre>
<h1 id="é”™è¯¯try-è¯­å¥">é”™è¯¯ï¼š<code>try()</code> è¯­å¥</h1>
<p>å¸¸è§çš„é”™è¯¯æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p>
<ul>
<li>
<p>ZeroDivisionError: é™¤æ•°ä¸º 0.</p>
</li>
<li>
<p>SyntaxErrorï¼šè¯­æ³•é”™è¯¯ã€‚</p>
</li>
<li>
<p>IndexErrorï¼šç´¢å¼•è¶…ç•Œã€‚</p>
</li>
<li>
<p>KeyErrorï¼šå­—å…¸é”®ä¸å­˜åœ¨ã€‚</p>
</li>
<li>
<p>IOErrorï¼šè¯»å†™é”™è¯¯ã€‚</p>
<p>try() è¯­å¥çš„å¸¸è§å†™æ³•ï¼š</p>
<pre><code>try:
    a = 1 
except ZeroDivisionError as e:
    print(e)
    exit()
else:  # å¦‚æœæ— é”™è¯¯ï¼Œæ‰§è¡Œ
    print(a)
finally:  # ä¸ç®¡æœ‰æ— é”™è¯¯å‡æ‰§è¡Œ
    print(&quot;-- End --&quot;)
1
-- End --
</code></pre>
</li>
</ul>
<p>å…¶ä¸­ï¼Œ<code>else</code> ä¸ <code>finally</code> è¯­å¥éƒ½ä¸æ˜¯å¿…éœ€çš„ã€‚å¦‚æœä¸æƒ³è¾“å‡ºé”™è¯¯ä¿¡æ¯ã€æˆ–ä¸èƒ½é¢„å…ˆåˆ¤æ–­å¯èƒ½çš„é”™è¯¯ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨ä»…å« exit() è¯­å¥çš„ <code>except</code> å—ã€‚</p>
<h2 id="å¤šä¸ª-except-å—">å¤šä¸ª except å—</h2>
<p>ä¸€ä¸ª try è¯­æ³•å—æ˜¯å¯ä»¥è·Ÿç€å¤šä¸ª <code>except</code> çš„ï¼›å¦‚æœé å‰çš„ except æ•è·äº†é”™è¯¯ï¼Œä¹‹åçš„å°±ä¸ä¼šè¿è¡Œã€‚ è¿™ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœé”™è¯¯ä¹‹é—´æœ‰ç»§æ‰¿å…³ç³»æ—¶ï¼Œå­é”™è¯¯éœ€è¦æ”¾åœ¨çˆ¶é”™è¯¯ä¹‹å‰å°è¯• exceptï¼Œå¦åˆ™å­é”™è¯¯æ°¸è¿œä¹Ÿä¸å¯èƒ½è¢«æ•è·ã€‚</p>
<p>æ¯”å¦‚ä¸Šä¸€èŠ‚çš„ä¾‹å­ä¸­ï¼Œ<code>ZeroDivisionError</code> æ˜¯ <code>ArithmeticError</code> ä¸‹çš„å­é”™è¯¯ï¼Œè€Œ <code>ArithmeticError</code> åˆæ˜¯ Exception ä¸‹çš„å­é”™è¯¯ï¼ˆå½“ä¸æ¸…æ¥šé”™è¯¯çš„ç±»å‹æ—¶ï¼ŒException å¯ä»¥æ•è·ç»å¤§å¤šæ•°é”™è¯¯ï¼‰ã€‚å…³äºé”™è¯¯çš„ç»§æ‰¿å…³ç³»ï¼Œå‚è€ƒï¼šPython - Exception Hierarchy å®˜æ–¹é¡µé¢ã€‚</p>
<p>ä¸€ä¸ªä¾‹å­ï¼š</p>
<pre><code>try:
    a = 1 / 0
except Exception:
    print(&quot;Exception&quot;)
    exit()
except ZeroDivisionError:
    print(&quot;ZeroDivisionError&quot;)
    exit()
else:
    print(&quot;No error.&quot;)
finally:
    print(&quot;-- End --&quot;)
è¾“å‡º Exception ä¸ â€“ End â€“ã€‚
</code></pre>
<h2 id="é”™è¯¯çš„æ•è·">é”™è¯¯çš„æ•è·</h2>
<p>é”™è¯¯åœ¨å¾ˆå¤šåœ°æ–¹éƒ½å¯èƒ½å‘ç”Ÿï¼Œé‚£æ˜¯å¦éœ€è¦åœ¨å¯èƒ½çš„åœ°æ–¹éƒ½åŠ ä¸Š try è¯­å¥å‘¢ï¼Ÿå½“ç„¶ä¸æ˜¯ã€‚å»ºè®®åªåœ¨ä¸»ä»£ç ä¸­åŠ å…¥ try è¯­å¥ï¼Œå› ä¸º Python ä¼šè‡ªåŠ¨è·Ÿè¸ªåˆ°é”™è¯¯äº§ç”Ÿçš„æºå¤´ä½•åœ¨ã€‚</p>
<h2 id="é”™è¯¯çš„æŠ›å‡ºåŠä¸ŠæŠ›">é”™è¯¯çš„æŠ›å‡ºåŠä¸ŠæŠ›</h2>
<p>æœ‰æ—¶å€™æˆ‘ä»¬æƒ³äººä¸ºæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œè¿™æ˜¯ä½¿ç”¨ <code>raise</code> å³å¯ï¼š</p>
<pre><code># raise TypeError(&quot;Wrong type.&quot;)
</code></pre>
<p>å¦‚æœåœ¨å‡½æ•°ä¸­æ²¡æœ‰å¤„ç†é”™è¯¯çš„è¯­å¥ï¼Œå¯èƒ½åœ¨æ•è·é”™è¯¯åå°†å…¶ä¸ŠæŠ›ã€‚è®°ä½ï¼Œæ•è·é”™è¯¯åªæ˜¯ä¸ºäº†è®°å½•é”™è¯¯çš„äº§ç”Ÿï¼Œå¹¶ä¸æ„å‘³è€…å¿…é¡»åŸåœ°è§£å†³é”™è¯¯ã€‚</p>
<pre><code>def makeerror(n):
    if n == 0:
        raise ValueError(&quot;Divided by zero.&quot;)
    return 1 / n

def callerror():
    try:
        makeerror(0)
    except ValueError as e:
        print(&quot;ValueError detected.&quot;)
        raise

# è¾“å‡º &quot;ValueError detected.&quot; å¹¶æ‰“å°é”™è¯¯æ—¥å¿—
# callerror()
</code></pre>
<p>ä¸Šé¢çš„ <code>raise</code> å‘½ä»¤æ²¡æœ‰ç´§è·Ÿä»»ä½•å‚æ•°ï¼Œè¡¨ç¤ºå°†é”™è¯¯åŸæ ·ä¸ŠæŠ›ã€‚ä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨æŒ‡å®šä¸ŠæŠ›çš„é”™è¯¯ç±»å‹ï¼Œå¹¶ä¸éœ€è¦ä¸åŸé”™è¯¯ç±»å‹ä¸€è‡´ã€‚ç”šè‡³ä½ å¯ä»¥å®šä¹‰ä¸€ä¸ªé”™è¯¯ï¼ˆç»§æ‰¿æŸä¸€é”™è¯¯ç±»ï¼‰ï¼š</p>
<pre><code>class MyError(ValueError):
    print(&quot;This is MyError.&quot;)

# raise MyError
This is MyError.
</code></pre>
<h1 id="æ–‡ä»¶è¯»å†™">æ–‡ä»¶è¯»å†™</h1>
<p>open() å‡½æ•°ç”¨äºæ–‡ä»¶çš„è¯»å†™æ“ä½œã€‚ä¸€èˆ¬æˆ‘ä»¬ä¼šåœ¨æ“ä½œæ–‡ä»¶æ—¶ï¼Œå¼•å…¥ os æ¨¡å—ï¼ˆos æ¨¡å—çš„ç”¨æ³•å‚è€ƒâ€œå¸¸ç”¨æ¨¡å—â€ä¸€èŠ‚çš„å†…å®¹ï¼‰ã€‚</p>
<pre><code>import os
</code></pre>
<p><code>open()</code> å‡½æ•°å¸¸å¸¸é…åˆ <code>with</code> è¯­æ³•å—è¿›è¡Œä½¿ç”¨ï¼Œå®ƒä¼šåœ¨è¯­æ³•å—ç»“æŸæ—¶è‡ªåŠ¨å…³é—­æ–‡ä»¶ã€‚è¯¥å‡½æ•°ï¼š</p>
<pre><code>open(file, mode=&quot;r&quot;, encoding=None)
</code></pre>
<p>ç¬¬ä¸€å‚æ•°æ˜¯åŒ…å«æ–‡ä»¶åçš„è·¯å¾„ï¼ˆä¼ å…¥åŸºäºå½“å‰ç›®å½•çš„ç›¸å¯¹è·¯å¾„ï¼Œä¼ å…¥æˆ–è€…ç»å¯¹è·¯å¾„ï¼‰ï¼Œmode å‚æ•°æ˜¯è¯»å†™æ“ä½œæ–¹å¼ï¼›<code>encoding</code> æ˜¯ç¼–ç ç±»å‹ï¼Œä¸€èˆ¬å–<code>â€utf8â€</code>ã€‚å…¶ä¸­ï¼Œè¯»å†™æ“ä½œæ–¹å¼å¸¸ç”¨çš„æœ‰ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:center">å‚æ•°</th>
<th style="text-align:center">å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">â€œrâ€</td>
<td style="text-align:center">ï¼ˆé»˜è®¤ï¼‰è¯»ã€‚</td>
</tr>
<tr>
<td style="text-align:center">â€œwâ€</td>
<td style="text-align:center">å†™ã€‚è¯¥æ¨¡å¼ä¼šè¦†ç›–åŸæœ‰å†…å®¹ï¼›å¦‚æ–‡ä»¶ä¸å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨æ–°å»ºã€‚</td>
</tr>
<tr>
<td style="text-align:center">â€œxâ€</td>
<td style="text-align:center">åˆ›å»ºæ–°æ–‡ä»¶å¹¶å†™å…¥ã€‚</td>
</tr>
<tr>
<td style="text-align:center">â€œaâ€</td>
<td style="text-align:center">åœ¨å·²æœ‰æ–‡ä»¶çš„å°¾éƒ¨è¿½åŠ ã€‚</td>
</tr>
</tbody>
</table>
<h2 id="ä¸€èˆ¬è¯»å†™æ“ä½œread-readlines">ä¸€èˆ¬è¯»å†™æ“ä½œï¼š<code>read() / readlines()</code></h2>
<p>å‡½æ•° <code>read()</code> å°†æ•´ä¸ªæ–‡ä»¶è¯»ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p>
<pre><code>datapath = os.path.join(os.getcwd(), &quot;data&quot;, &quot;iris.data.csv&quot;)
with open(datapath, &quot;r&quot;, encoding=&quot;utf8&quot;) as f:
    rawtext = f.read()

rawtext[:200]
'5.1,3.5,1.4,0.2,Iris-setosa\n4.9,3.0,1.4,0.2,Iris-setosa\n4.7,3.2,1.3,0.2,Iris-setosa\n4.6,3.1,1.5,0.2,Iris-setosa\n5.0,3.6,1.4,0.2,Iris-setosa\n5.4,3.9,1.7,0.4,Iris-setosa\n4.6,3.4,1.4,0.3,Iris-setosa\n5.0,'
</code></pre>
<p>å‡½æ•° <code>readlines()</code> å°†æ•´ä¸ªæ–‡ä»¶è¯»ä¸ºä¸€ä¸ªåˆ—è¡¨ï¼Œæ–‡ä»¶çš„æ¯ä¸€è¡Œå¯¹åº”åˆ—è¡¨çš„ä¸€ä¸ªå…ƒç´ ã€‚</p>
<pre><code>with open(datapath, &quot;r&quot;, encoding=&quot;utf8&quot;) as f:
    rawtext = f.readlines()

rawtext[:3]
['5.1,3.5,1.4,0.2,Iris-setosa\n',
 '4.9,3.0,1.4,0.2,Iris-setosa\n',
 '4.7,3.2,1.3,0.2,Iris-setosa\n']
</code></pre>
<p>ä¸Šè¿°çš„ <code>readlines()</code> å‡½æ•°å®è´¨ç­‰åŒäºåˆ—è¡¨è§£æï¼š</p>
<pre><code>with open(datapath, &quot;r&quot;, encoding=&quot;utf8&quot;) as f:
    rawtext = [line for line in f]

rawtext[:3]
['5.1,3.5,1.4,0.2,Iris-setosa\n',
 '4.9,3.0,1.4,0.2,Iris-setosa\n',
 '4.7,3.2,1.3,0.2,Iris-setosa\n']
</code></pre>
<p>æ–‡ä»¶å†™å…¥ï¼Œä½¿ç”¨ <code>write()</code> å‡½æ•°ã€‚ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p>
<pre><code>with open(datapath, &quot;w&quot;) as f:
   f.write(&quot;Sometimes naive.&quot;)
</code></pre>
<h2 id="å¤§æ–‡ä»¶è¯»å–readline">å¤§æ–‡ä»¶è¯»å–ï¼š<code>readline()</code></h2>
<p>å¦‚æœæ–‡ä»¶æ¯”è¾ƒå¤§ï¼Œä½¿ç”¨ <code>read()/readlines()</code> å‡½æ•°ç›´æ¥è¯»å…¥å¯èƒ½ä¼šå ç”¨å¤ªå¤šå†…å­˜ã€‚æ¨èä½¿ç”¨å‡½æ•° <code>readline()</code>ï¼Œä¸€ç§è¿­ä»£å™¨å¼çš„è¯»å–æ–¹æ³•ã€‚</p>
<pre><code>with open(datapath, &quot;r&quot;, encoding=&quot;utf8&quot;) as f:
    print(f.readline().strip())
    print(f.readline().strip())
5.1,3.5,1.4,0.2,Iris-setosa
4.9,3.0,1.4,0.2,Iris-setosa
</code></pre>
<p>ä½ ä¼šå‘ç°ä¸¤æ¬¡ç»“æœæ˜¯ä¸åŒçš„ï¼Œè¿™æ˜¯å› ä¸ºè¿­ä»£å™¨å†…éƒ¨çš„â€œæŒ‡é’ˆâ€å‘åç§»åŠ¨äº†ã€‚</p>
<p>æ€æ ·è·å– / ç§»åŠ¨â€œæŒ‡é’ˆâ€çš„ä½ç½®å‘¢ï¼Ÿä½¿ç”¨ tell() / seek() å‘½ä»¤ã€‚</p>
<pre><code>with open(datapath, &quot;r&quot;, encoding=&quot;utf8&quot;) as f:
    print(f.tell(), f.readline().strip())
    print(f.tell(), f.readline().strip())
    f.seek(0)  # å›åˆ°æ–‡ä»¶å¤´
    print(f.tell(), f.readline().strip())
0 5.1,3.5,1.4,0.2,Iris-setosa
28 4.9,3.0,1.4,0.2,Iris-setosa
0 5.1,3.5,1.4,0.2,Iris-setosa
</code></pre>
<h1 id="ç±»">ç±»</h1>
<p>ç±»çš„æˆå‘˜åŒ…æ‹¬å±æ€§ï¼ˆ<code>attribute</code>ï¼‰ä¸æ–¹æ³•ï¼ˆ<code>method</code>ï¼‰ä¸¤ç§ã€‚ä¾‹å­ï¼š</p>
<pre><code>class MyClass:
    &quot;&quot;&quot;
    This is a class that can meow!
    &quot;&quot;&quot;
    animal = &quot;cat&quot;  # An attribute
    def talk(self):  # A method
        return &quot;Meow&quot;

# An instance of the class
a = MyClass()
print(a.animal, a.talk())
cat Meow
</code></pre>
<p>ä¸Šä¾‹ä¸­çš„ <code>self</code> è¡¨ç¤ºç±»çš„å®ä¾‹ï¼Œæ‰€æœ‰ç±»å†…éƒ¨çš„æ–¹æ³•éƒ½éœ€è¦æŠŠè¯¥å‚æ•°æ”¾åœ¨é¦–ä½ï¼ˆä½ ä¹Ÿä¸å¯ä¸ç”¨ self è€Œä½¿ç”¨ this ç­‰ï¼Œä½†æ˜¯ <code>self</code> æ˜¯æƒ¯ä¾‹ï¼‰ã€‚ä¾‹å¦‚ï¼Œ<code>self.animal</code> å°±è¡¨ç¤ºäº†å®ä¾‹çš„ animal å±æ€§ã€‚è¿™ä¸ C# ç­‰è¯­è¨€ä¸­çš„â€œthis.animalâ€æ˜¯ç±»ä¼¼çš„ã€‚</p>
<p>ä¸‹ä¾‹è¯æ˜äº† <code>self</code> ä»£è¡¨çš„å®è´¨æ˜¯ç±»çš„å®ä¾‹ï¼Œè€Œä¸æ˜¯ç±»æœ¬èº«ã€‚</p>
<pre><code>class EgClass:
    def __init__(self):
        print(self)  # å®ä¾‹ï¼Œæœ‰å¯¹åº”åœ°å€
        print(self.__class__)  # ç±»

a = EgClass()
&lt;__main__.EgClass object at 0x000002531C0AF860&gt;
&lt;class '__main__.EgClass'&gt;
</code></pre>
<h2 id="æ„é€ å‡½æ•°__init__">æ„é€ å‡½æ•°ï¼š<code>__init__()</code></h2>
<p>ç±»çš„æ„é€ å‡½æ•°æ˜¯ <code>__init__()</code> ï¼ˆå·¦å³å‡ä¸ºåŒä¸‹åˆ’çº¿ï¼‰ï¼Œç”¨äºåˆå§‹åŒ–å®ä¾‹ã€‚åœ¨å£°æ˜å®ä¾‹æ—¶ï¼Œè¯¥å‡½æ•°è‡ªåŠ¨è¢«è°ƒç”¨ã€‚</p>
<pre><code>class MyClass2:
    def __init__(self, animal=&quot;cat&quot;):
        self.animal = animal

a = MyClass2(&quot;dog&quot;)
a.animal
'dog'
</code></pre>
<h2 id="å°è£…">å°è£…</h2>
<p>ç±»çš„é‡è¦ç‰¹æ€§æ˜¯å°è£…æ€§ï¼Œå³éƒ¨åˆ†å˜é‡åªèƒ½åœ¨å…¶å†…éƒ¨ä¿®æ”¹æˆ–è®¿é—®ï¼Œä¸èƒ½ä»ç±»çš„å¤–éƒ¨è¿›è¡Œå¤„ç†ã€‚Python ä¸­çš„å°è£…éå¸¸ç®€å•ï¼Œåªè¦æŠŠå±æ€§æˆ–æ–¹æ³•çš„åç§°å‰ç¼€è®¾ç½®ä¸ºåŒä¸‹åˆ’çº¿å³å¯ã€‚</p>
<p>ç”±æ­¤å¯è§ï¼Œæ„é€ å‡½æ•° <code>__init__()</code> æ˜¯æœ€åŸºæœ¬çš„ä¸€ä¸ªç§æœ‰æ–¹æ³•ã€‚ä¸€ä¸ªä¾‹å­ï¼š</p>
<pre><code>class MyClass3:
    def __init__(self, animal=&quot;cat&quot;):
        self.__animal = animal
        self.__foo()
    def __foo(self):
        self.__animal = &quot;rabbit&quot;
    def show(self):
        print(self.__animal)

a = MyClass3(&quot;dog&quot;)
a.show()
rabbit
</code></pre>
<p>å¦‚æœæƒ³ç›´æ¥è°ƒç”¨ <code>__foo() æˆ–è€… __animal</code>ï¼Œéƒ½ä¼šè¢«ç¦æ­¢ï¼Œäº§ç”Ÿ <code>AttributeError</code>ã€‚</p>
<pre><code># a.__animal  # AttributeError
</code></pre>
<p>è¦æ³¨æ„ï¼Œå‰åå‡æ·»åŠ äº†åŒä¸‹åˆ’çº¿çš„å±æ€§ï¼Œå¦‚ <strong>name</strong> ï¼Œè¡¨ç¤ºç‰¹æ®Šå±æ€§è€Œä¸æ˜¯ç§æœ‰å±æ€§ï¼Œæ˜¯å¯ä»¥ä»å¤–éƒ¨è®¿é—®çš„ã€‚</p>
<h2 id="ç»§æ‰¿">ç»§æ‰¿</h2>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªè‘—åçš„çŒ«ä¸ç‹—çš„ä¾‹å­ï¼›ç±» Cat ä¸ Dog éƒ½ç»§æ‰¿è‡ª Animalï¼ŒåŒæ—¶ä¹Ÿéƒ½é‡è½½äº†æ–¹æ³• talk()ã€‚</p>
<pre><code>class Animal:
    def talk(self):
        pass # è¡¨ç¤ºå®šä¹‰ç•™ç©º

class Cat(Animal): # ä»Animal ç»§æ‰¿
    def talk(self): # é‡å†™talk()
        print('Meow')

class Dog(Animal):
    def talk(self):
        print('Woof')

a, b = Cat(), Dog()
a.talk() # 'Meow'
b.talk() # 'Woof'
Meow
Woof
</code></pre>
<p>é€šè¿‡ <code>isinstance()</code> å‡½æ•°å¯ä»¥åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯æŸä¸ªç±»ï¼ˆæˆ–å…¶å­ç±»ï¼‰çš„å®ä¾‹ï¼š</p>
<pre><code>print(isinstance(a, Cat), isinstance(a, Animal))
True True
æˆ–è€…ï¼š

type(a).__name__
'Cat'
</code></pre>
<p>å½“ç„¶ï¼Œç±»ä¹Ÿå¯ä»¥å¤šç»§æ‰¿ã€‚å†™åœ¨å·¦ä¾§çš„ç±»çš„å±æ€§ä¸æ–¹æ³•ï¼Œåœ¨ç»§æ‰¿æ—¶ä¼šè¢«ä¼˜å…ˆé‡‡ç”¨ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code>class Pet:
    def talk(self):
        print(&quot;Pet&quot;)

class Cat2(Pet, Cat):
    pass

a = Cat2()
a.talk()
Pet
</code></pre>
<h2 id="property-è£…é¥°å™¨">@property è£…é¥°å™¨</h2>
<p>è£…é¥°å™¨ <code>@property</code>å¯ä»¥è¢«ç”¨äºé™åˆ¶ç±»å±æ€§çš„è¯»å†™è¡Œä¸ºã€‚æ¯”å¦‚ï¼Œä¸€ä¸ªæ™®é€šçš„ç±»ï¼Œå¦‚æœæƒ³å°è£…ä¸€ä¸ªå±æ€§ï¼Œå´å…è®¸ä»å¤–éƒ¨è¯»å–å®ƒçš„å€¼ï¼Œä¸€èˆ¬æˆ‘ä»¬ç”¨ <code>getter</code> å‡½æ•°å®ç°ï¼š</p>
<pre><code>class Person:
    def __init__(self):
        self.__name = &quot;Py&quot;
    def get_name(self):
        return self.__name
a = Person()
a.get_name()
'Py'
</code></pre>
<p>ä¸å¾—ä¸è¯´è¿™å®åœ¨æ˜¯éº»çƒ¦äº†ï¼Œä»£ç é‡Œä¸€å † get å‡½æ•°æ»¡å¤©é£å¹¶ä¸ä»¤äººæ„‰å¿«ã€‚è€Œä¸”è¿˜ä¸èƒ½å¿˜è®°å®ƒæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œéœ€è¦åœ¨å°¾éƒ¨åŠ ä¸Šæ‹¬å·ã€‚</p>
<p>è£…é¥°å™¨ <code>@property</code> å¯ä»¥å°†ä¸€ä¸ªæ–¹æ³•ä¼ªè£…æˆåŒåçš„å±æ€§ï¼Œå› æ­¤è£…é¥°äº† <code>getter</code> å‡½æ•°åï¼Œè°ƒç”¨æ—¶å°±ä¸ç”¨åŠ ä¸Šå°¾éƒ¨çš„æ‹¬å·äº†ï¼š</p>
<pre><code>class Person:
    def __init__(self):
        self.__name = &quot;Py&quot;
        
    @property
    def name(self):
        return self.__name
a = Person()
a.name
'Py'
</code></pre>
<p>è€Œä¸”ï¼Œå¦‚æœä½ æƒ³ä»å¤–éƒ¨ä¿®æ”¹è¯¥å±æ€§çš„å€¼ï¼Œä¼šäº§ç”Ÿé”™è¯¯ï¼š</p>
<pre><code>a.name = 1
---------------------------------------------------------------------------

AttributeError                            Traceback (most recent call last)

&lt;ipython-input-97-8c607f2aa25b&gt; in &lt;module&gt;()
----&gt; 1 a.name = 1


AttributeError: can't set attribute
</code></pre>
<p>ä½†åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŒ‡å®šå…¶ setter å‡½æ•°ï¼ˆè¯¥è£…é¥°å™¨ @age.setter åœ¨ç”¨ @property è£…é¥° age æ–¹æ³•åä¼šè‡ªåŠ¨ç”Ÿæˆï¼‰ï¼Œè®©å±æ€§ä¿®æ”¹æˆä¸ºå¯èƒ½ï¼Œç”šè‡³é™„åŠ ä¿®æ”¹æ¡ä»¶ï¼š</p>
<pre><code>class Person:
    def __init__(self):
        self.__age = 20
        
    @property
    def age(self):
        return self.__age
    
    @age.setter
    def age(self, value):
        if not isinstance(value, int):
            raise ValueError(&quot;Age should be an integer.&quot;)
        else:
            self.__age = value
a = Person()
a.age = 30
a.age
30
</code></pre>
<p>ä¸ä¼ å…¥æ•´æ•°ä¼šæŠ¥é”™ï¼š</p>
<pre><code>a.age = 0.5
---------------------------------------------------------------------------

ValueError                                Traceback (most recent call last)

&lt;ipython-input-100-001bfa8fe26b&gt; in &lt;module&gt;()
----&gt; 1 a.age = 0.5


&lt;ipython-input-98-83364d5faa13&gt; in age(self, value)
     10     def age(self, value):
     11         if not isinstance(value, int):
---&gt; 12             raise ValueError(&quot;Age should be an integer.&quot;)
     13         else:
     14             self.__age = value


ValueError: Age should be an integer.
</code></pre>
<h2 id="ç±»çš„ç‰¹æ®Šå±æ€§ä¸æ–¹æ³•">ç±»çš„ç‰¹æ®Šå±æ€§ä¸æ–¹æ³•</h2>
<h3 id="å±æ€§-__dict__">å±æ€§ <code>__dict__</code></h3>
<p>é¦–å…ˆæ˜¯ <code>__dict__</code>å±æ€§ï¼Œç”¨äºæŸ¥çœ‹ç±»çš„å±æ€§ä¸æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªå­—å…¸ã€‚</p>
<pre><code>a = MyClass()
MyClass.__dict__
mappingproxy({'__dict__': &lt;attribute '__dict__' of 'MyClass' objects&gt;,
              '__doc__': '\n    This is a class that can meow!\n    ',
              '__module__': '__main__',
              '__weakref__': &lt;attribute '__weakref__' of 'MyClass' objects&gt;,
              'animal': 'cat',
              'talk': &lt;function __main__.MyClass.talk&gt;})
</code></pre>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ­¤æ—¶å®ä¾‹ a çš„å±æ€§æ²¡æœ‰è¢«æ›´æ”¹è¿‡ï¼Œå®ä¾‹çš„ <strong>dict</strong> æ˜¯ä¸€ä¸ªç©ºå­—å…¸ï¼š</p>
<pre><code>print(a.__dict__, a.animal)
{} cat
</code></pre>
<p>ç±»çš„ <code>__dict__</code> æ–¹æ³•ä¸‹çš„åŒåé”®ï¼Œä¸å®ä¾‹å…·æœ‰ç›¸åŒå€¼ã€‚</p>
<pre><code>MyClass.__dict__[&quot;animal&quot;]
'cat'
</code></pre>
<p>ä¸€æ—¦è¢«ä»å¤–éƒ¨æ›´æ”¹ï¼Œå®ä¾‹ a çš„ <strong>dict</strong> å­—å…¸å°±ä¸å†ä¸ºç©ºã€‚</p>
<pre><code>a.animal = &quot;dog&quot;
print(a.__dict__, a.animal)
{'animal': 'dog'} dog
</code></pre>
<h3 id="å±æ€§-__slots__">å±æ€§ <code>__slots__</code></h3>
<p>ä»ä¸Šé¢å¯ä»¥çœ‹åˆ°ï¼Œéç§æœ‰çš„ç±»å±æ€§å¯ä»¥ä»å¤–éƒ¨æ›´æ”¹å€¼ï¼Œè€Œä¸”å±æ€§è¿˜èƒ½ç›´æ¥ä»å¤–éƒ¨å¢åŠ ã€‚<strong>slots</strong> å±æ€§çš„ä½œç”¨å°±åœ¨äºä½¿ç±»çš„å±æ€§ä¸èƒ½ä»å¤–éƒ¨è¿›è¡Œæ›´æ”¹ã€è¿½åŠ ã€‚å®ƒèƒ½å¤Ÿé™åˆ¶å±æ€§æ»¥ç”¨ï¼Œå¹¶åœ¨ä¼˜åŒ–å†…å­˜ä¸Šä¹Ÿæœ‰æ„ä¹‰ã€‚</p>
<pre><code>class MySlotClass():
    __slots__ = (&quot;meow&quot;, &quot;woof&quot;)
    def __init__(self):
        self.meow = &quot;Meow&quot;
        self.woof = &quot;Woof&quot;
    
a = MySlotClass()
MySlotClass.__dict__
mappingproxy({'__doc__': None,
              '__init__': &lt;function __main__.MySlotClass.__init__&gt;,
              '__module__': '__main__',
              '__slots__': ('meow', 'woof'),
              'meow': &lt;member 'meow' of 'MySlotClass' objects&gt;,
              'woof': &lt;member 'woof' of 'MySlotClass' objects&gt;})
</code></pre>
<p>æ­¤æ—¶ï¼Œå¦‚æœä½¿ç”¨ <code>a.__dict__</code>ï¼Œç»“æœä¸ä¼šè¿”å›ç©ºå­—å…¸ï¼Œè€Œæ˜¯ä¼šæŠ¥é”™ã€‚</p>
<h3 id="è¿ç®—ç¬¦é‡è½½">è¿ç®—ç¬¦é‡è½½</h3>
<p>ç‰¹åˆ«åœ°ï¼ŒPython æä¾›äº†è¿ç®—ç¬¦é‡è½½çš„åŠŸèƒ½ã€‚å¸¸ç”¨çš„å¯¹åº”å¦‚ä¸‹ï¼ˆå‚è€ƒ å®˜æ–¹é¡µé¢ï¼‰ï¼š</p>
<p>æ–¹æ³• å«ä¹‰ åº”ç”¨<br>
ä¸€å…ƒè¿ç®—ç¬¦<br>
<strong>len</strong> é•¿åº¦ len(a)<br>
<strong>bool</strong> é€»è¾‘å€¼ bool(a)<br>
<strong>neg</strong> å–è´Ÿå€¼ -a<br>
<strong>str</strong> / <strong>repr</strong> å­—ç¬¦ä¸²å½¢å¼ repr(a) / str(a), print(a)<br>
äºŒå…ƒè¿ç®—ç¬¦<br>
<strong>add</strong> åŠ  a + b, a += b<br>
<strong>sub</strong> å‡ a - b, a -= b<br>
<strong>mul</strong> ä¹˜ a <em>b, a</em> = b<br>
<strong>div</strong> é™¤ a / b, a /= b<br>
<strong>pow</strong> ä¹˜æ–¹ a <strong>b, a</strong> = b<br>
<strong>radd</strong> å·¦åŠ  â€¦ + a<br>
äºŒå…ƒå…³ç³»ç¬¦<br>
<strong>lt</strong> / <strong>le</strong> å°äº / å°äºç­‰äº a &lt; b, a &lt;= b<br>
<strong>gt</strong> / <strong>ge</strong> å¤§äº / å¤§äºç­‰äº a &gt; b, a &gt;= b<br>
<strong>eq</strong> / <strong>ne</strong> ç­‰äº / ä¸ç­‰äº a == b, a != b<br>
æ¯”å¦‚ä¸‹ä¾‹ä¸­ï¼Œå¯¹å¤šä¸ªè¿ç®—è¿›è¡Œäº†é‡è½½ï¼Œå®Œæˆäº†äºŒç»´å‘é‡åœ¨åŠ å‡æ³•ä¸Šä¸å‘é‡ã€ä¸æ•°è¿ç®—çš„åŸºæœ¬å®šä¹‰ã€‚</p>
<pre><code>class Vector:
    def __init__(self, a, b):
        self.a = a
        self.b = b
   
    def __add__(self, another):
        if isinstance(another, Vector):
            c, d = another.a, another.b
        else:
            c, d = another, another
        return Vector(self.a + c, self.b + d)
    
    def __radd__(self, another):
        return self.__add__(another)
    
    def __neg__(self):
        return Vector(-self.a, -self.b)
    
    def __sub__(self, another):
        return self.__add__(-another)
    
    def __str__(self):
        return &quot;Vector({},{})&quot;.format(self.a, self.b)

v1 = Vector(0,3)
v2 = Vector(5,-2)
print(v1 - 1, -v2, v1 + v2, v1 - v2)
Vector(-1,2) Vector(-5,2) Vector(5,1) Vector(-5,5)
</code></pre>
<p>å…¶ä¸­ï¼Œ<code>__repr__()</code> ä¸ <code>__str__()</code> çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼Œå‰è€…åœ¨äº¤äº’å¼æ­¥éª¤ä¸­æ˜¾ç¤ºç»“æœï¼Œåè€…åœ¨ print å‡½æ•°ä¸­æ˜¾ç¤ºç»“æœã€‚</p>
<p>ä¾‹å¦‚ä¸Šä¾‹ï¼Œå¦‚æœç›´æ¥è¾“å…¥ v1ï¼Œä¸ä¼šä»¥ â€œVector(0,3)â€çš„å½¢å¼æ˜¾ç¤ºã€‚</p>
<pre><code>v1  # åœ¨ç±»ä¸­é™„åŠ å®šä¹‰ï¼š __repr__ = __str__ å³å¯è§£å†³é—®é¢˜ã€‚
&lt;__main__.Vector at 0x2531c129c88&gt;
</code></pre>
<h2 id="è¿­ä»£è¡Œä¸º">è¿­ä»£è¡Œä¸º</h2>
<p>åœ¨ç±»ä¸­ä¹Ÿèƒ½å®šä¹‰è¿­ä»£è¡Œä¸ºï¼Œéœ€è¦ <strong>iter</strong>() ä¸ <strong>next</strong>() æ–¹æ³•ã€‚</p>
<pre><code># è¯¥ä¾‹æ”¹ç¼–è‡ªå®˜æ–¹æ–‡æ¡£
class MyClass4:
    def __init__(self, lst):
        self.data = lst
        self.__index = len(lst)
    def __iter__(self):
        return self
    def __next__(self):
        if self.__index == 0:
            raise StopIteration
        self.__index -= 1
        return self.data[self.__index]

a = MyClass4(&quot;Meow&quot;)
for char in a:
    print(char)
w
o
e
M
</code></pre>
<h1 id="å¸¸ç”¨æ¨¡å—">å¸¸ç”¨æ¨¡å—</h1>
<p>ä¸‹é¢ä»‹ç»å‡ ä¸ªå¸¸ç”¨çš„ Python æ ‡å‡†æ¨¡å—ï¼ˆå³éš Python å®‰è£…çš„æ¨¡å—ï¼‰ã€‚æ›´å¤šçš„ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œä¾‹å¦‚ NumPy, pandas, matplotlibï¼Œå¯ä»¥å‚è€ƒæœ¬ç³»åˆ—åšæ–‡çš„å…¶ä»–æ–‡ç« ã€‚</p>
<h2 id="os-æ¨¡å—">os æ¨¡å—</h2>
<p>è¿™ä¸ªæ¨¡å—åº”è¯¥æ˜¯ Python è‡ªå¸¦æ¨¡å—ä¸­ä½¿ç”¨ç‡æœ€é«˜çš„ä¸€ä¸ªäº†ã€‚ä¸€äº›ä¾‹å­ï¼š</p>
<pre><code># import os
#
# ----- æ–‡ä»¶æ“ä½œ -----
# os.rename(&quot;old.py&quot;, &quot;new.py&quot;)  # é‡å‘½å
# os.remove(&quot;a.py&quot;)  # åˆ é™¤
# os.stat(&quot;b.py&quot;)  # æŸ¥çœ‹æ–‡ä»¶å±æ€§
#
# ----- è·¯å¾„æ“ä½œ -----
# os.getcwd()  # è·å–å½“å‰ç›®å½•
# os.chdir(r&quot;d:\list&quot;)  # æ›´æ”¹å½“å‰ç›®å½•ä¸º
# os.chdir(os.pardir)  # è¿”å›ä¸Šä¸€çº§ç›®å½•
# os.mkdir('newfolder ')  # åœ¨å½“å‰ç›®å½•æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹
# os.listdir('c:\list')  # åˆ—å‡ºæ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æ–‡ä»¶çš„åˆ—è¡¨
# os.removedirs('thefolder ')  # åˆ é™¤ç©ºæ–‡ä»¶å¤¹
# os.path.isfile/ispath(&quot;f&quot;)  # æ£€æŸ¥è·¯å¾„æ˜¯æ–‡ä»¶æˆ–æ˜¯ç›®å½•
# os.path.exists(&quot;f&quot;)  # æ£€æŸ¥è·¯å¾„æ˜¯å¦å­˜åœ¨
# 
# ----- æ“ä½œå¹³å°ç›¸å…³ -----
# os.sep  # å½“å‰æ“ä½œç³»ç»Ÿçš„è·¯å¾„åˆ†éš”ç¬¦
# os.linesep  # å½“å‰æ“ä½œç³»ç»Ÿçš„æ¢è¡Œç¬¦
# os.path.join(r&quot;c:\abc&quot;, &quot;d&quot;)  # è¿æ¥å­—ä¸²æˆä¸ºè·¯å¾„
</code></pre>
<h2 id="sys-æ¨¡å—">sys æ¨¡å—</h2>
<p>ä¸€èˆ¬æˆ‘å¾ˆå°‘ç”¨åˆ°è¿™ä¸ªæ¨¡å—ã€‚å¯èƒ½æœ‰è¿™ä¹ˆå‡ ä¸ªå‘½ä»¤ä¼šç”¨åˆ°ï¼š</p>
<ul>
<li>
<p>sys.argvï¼šèƒ½å¤Ÿä¼ é€’ä»å‘½ä»¤è¡Œæ¥å—çš„å‚æ•°åˆ°ä»£ç å†…ã€‚</p>
</li>
<li>
<p>sys.platformï¼šå½“å‰æ“ä½œç³»ç»Ÿå¹³å°ã€‚</p>
</li>
<li>
<p>sys.exit()ï¼šæ— å‚æ•°æ—¶æŠ›å‡º SystemExit é”™è¯¯å¹¶é€€å‡ºï¼›æœ‰å‚æ•°æ—¶ä¼šåœ¨é€€å‡ºå‰è¾“å‡ºå¯¹åº”çš„å­—ç¬¦ä¸²åˆ°å±å¹•ã€‚</p>
<pre><code>import sys
sys.platform
'win32'
</code></pre>
</li>
</ul>
<p>ä¸€ä¸ª <code>sys.argv</code> çš„ä¾‹å­ï¼š</p>
<pre><code>sys.argv
['e:\\python\\lib\\site-packages\\ipykernel_launcher.py',
 '-f',
 'C:\\Users\\wklchris\\AppData\\Roaming\\jupyter\\runtime\\kernel-3724c4c9-2130-485d-b388-7a84379fd043.json']
</code></pre>
<p>ä»¥ä¸Šä¸æ˜¯å…¸å‹çš„ä¾‹å­ï¼Œå› ä¸ºå¹¶ä¸æ˜¯åœ¨å‘½ä»¤è¡Œä¸‹è¿è¡Œçš„ã€‚å‘½ä»¤è¡Œä¸‹é€šå¸¸æœ‰å¦‚ä¸‹æ ¼å¼ï¼š</p>
<pre><code>python test.py hello
</code></pre>
<p>æ­¤æ—¶ï¼Œsys.argv[0] = test.pyï¼Œsys.argv[1] = hello.</p>
<h2 id="re-æ¨¡å—æ­£åˆ™è¡¨è¾¾å¼">re æ¨¡å—ï¼šæ­£åˆ™è¡¨è¾¾å¼</h2>
<p>å‚è€ƒæœ¬æ–‡é™„å½•ã€‚</p>
<h2 id="å…¶ä»–æ¨¡å—">å…¶ä»–æ¨¡å—</h2>
<ul>
<li>collection æ¨¡å—ï¼š
<ul>
<li>æä¾›äº†ä¸€ç§åŒç«¯åˆ—è¡¨ dequeï¼Œå¯ä»¥ç”¨ appendleft, extendleft, popleft ç­‰æ–¹æ³•ä» deque çš„å·¦ä¾§ï¼ˆä¹Ÿå°±æ˜¯lst[0]ï¼‰è¿›è¡Œæ“ä½œã€‚æ³¨æ„ï¼Œdeque çš„æ›´æ–°æ“ä½œæ¯” list æ›´å¿«ï¼Œä½†è¯»å–æ“ä½œæ¯” list æ…¢ã€‚</li>
<li>æä¾›äº†ä¸€ç§ç¼ºçœå­—å…¸<code>defaultdict</code>ï¼Œå¯ä»¥ç›´æ¥æ“ä½œé”®å€¼ï¼ˆå³ä½¿è¿™ä¸ªé”®å…ˆå‰æœªå®šä¹‰ï¼‰ï¼›é¦–æ¬¡æ“ä½œæ—¶ä¼šèµ‹ä¸€ä¸ªåˆç†çš„åˆå€¼ï¼Œæ¯”å¦‚é¦–æ¬¡è°ƒç”¨ d[â€œaâ€] += 1 è€Œå­—å…¸æœ¬èº«æ²¡æœ‰ â€œaâ€ é”®æ—¶ï¼Œä¼šè‡ªåŠ¨åˆå§‹åŒ– â€œaâ€ é”®å¹¶èµ‹åˆå€¼ 0ã€‚</li>
</ul>
</li>
<li>calendar æ¨¡å—ï¼šåˆ¤æ–­æ˜ŸæœŸã€é—°å¹´ï¼Œè¾“å‡ºæ—¥å†ç­‰ç­‰ã€‚</li>
<li>itertools æ¨¡å—ï¼šåœ¨æœ¬æ–‡â€œè¿­ä»£å™¨â€å°èŠ‚å·²è¿›è¡Œäº†ç®€è¦ä»‹ç»ã€‚</li>
<li>logging æ¨¡å—ï¼šåœ¨è°ƒè¯•ä¸­å¯èƒ½ä¼šä½¿ç”¨ã€‚</li>
<li>urllib æ¨¡å—ï¼šè¿™æ˜¯ä¸€ä¸ª HTML è¯·æ±‚æ¨¡å—ï¼Œå¸¸ç”¨äºçˆ¬è™«ã€‚</li>
</ul>
<h1 id="è°ƒè¯•ä¸æµ‹è¯•">è°ƒè¯•ä¸æµ‹è¯•</h1>
<p>Python ä¸­æœ‰ä¸€äº›å†…ç½®çš„åŠæ³•è¿›è¡Œè°ƒè¯•ä¸æµ‹è¯•ã€‚</p>
<h2 id="æ–­è¨€assert">æ–­è¨€ï¼šassert</h2>
<p>æ–­è¨€çš„å«ä¹‰åœ¨äºï¼Œå¦‚æœæ–­è¨€å¤±è´¥ï¼ˆFalseï¼‰ï¼Œé‚£ä¹ˆä»£ç ä¼šè¢«ç»ˆæ­¢ï¼ˆæŠ›å‡ºä¸€ä¸ª<code>AssertionError</code>ï¼‰ã€‚æ¯”å¦‚ï¼š</p>
<pre><code>n = 0
assert(n != 0)
1 / n
---------------------------------------------------------------------------

AssertionError                            Traceback (most recent call last)

&lt;ipython-input-112-e53f92f6c644&gt; in &lt;module&gt;()
      1 n = 0
----&gt; 2 assert(n != 0)
      3 1 / n


AssertionError:
</code></pre>
<p>ä¸å¤§å®¶ä¸€è´¯å–œæ¬¢ä½¿ç”¨çš„ print è°ƒè¯•æ³•ç›¸æ¯”ï¼Œæ–­è¨€è¯­å¥å¯ä»¥ç”¨å‘½ä»¤è¡Œå‚æ•° -O å¿½ç•¥ã€‚è¿™æ ·æ‰€æœ‰çš„ assert() è¯­å¥éƒ½ä¸ä¼šè¢«æ‰§è¡Œã€‚</p>
<pre><code>$ python -O main.py
</code></pre>
<h2 id="æ—¥å¿—è°ƒè¯•logging-æ¨¡å—">æ—¥å¿—è°ƒè¯•ï¼šlogging æ¨¡å—</h2>
<p>logging æ¨¡å—æ”¯æŒå°†é”™è¯¯æ—¥å¿—è¾“å‡ºï¼ˆåˆ°æ§åˆ¶å°æˆ–è€…åˆ°æ–‡ä»¶ï¼‰ã€‚</p>
<p>æ­¤ä¹ƒè°ƒè¯•ç¥å™¨ã€‚å»¶ä¼¸é˜…è¯»ï¼š logging å®˜æ–¹åŸºç¡€æ•™ç¨‹ã€‚</p>
<pre><code>import logging
# è¯¥è¡Œä¹Ÿå¯èƒ½é€šè¿‡æ§åˆ¶å°ï¼š$ python main.py --log=WARNING çš„æ–¹å¼å®ç°
logging.basicConfig(level=logging.WARNING)
n = 0
logging.warning(&quot;n = {}&quot;.format(n))
WARNING:root:n = 0
</code></pre>
<p>logging æ¨¡å—çš„çµæ´»ä¹‹å¤„åœ¨äºä½ å¯ä»¥è®°å½•ä¿¡æ¯çš„çº§åˆ«ï¼ˆ<code>DEBUGï¼ŒINFOï¼ŒWARNINGï¼ŒERRORï¼ŒCRITICAL</code>ï¼‰ï¼Œå„çº§åˆ«çš„ä½œç”¨å¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p>DEBUGï¼šæœ€è¯¦ç»†çš„çº§åˆ«ï¼Œæ‰€æœ‰è¯¦ç»†æ—¥å¿—éƒ½ä¼šè¢«è¾“å‡ºã€‚</p>
</li>
<li>
<p>INFOï¼šæ£€æµ‹ä»£ç æ˜¯å¦æŒ‰ç…§é¢„æœŸæ‰§è¡Œã€‚</p>
</li>
<li>
<p>WARNINGï¼šéé¢„æœŸçš„äº‹ä»¶å‘ç”Ÿäº†ï¼Œæˆ–è€…å¯èƒ½åœ¨è¿‘æœŸå‘ç”Ÿï¼ˆä¾‹å¦‚ï¼šä½ç£ç›˜ç©ºé—´ï¼‰ã€‚ä½†ä»£ç ä»ç„¶æ‰§è¡Œã€‚</p>
</li>
<li>
<p>ERRORï¼šå‘ç”Ÿäº†çº§åˆ«æ›´é«˜çš„é—®é¢˜ï¼ŒæŸäº›åŠŸèƒ½æ— æ³•æ­£å¸¸å®ç°ã€‚</p>
</li>
<li>
<p>CRITICALï¼šä¸¥é‡é”™è¯¯ï¼Œä»£ç å¯èƒ½æ— æ³•ç»§ç»­è¿è¡Œã€‚</p>
<p>é€šè¿‡</p>
<pre><code>filename
</code></pre>
<p>å‚æ•°ï¼Œå¯ä»¥å°†æ—¥å¿—å†™å…¥åˆ°æ–‡ä»¶ã€‚ä¸€èˆ¬ä½¿ç”¨</p>
<pre><code>DEBUG
</code></pre>
<p>çº§åˆ«ï¼Œå³è¾“å‡ºæ‰€æœ‰ä¿¡æ¯ã€‚</p>
<pre><code># logging.basicConfig(filename=&quot;log.log&quot;, level=logging.DEBUG)
</code></pre>
</li>
</ul>
<p>é»˜è®¤ä¼šå°†æ—¥å¿—è¿½åŠ åˆ°æ–‡ä»¶æœ«å°¾ï¼Œå¦‚æœæƒ³è¦è¦†å†™æ–‡ä»¶è€Œä¸æ˜¯è¿½åŠ ï¼Œä½¿ç”¨ filemode å‚æ•°ï¼š</p>
<pre><code># logging.basicConfig(filename=&quot;log.log&quot;, filemode=&quot;w&quot;, level=logging.DEBUG)
</code></pre>
<p>æ›´æ”¹æ—¥å¿—æ ¼æ ¼å¼ï¼Œä½¿ç”¨ format å‚æ•°ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¸¸ç”¨çš„æ ¼å¼ç ï¼ˆæ ¼å¼ç ååŠ  s è¡¨ç¤ºå­—ç¬¦ä¸²ï¼‰æœ‰ï¼š</p>
<ul>
<li>
<p><code>%(levelname)</code>ï¼šå½“å‰æ—¥å¿—å­—ä¸²çº§åˆ«ã€‚</p>
</li>
<li>
<p><code>%(message)</code>ï¼šå½“å‰æ—¥å¿—å­—ä¸²ã€‚</p>
</li>
<li>
<pre><code>%(asctime)
</code></pre>
<p>ï¼šå½“å‰æ—¶é—´ã€‚é»˜è®¤ datefmt å‚æ•°ä¸º</p>
<pre><code>%Y-%m-%d %I:%M:%S
</code></pre>
<p>ä¾‹å­ã€‚ä¸‹ä¾‹ä¼šè¾“å‡ºå½¢å¦‚ï¼šâ€01/23/1900 08:05:05 PM is when this event was logged.â€ è¿™æ ·çš„æ ¼å¼ã€‚</p>
<pre><code># logging.basicConfig(format='%(asctime)s %(message)s', datefmt='%m/%d/%Y %I:%M:%S %p')
# logging.warning('is when this event was logged.')
# å¸¸ç”¨çš„æ ¼å¼ï¼š
# logging.basicConfig(format=&quot;%(levelname)s: %(message)s&quot;)
</code></pre>
</li>
</ul>
<p>è¿˜å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶æ¥ä»£æ›¿ basicConfig å‘½ä»¤ï¼Œå¹¶è¿›è¡Œè®¾ç½® logger ç­‰æ›´é«˜çº§çš„é…ç½®ã€‚è¿™éƒ¨åˆ†å¯ä»¥å‚è€ƒï¼šæ­¤å¤„ã€‚</p>
<pre><code># import logging.config

# logging.config.fileConfig('logging.conf')
</code></pre>
<h1 id="é™„å½•æ­£åˆ™è¡¨è¾¾å¼">é™„å½•ï¼šæ­£åˆ™è¡¨è¾¾å¼</h1>
<p>æ­£åˆ™è¡¨è¾¾å¼çš„åŸºç¡€å†…å®¹å‚è€ƒæœ¬åšå®¢çš„è¿™ç¯‡åšæ–‡ï¼šæ­£åˆ™è¡¨è¾¾å¼ã€‚æ³¨æ„ï¼šå¦‚æœè¦ä¿å­˜ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ä¾›å¤šæ¬¡ä½¿ç”¨ï¼Œè¯·å­˜å‚¨å…¶ <code>compile</code> åçš„ç»“æœï¼Œé¿å…åå¤ç¼–è¯‘ã€‚</p>
<ul>
<li>
<p>re.compile(exp)ï¼šç¼–è¯‘æ­£åˆ™è¡¨è¾¾å¼ã€‚</p>
</li>
<li>
<p>re.compile(exp).match(str)ï¼šåˆ¤æ–­æ­£åˆ™è¡¨è¾¾å¼èƒ½å¦åŒ¹é…ä¸€ä¸ªå­—ä¸²ã€‚å¯ä»¥ bool() ç»“æœæ¥è·çŸ¥æ˜¯å¦åŒ¹é…ã€‚</p>
<ul>
<li>re.compile(exp).match(str).groups()ï¼šå°†åŒ¹é…ç»“æœè¿”å›ä¸ºå•ä¸ªå­—ç¬¦ä¸²ï¼ˆæ— å­ç»„æ—¶ï¼‰æˆ–å…ƒç»„ï¼ˆæœ‰å­ç»„æ—¶ï¼‰ã€‚</li>
<li>re.compile(exp).findall(str)ï¼šæ‰¾å‡ºå­—ç¬¦ä¸²ä¸­æ‰€æœ‰åŒ¹é…è¡¨è¾¾å¼çš„å­ä¸²ã€‚è¿”å›åˆ—è¡¨ã€‚</li>
</ul>
</li>
<li>
<p>re.split(exp, str)ï¼šç”¨è¡¨è¾¾å¼æ¥åˆ†å‰²å­—ç¬¦ä¸²ï¼Œç›¸å½“äº str.split() çš„å¢å¼ºç‰ˆã€‚</p>
<pre><code>import re
bool(re.match(r&quot;\d&quot;, &quot;1&quot;))
True
phone_re = re.compile(r'\d{3,4}-\d{7,8}')
phone_re.match('010-12345678').group()
'010-12345678'
# å¦‚æœåœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­æ·»åŠ äº†å­ç»„ï¼ˆå°æ‹¬å·ï¼‰ï¼Œé‚£ä¹ˆä¼šè¿”å›å­ç»„ä¾é¡ºåºç»„æˆçš„ä¸€ä¸ªå…ƒç»„
phone_re = re.compile(r'(\d{3,4})-(\d{7,8})')
phone_re.match('010-12345678').groups()
('010', '12345678')
phone_re = re.compile(r'\d{3,4}-\d{7,8}')  # å¯»æ‰¾æ‰€æœ‰å­ä¸²
phone_set = '010-12345678, 021-65439876 '
phone_re.findall(phone_set)
['010-12345678', '021-65439876']
s = 'a b   c'  # ç”¨ re.split() å¤„ç†è¿ç»­çš„ç©ºæ ¼
print(s.split(' '), re.split(r&quot;\s+&quot;, s))
['a', 'b', '', '', 'c'] ['a', 'b', 'c']
</code></pre>
</li>
</ul>
]]></content>
    </entry>
</feed>