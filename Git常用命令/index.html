<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Git常用命令 | ZhangXiong</title>
<meta name="description" content="May you be faithful to yourself,live earnestly and laugh freel." />
<link rel="shortcut icon" href="https://xiong-zh.github.io/favicon.ico?v=1581997057390">
<link href="https://cdn.remixicon.com/releases/v1.3.1/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">

<link rel="stylesheet" href="https://xiong-zh.github.io/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="Git常用命令 | ZhangXiong - Atom Feed" href="https://xiong-zh.github.io/atom.xml">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">


<script async src="https://www.googletagmanager.com/gtag/js?id=UA-156420077-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-156420077-1');
</script>


  </head>
  <body>
    <div class="site-nav has-cover">
      <div class="head">
  <div class="inner">
    <a class="site-name" href="https://xiong-zh.github.io">
        <span>ZhangXiong</span>
    </a>
    <label class="burger" for="burger"></label>
    <input id="burger" type="checkbox">
    <button class="burger">
      <div>
        <span></span>
        <span></span>
      </div>
    </button>
    <nav class="info_nav">
      
        
          <a href="/">回到首页</a>
        
      
        
          <a href="/archives">历史归档</a>
        
      
        
          <a href="/tags">所有标签</a>
        
      
        
          <a href="/documents/" target="_blank">后端图谱</a>
        
      
        
          <a href="/about/">关于｜友链</a>
        
      
    </nav>
  </div>
</div>
    </div>
    <article role="main" class="hentry has-cover">
      
        <div class="entry-cover js-cover" data-src="http://zhangxiong-blog-pic.test.upcdn.net/blog/img/f2.jpg" data-width="900" data-height="423" style="background-image:url(http://zhangxiong-blog-pic.test.upcdn.net/blog/img/f2.jpg); height: 80vw;">
          <h1 class="post-title">Git常用命令</h1>
        </div>
      
      <h1 class="entry-title" itemprop="headline">Git常用命令</h1>
      <div class="entry-meta">
        <time class="updated" datetime="2020-01-15 19:27:36">2020-01-15</time>
        <span class="author vcard">
          14 min read
        </span>
      </div>
      <div class="post-content yue">
        <p>此文只是对Git有一定基础的人当记忆使用，比较简略，初级学员强烈推荐廖雪峰老师的Git系列教程，通俗易懂。</p>
<!-- more -->
<p>此文只是对Git有一定基础的人当记忆使用，比较简略，初级学员强烈推荐廖雪峰老师的Git系列教程，通俗易懂，<a href="https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000">戳此处即可开始学习</a></p>
<h3 id="1安装git">1.安装Git</h3>
<ul>
<li>Linux</li>
</ul>
<pre><code>sudo apt-get install git
复制代码
</code></pre>
<ul>
<li>Window:到Git官网下载安装：https://git-scm.com/downloads</li>
</ul>
<h3 id="2配置全局用户name和e-mail">2.配置全局用户Name和E-mail</h3>
<pre><code>$ git config --global user.name &quot;Your Name&quot;
$ git config --global user.email &quot;email@example.com&quot;
复制代码
</code></pre>
<h3 id="3初始化仓库">3.初始化仓库</h3>
<pre><code>git init
复制代码
</code></pre>
<h3 id="4添加文件到git仓库">4.添加文件到Git仓库</h3>
<pre><code>git add &lt;file&gt;
复制代码
</code></pre>
<p>提示：可反复多次使用，添加多个文件；</p>
<h3 id="5提交添加的文件到git仓库">5.提交添加的文件到Git仓库</h3>
<pre><code>git commit
复制代码
</code></pre>
<p>然后会弹出一个Vim编辑器输入本次提交的内容；</p>
<p>或者</p>
<pre><code>git commit -m &quot;提交说明&quot;
复制代码
</code></pre>
<h3 id="6查看仓库当前的状态">6.查看仓库当前的状态</h3>
<pre><code>git status
复制代码
</code></pre>
<h3 id="7比较当前文件的修改">7.比较当前文件的修改</h3>
<pre><code>$ git diff &lt;file&gt;
复制代码
</code></pre>
<h3 id="8查看历史提交记录">8.查看历史提交记录</h3>
<pre><code>git log
复制代码
</code></pre>
<p>或者加上参数查看就比较清晰了</p>
<pre><code>$ git log --pretty=oneline
复制代码
</code></pre>
<h3 id="9回退版本">9.回退版本</h3>
<pre><code>$ git reset --hard HEAD^
复制代码
</code></pre>
<p>说明：在Git中，用HEAD表示当前版本，上一个版本就是HEAD<sup>，上上一个版本就是HEAD</sup><sup>，以此类推，如果需要回退几十个版本，写几十个</sup>容易数不过来，所以可以写，例如回退30个版本为：HEAD~30。</p>
<p>如果你回退完版本又后悔了，想回来，一般情况下是回不来的，但是如果你可以找到你之前的commit id的话，也是可以的，使用如下即可：</p>
<pre><code>$ git reset --hard + commit id 
复制代码
</code></pre>
<p>提示：commit id不需要写全，Git会自动查找；</p>
<p>补充说明：Git中，commit id是一个使用SHA1计算出来的一个非常大的数字，用十六进制表示，你提交时看到的一大串类似3628164...882e1e0的就是commit id（版本号）；</p>
<p>在Git中，版本回退速度非常快，因为Git在内部有个指向当前版本的HEAD指针，当你回退版本的时候，Git仅仅是把HEAD从指向回退的版本，然后顺便刷新工作区文件；</p>
<h3 id="10查看操作的历史命令记录">10.查看操作的历史命令记录</h3>
<pre><code>$ git reflog
复制代码
</code></pre>
<p>结果会将你之前的操作的commit id和具体的操作类型及相关的信息打印出来，这个命令还有一个作用就是，当你过了几天，你想回退之前的某次提交，但是你不知道commit id了，通过这个你可查找出commit id,就可以轻松回退了，用一句话总结：穿越未来，回到过去，so easy！</p>
<h3 id="11diff文件">11.diff文件</h3>
<pre><code>git diff HEAD -- &lt;file&gt;
复制代码
</code></pre>
<p>说明：查看工作区和版本库里面最新版本文件的区别，也可以不加HEAD参数；</p>
<h3 id="12丢弃工作区的修改">12.丢弃工作区的修改</h3>
<pre><code>$ git checkout -- &lt;file&gt;
复制代码
</code></pre>
<p>说明：适用于工作区修改没有add的文件</p>
<h3 id="13丢弃暂存区的文件">13.丢弃暂存区的文件</h3>
<pre><code>$ git reset HEAD &lt;file&gt;
复制代码
</code></pre>
<p>说明：适用于暂存区已经add的文件，注意执行完此命令，他会将暂存区的修改放回到工作区中，如果要想工作区的修改也丢弃，就执行第12条命令即可；</p>
<h3 id="14删除文件">14.删除文件</h3>
<pre><code>$ rm &lt;file&gt;
复制代码
</code></pre>
<p>然后提交即可；</p>
<p>如果不小心删错了，如果还没有提交的话使用下面命令即可恢复删除，注意的是它只能恢复最近版本提交的修改，你工作区的修改是不能被恢复的！</p>
<pre><code>$ git checkout -- &lt;file&gt;
复制代码
</code></pre>
<h3 id="15创建ssh-key">15.创建SSH key</h3>
<pre><code>$ ssh-keygen -t rsa -C &quot;youremail@example.com&quot;
复制代码
</code></pre>
<p>一般本地Git仓库和远程Git仓库之间的传输是通过SSH加密的，所以我们可以将其生成的公钥添加到Git服务端的设置中即可，这样Git就可以知道是你提交的了；</p>
<h3 id="16与远程仓库协作">16.与远程仓库协作</h3>
<pre><code>$ git remote add origin git@github.com:xinpengfei520/IM.git
复制代码
</code></pre>
<p>删除本地库与远程库的关联：</p>
<pre><code>$ git remote rm origin
复制代码
</code></pre>
<p>作用：有时候我们需要关联其他远程库，需要先删除旧的关联，再添加新的关联，因为如果你已经关联过了就不能在关联了，不过想关联多个远程库也是可以的，前提是你的本地库没有关联任何远程库，操作如下：</p>
<p>先关联Github远程库：</p>
<pre><code>$ git remote add github git@github.com:xinpengfei520/IM.git
复制代码
</code></pre>
<p>接着关联码云远程库：</p>
<pre><code>$ git remote add gitee git@gitee.com:xinpengfei521/IM.git
复制代码
</code></pre>
<p>现在，我们用<code>git remote -v</code>查看远程库的关联信息，如果看到两组关联信息就说明关联成功了；</p>
<p>ok,现在我们的本地库可以和多个远程库协作了</p>
<p>如果要推送到GitHub，使用命令：</p>
<pre><code>$ git push github master
复制代码
</code></pre>
<p>如果要推送到码云，使用命令：</p>
<pre><code>$ git push gitee master
复制代码
</code></pre>
<h3 id="17推送到远程仓库">17.推送到远程仓库</h3>
<pre><code>$ git push -u origin master
复制代码
</code></pre>
<p>注意：第一次提交需要加一个参数-u,以后不需要</p>
<h3 id="18克隆一个远程库">18.克隆一个远程库</h3>
<pre><code>$ git clone git@github.com:xinpengfei520/IM.git
复制代码
</code></pre>
<h3 id="19git分支管理">19.Git分支管理</h3>
<p>创建一个分支branch1</p>
<pre><code>$ git branch branch1
复制代码
</code></pre>
<p>切换到branch1分支：</p>
<pre><code>$ git checkout branch1
复制代码
</code></pre>
<p>创建并切换到branch1分支：</p>
<pre><code>$ git checkout -b branch1
复制代码
</code></pre>
<p>查看分支：</p>
<pre><code>$ git branch
复制代码
</code></pre>
<p>提示：显示的结果中，其中有一个分支前有个*号，表示的是当前所在的分支；</p>
<p>合并branch1分支到master：</p>
<pre><code>$ git merge branch1
复制代码
</code></pre>
<p>删除分支：</p>
<pre><code>$ git branch -d branch1
复制代码
</code></pre>
<h3 id="20查看提交的历史记录">20.查看提交的历史记录</h3>
<pre><code>$ git log
复制代码
</code></pre>
<p>命令可以看到分支合并图</p>
<pre><code>git log --graph
复制代码
</code></pre>
<h3 id="21合并分支">21.合并分支</h3>
<p>禁用Fast forward模式合并分支</p>
<pre><code>$ git merge --no-ff -m &quot;merge&quot; branch1
复制代码
</code></pre>
<p>说明：默认Git合并分支时使用的是Fast forward模式，这种模式合并，删除分支后，会丢掉分支信息，所以我们需要强制禁用此模式来合并；</p>
<p>补充内容：实际开发中分支管理的策略</p>
<ul>
<li>master分支应该是非常稳定的，也就是仅用来发布新版本，平时不能在上面提交；</li>
<li>我们可以新开一个dev分支，也就是说dev分支是不稳定的，到版本发布时，再把dev分支合并到master上，在master分支发布新版本；</li>
<li>你和你的协作者平时都在dev分支上提交，每个人都有自己的分支，时不时地往dev分支上合并就可以了；</li>
</ul>
<h3 id="22保存工作现场">22.保存工作现场</h3>
<pre><code>$ git stash
复制代码
</code></pre>
<p>作用：当你需要去修改其他内容时，这时候你的工作还没有做完，先临时保存起来，等干完其他事之后，再回来回复现场，再继续干活；为什么？因为暂存区是公用的，如果不通过stash命令隐藏，会带到其它分支去；</p>
<p>查看已经保存的工作现场列表：</p>
<pre><code>$ git stash list
复制代码
</code></pre>
<p>恢复工作现场(恢复并从stash list删除)：</p>
<pre><code>$ git stash pop
复制代码
</code></pre>
<p>或者：</p>
<pre><code>git stash apply
复制代码
</code></pre>
<p>恢复工作现场，但stash内容并不删除，如果你需要删除执行如下命令：</p>
<pre><code>$ git stash drop
复制代码
</code></pre>
<p>恢复指定的stash:</p>
<pre><code>$ git stash apply stash@{0}
复制代码
</code></pre>
<p>说明：其中stash@{0}为<code>git stash list</code>中的一种编号</p>
<h3 id="23丢弃一个没有被合并过的分支">23.丢弃一个没有被合并过的分支</h3>
<p>强行删除即可：</p>
<pre><code>$ git branch -D &lt;name&gt;
复制代码
</code></pre>
<p>作用：实际开发中，添加一个新feature，最好新建一个分支，如果要丢弃这个没有被合并过的分支，可以通过上面的命令强行删除；</p>
<h3 id="24查看远程库的信息">24.查看远程库的信息</h3>
<pre><code>$ git remote
复制代码
</code></pre>
<p>显示更详细的信息：</p>
<pre><code>$ git remote -v
复制代码
</code></pre>
<h3 id="25推送分支">25.推送分支</h3>
<p>推送master到远程库</p>
<pre><code>$ git push origin master
复制代码
</code></pre>
<p>推送branch1到远程库</p>
<pre><code>$ git push origin branch1
复制代码
</code></pre>
<h3 id="26创建本地分支">26.创建本地分支</h3>
<pre><code>$ git checkout -b branch1 origin/branch1
复制代码
</code></pre>
<p>说明：如果远程库中有分支，clone之后默认只有master分支的，所以需要执行如上命令来创建本地分支才能与远程的分支关联起来；</p>
<h3 id="27指定本地branch1分支与远程originbranch1分支的链接">27.指定本地branch1分支与远程origin/branch1分支的链接</h3>
<pre><code>$ git branch --set-upstream branch1 origin/branch1
复制代码
</code></pre>
<p>作用：如果你本地新建的branch1分支，远程库中也有一个branch1分支(别人创建的)，而刚好你也没有提交过到这个分支，即没有关联过，会报一个<code>no tracking information</code>信息，通过上面命令关联即可；</p>
<h3 id="28创建标签">28.创建标签</h3>
<pre><code>$ git tag &lt;name&gt;
复制代码
</code></pre>
<p>例如：<code>git tag v1.0</code></p>
<p>查看所有标签：</p>
<pre><code>$ git tag
复制代码
</code></pre>
<p>对历史提交打tag</p>
<p>先使用<code>$ git log --pretty=oneline --abbrev-commit</code>命令找到历史提交的commit id</p>
<p>例如对commit id 为123456的提交打一个tag:</p>
<pre><code>$ git tag v0.9 123456
复制代码
</code></pre>
<p>查看标签信息：</p>
<pre><code>$ git show &lt;tagname&gt;
复制代码
</code></pre>
<p>eg:<code>git show v1.0</code></p>
<p>创建带有说明的标签，用-a指定标签名，-m指定说明文字，123456为commit id：</p>
<pre><code>$ git tag -a v1.0 -m &quot;V1.0 released&quot; 123456
复制代码
</code></pre>
<p>用私钥签名一个标签：</p>
<pre><code>$ git tag -s v2.0 -m &quot;signed V2.0 released&quot; 345678
复制代码
</code></pre>
<p>说明：签名采用PGP签名，因此，必须先要安装gpg（GnuPG），如果没有找到gpg，或者没有gpg密钥对，就会报错，具体请参考GnuPG帮助文档配置Key；</p>
<p>作用：用PGP签名的标签是不可伪造的，因为可以验证PGP签名；</p>
<p>删除标签：</p>
<pre><code>$ git tag -d &lt;tagname&gt;
复制代码
</code></pre>
<p>删除远程库中的标签：</p>
<p>比如要删除远程库中的 <strong>V1.0</strong> 标签，分两步：</p>
<p>[1] 先删除本地标签：<code>$ git tag -d V1.0</code></p>
<p>[2] 再推送删除即可：<code>$ git push origin :refs/tags/V1.0</code></p>
<p>推送标签到远程库：</p>
<pre><code>$ git push origin &lt;tagname&gt;
复制代码
</code></pre>
<p>推送所有标签到远程库：</p>
<pre><code>$ git push origin --tags
复制代码
</code></pre>
<h3 id="29自定义git设置">29.自定义Git设置</h3>
<p>Git显示颜色，会让命令输出看起来更清晰、醒目：</p>
<pre><code>$ git config --global color.ui true
复制代码
</code></pre>
<p>设置命令别名：</p>
<pre><code>$ git config --global alias.st status
复制代码
</code></pre>
<p>说明：--global表示全局，即设置完之后全局生效，st表示别名，status表示原始名</p>
<p>好了，现在敲<code>git st</code>就相当于是<code>git status</code>命令了，是不是方便？</p>
<p>当然还有其他命令可以简写，这里举几个：很多人都用co表示checkout，ci表示commit，br表示branch...<br>
根据自己的喜好可以设置即可，个人觉得不是很推荐使用别名的方式；</p>
<p>推荐一个比较丧心病狂的别名设置：</p>
<pre><code>git config --global alias.lg &quot;log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset' --abbrev-commit&quot;
复制代码
</code></pre>
<p>效果自己去体会...</p>
<p>其他说明：配置的时候加上--global是针对当前用户起作用的，如果不加只对当前的仓库起作用；每个仓库的Git配置文件都放在 <strong>.git/config</strong> 文件中，我们可以打开对其中的配置作修改，可以删除设置的别名；而当前用户的Git配置文件放在用户主目录下的一个隐藏文件.gitconfig中，我们也可以对其进行配置和修改。</p>
<h3 id="30忽略文件规则">30.忽略文件规则</h3>
<p>原则：</p>
<ul>
<li>忽略系统自动生成的文件等；</li>
<li>忽略编译生成的中间文件、可执行文件等，比如Java编译产生的.class文件，自动生成的文件就没必要提交；</li>
<li>忽略你自己的带有敏感信息的配置文件，个人相关配置文件；</li>
<li>忽略与自己相关开发环境相关的配置文件；</li>
<li>...</li>
</ul>
<p>使用：在Git工作区的根目录下创建一个特殊的 <strong>.gitignore</strong> 文件，然后把要忽略的文件名或者相关规则填进去，Git就会自动忽略这些文件，不知道怎么写的可参考：<a href="https://github.com/github/gitignore">github.com/github/giti…</a>,这里提供了一些忽略的规则，可供参考；</p>
<p>如果你想添加一个被 <strong>.gitignore</strong> 忽略的文件到Git中，但发现是添加不了的，所以我们可以使用强制添加<code>$ git add -f</code></p>
<p>或者我们可以检查及修改 <strong>.gitignore</strong> 文件的忽略规则：</p>
<pre><code>$ git check-ignore -v &lt;file&gt;
复制代码
</code></pre>
<p>Git会告诉我们具体的 <strong>.gitignore</strong> 文件中的第几行规则忽略了该文件，这样我们就知道应该修改哪个规则了；</p>
<p>如何忽略已经提交到远程库中的文件？<br>
如果你已经将一些文件提交到远程库中了，然后你想忽略掉此文件，然后在 <strong>.gitignore</strong> 文件中添加忽略，然而你会发现并没有生效，因为Git添加忽略时只有对没有跟踪的文件才生效，也就是说你没有add过和提交过的文件才生效，按如下命令：</p>
<p>比如说：我们要忽略.idea目录，先删除已经提交到本地库的文件目录</p>
<pre><code>git rm --cached .idea
复制代码
</code></pre>
<p>格式：git rm --cached + 路径</p>
<p>如果提示：fatal: not removing '.idea' recursively without -r</p>
<p>加个参数 -r 即可强制删除</p>
<pre><code>$ git rm -r --cached .idea
复制代码
</code></pre>
<p>然后，执行<code>git status</code>会提示你已经删除.idea目录了，然后执行commit再push就可以了，此时的.idea目录是没有被跟踪的，将.idea目录添加到 <strong>.gitignore</strong> 文件中就可以忽略了。</p>
<p>附图：</p>
<figure data-type="image" tabindex="1"><img src="https://user-gold-cdn.xitu.io/2018/1/4/160c049ccf1e2bd9?imageslim" alt="这里写图片描述" loading="lazy"></figure>
<p>好了，基本差不多了，其实常用的命令也就那么几个，如果使用多了，就熟练了，相信git给我们工作效率及工作上的提升...</p>

      </div>
      <div class="entry-block">
        <div class="entry-tags">
          
        </div>
      </div>
    </article>
    
      <section class="post-section prev-post">
        <div class="inner">
          <h3>前一篇</h3>
          <a href="https://xiong-zh.github.io/sublime使用总结/">
            <strong>sublime使用总结</strong>
          </a>
        </div>
      </section>
    
    
      <section class="post-section prev-post">
        <div class="inner">
          <h3>后一篇</h3>
          <a href="https://xiong-zh.github.io/Python爬取不确定页数网页/">
            <strong>Python爬取不确定页数网页</strong>
          </a>
        </div>
      </section>
    

    
      
        <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<div id="gitalk-container"></div>

<script>

  var gitalk = new Gitalk({
    clientID: '7691fdf5a3780e9bb3a4',
    clientSecret: 'f4bd6c2287489e6b24a18af94afd54efcd0f55f9',
    repo: 'xiong-zh.github.io',
    owner: 'xiong-zh',
    admin: ['xiong-zh'],
    id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
    distractionFreeMode: false  // Facebook-like distraction free mode
  })

  gitalk.render('gitalk-container')

</script>

      

      
    

    <footer class="footer">
  <div class="main">
    <a href="https://xiong-zh.github.io">
      <img class="avatar" src="https://xiong-zh.github.io/images/avatar.png?v=1581997057390" alt="ZhangXiong">
    </a>
    <div class="footer__social">
      
        
          <a href="https://github.com/xiong-zh" target="_blank"><i class="remixicon-github-line"></i></a>
        
      
        
          <a href="https://twitter.com/imzhangxiong" target="_blank"><i class="remixicon-twitter-line"></i></a>
        
      
        
          <a href="https://weibo.com/zhangxiongblog" target="_blank"><i class="remixicon-weibo-line"></i></a>
        
      
        
          <a href="https://www.zhihu.com/people/yisyxi" target="_blank"><i class="remixicon-zhihu-line"></i></a>
        
      
        
          <a href="https://www.facebook.com/xiong.zh.397" target="_blank"><i class="remixicon-facebook-line"></i></a>
        
      
        
      
        
      
        
          <a href="https://www.instagram.com/imzhangxiong/" target="_blank"><i class="remixicon-instagram-line"></i></a>
        
      
        
      
        
      
    </div>
    <p class="footer__sosumi">
      Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> Copyright © 2020 <a href="https://zhangxiong.net/" target="_blank">zhangxiong</a> 版权所有
    </p>
    <a class="footer-rss" href="https://xiong-zh.github.io/atom.xml">RSS</a>
  </div>
</footer>

<script src="https://xiong-zh.github.io/media/prism.js"></script>
<script>
  Prism.highlightAll()
</script>

  </body>
</html>
